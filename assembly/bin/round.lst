     1                                  
     2                                  %include "lib/system.mac"
     3                              <1>  
     4                              <1> %ifndef SYSTEM_MAC
     5                              <1>  	%define SYSTEM_MAC
     6                              <1>  	
     7                              <1> 	%ifndef TRUE
     8                              <1> 		%define TRUE 01h
     9                              <1> 	%endif
    10                              <1> 	%ifndef FALSE
    11                              <1> 		%define FALSE 00h
    12                              <1> 	%endif
    13                              <1> 	
    14                              <1> %macro vlodsb 3
    15                              <1> 	vlodsb cs, %1, %2, %3
    16                              <1> %endmacro
    17                              <1> 
    18                              <1> %macro vstosb 3
    19                              <1> 	vstosb cs, %1, %2, %3
    20                              <1> %endmacro
    21                              <1> 	 	
    22                              <1> %macro int16toreg 2
    23                              <1> 	int16toreg cs, %1, %2
    24                              <1> %endmacro
    25                              <1> 
    26                              <1> %macro regtoint16 2
    27                              <1> 	regtoint16 %1, cs, %2
    28                              <1> %endmacro
    29                              <1> 
    30                              <1> %macro vstosb 4
    31                              <1> 	push %1
    32                              <1> 	pop ds
    33                              <1> 	mov si,%2
    34                              <1> 	add si,%3
    35                              <1> 	mov byte [si],%4	
    36                              <1> %endmacro
    37                              <1> 
    38                              <1> %macro vlodsb 4
    39                              <1> 	push %1
    40                              <1> 	pop ds
    41                              <1> 	mov si,%2
    42                              <1> 	add si,%3
    43                              <1> 	mov byte %4,[si]	
    44                              <1> %endmacro 	 
    45                              <1> 
    46                              <1> %macro int16toreg 3
    47                              <1> 	push %2
    48                              <1> 	push %1
    49                              <1> 	pop ds
    50                              <1> 	pop si
    51                              <1> 	mov word %3,[si]	
    52                              <1> %endmacro
    53                              <1> 
    54                              <1> %macro regtoint16 3
    55                              <1> 	push %3
    56                              <1> 	push %2
    57                              <1> 	pop ds
    58                              <1> 	pop si
    59                              <1> 	mov word [si],%1	
    60                              <1> %endmacro
    61                              <1> 
    62                              <1> %macro mov32 2
    63                              <1> 	mov32 cs, %1, cs, %2
    64                              <1> %endmacro
    65                              <1> 
    66                              <1> %macro mov16 2
    67                              <1> 	mov16 cs, %1, cs, %2
    68                              <1> %endmacro
    69                              <1> 
    70                              <1> %macro mov32 4
    71                              <1> 	mov ax,%3
    72                              <1> 	mov ds,ax
    73                              <1> 	mov cx,[%4+2]
    74                              <1> 	mov dx,[%4]
    75                              <1> 	mov ax,%1
    76                              <1> 	mov ds,ax
    77                              <1> 	mov [%2+2],cx
    78                              <1> 	mov [%2],dx
    79                              <1> %endmacro
    80                              <1> 
    81                              <1> %macro mov16 4
    82                              <1> 	mov ax,%3
    83                              <1> 	mov ds,ax
    84                              <1> 	mov bx,[%4]
    85                              <1> 	mov ax,%1
    86                              <1> 	mov ds,ax
    87                              <1> 	mov [%2],bx
    88                              <1> %endmacro
    89                              <1>  	 	
    90                              <1> %macro mformat 4
    91                              <1> 	stkopen 8
    92                              <1> 	mov word [ bp + 0 ], %1
    93                              <1> 	mov word [ bp + 2 ], %2
    94                              <1> 	mov word [ bp + 4 ], %3
    95                              <1> 	mov word [ bp + 6 ], %4
    96                              <1> 	call kernel_segment:mformat
    97                              <1> 	stkclose 8
    98                              <1> %endmacro
    99                              <1> 
   100                              <1> %macro malloc 6
   101                              <1> 	stkopen 0Bh
   102                              <1> 	mov word [ bp + 4 ], %3
   103                              <1> 	mov word [ bp + 6 ], %4
   104                              <1> 	mov word [ bp + 8 ], %5	
   105                              <1> 	call kernel_segment:malloc
   106                              <1> 	push sp
   107                              <1> 	pop bp
   108                              <1> 	mov word %1, [ bp ]
   109                              <1> 	mov word %2, [ bp + 2 ]
   110                              <1> 	mov byte %6, [ bp + 0x0A ]
   111                              <1> 	stkclose 0Bh
   112                              <1> %endmacro 	
   113                              <1> 
   114                              <1> %macro laddr 2
   115                              <1> 	laddr %1, %2, %1, %2
   116                              <1> %endmacro
   117                              <1> 
   118                              <1> %macro faddr 2
   119                              <1> 	faddr %1, %2, %1, %2
   120                              <1> %endmacro
   121                              <1>  	
   122                              <1> %macro laddr 4
   123                              <1> 	stkopen 8
   124                              <1> 	mov word [ bp + 4 ], %3
   125                              <1> 	mov word [ bp + 6 ], %4	
   126                              <1> 	call kernel_segment:laddr
   127                              <1> 	push sp
   128                              <1> 	pop bp
   129                              <1> 	mov word %1, [ bp + 0 ]
   130                              <1> 	mov word %2, [ bp + 2 ]	
   131                              <1> 	stkclose 8
   132                              <1> %endmacro
   133                              <1> 
   134                              <1> %macro faddr 4
   135                              <1> 	stkopen 8
   136                              <1> 	mov word [ bp + 4 ], %3
   137                              <1> 	mov word [ bp + 6 ], %4	
   138                              <1> 	call kernel_segment:faddr
   139                              <1> 	push sp
   140                              <1> 	pop bp
   141                              <1> 	mov word %1, [ bp + 0 ]
   142                              <1> 	mov word %2, [ bp + 2 ]	
   143                              <1> 	stkclose 8
   144                              <1> %endmacro	
   145                              <1>  
   146                              <1> 
   147                              <1> %macro stkopen 1		
   148                              <1> 	sub word sp, %1
   149                              <1> 	push sp
   150                              <1> 	pop bp
   151                              <1> %endmacro
   152                              <1> 
   153                              <1> %macro stkclose 1
   154                              <1> 	add word sp, %1
   155                              <1> %endmacro
   156                              <1> 
   157                              <1> %macro stkload 1-* 	
   158                              <1>  	%rep %0
   159                              <1>  	 	%rotate -1
   160                              <1>  		pop %1
   161                              <1>  	%endrep
   162                              <1>  	%rep %0
   163                              <1>  		push %1
   164                              <1>  		%rotate 1
   165                              <1>  	%endrep
   166                              <1> %endmacro
   167                              <1> 
   168                              <1> %macro stkpush 1-* 	
   169                              <1>  	%rep %0
   170                              <1>  		push %1
   171                              <1>  		%rotate 1
   172                              <1>  	%endrep 	
   173                              <1> %endmacro
   174                              <1>  
   175                              <1> %macro stkpop 1-*
   176                              <1>  	%rep %0
   177                              <1>  	 	%rotate -1
   178                              <1>  		pop %1
   179                              <1>  	%endrep 	 	
   180                              <1> %endmacro
   181                              <1> 
   182                              <1> %endif 
   183                                  %include "lib/stdio.mac"
   184                              <1> 
   185                              <1> %ifndef STDIO_MAC
   186                              <1> 	%define STDIO_MAC
   187                              <1> 	
   188                              <1> 	%include "lib/stdio.asm"
   189                              <2> 
   190                              <2> %ifndef STDIO_ASM
   191                              <2> 	%define STDIO_ASM
   192                              <2> 	
   193                              <2> 	%include "lib/system.mac"
   194                              <3>  
   195                              <3> %ifndef SYSTEM_MAC
   196                              <3>  	%define SYSTEM_MAC
   197                              <3>  	
   198                              <3> 	%ifndef TRUE
   199                              <3> 		%define TRUE 01h
   200                              <3> 	%endif
   201                              <3> 	%ifndef FALSE
   202                              <3> 		%define FALSE 00h
   203                              <3> 	%endif
   204                              <3> 	
   205                              <3> %macro vlodsb 3
   206                              <3> 	vlodsb cs, %1, %2, %3
   207                              <3> %endmacro
   208                              <3> 
   209                              <3> %macro vstosb 3
   210                              <3> 	vstosb cs, %1, %2, %3
   211                              <3> %endmacro
   212                              <3> 	 	
   213                              <3> %macro int16toreg 2
   214                              <3> 	int16toreg cs, %1, %2
   215                              <3> %endmacro
   216                              <3> 
   217                              <3> %macro regtoint16 2
   218                              <3> 	regtoint16 %1, cs, %2
   219                              <3> %endmacro
   220                              <3> 
   221                              <3> %macro vstosb 4
   222                              <3> 	push %1
   223                              <3> 	pop ds
   224                              <3> 	mov si,%2
   225                              <3> 	add si,%3
   226                              <3> 	mov byte [si],%4	
   227                              <3> %endmacro
   228                              <3> 
   229                              <3> %macro vlodsb 4
   230                              <3> 	push %1
   231                              <3> 	pop ds
   232                              <3> 	mov si,%2
   233                              <3> 	add si,%3
   234                              <3> 	mov byte %4,[si]	
   235                              <3> %endmacro 	 
   236                              <3> 
   237                              <3> %macro int16toreg 3
   238                              <3> 	push %2
   239                              <3> 	push %1
   240                              <3> 	pop ds
   241                              <3> 	pop si
   242                              <3> 	mov word %3,[si]	
   243                              <3> %endmacro
   244                              <3> 
   245                              <3> %macro regtoint16 3
   246                              <3> 	push %3
   247                              <3> 	push %2
   248                              <3> 	pop ds
   249                              <3> 	pop si
   250                              <3> 	mov word [si],%1	
   251                              <3> %endmacro
   252                              <3> 
   253                              <3> %macro mov32 2
   254                              <3> 	mov32 cs, %1, cs, %2
   255                              <3> %endmacro
   256                              <3> 
   257                              <3> %macro mov16 2
   258                              <3> 	mov16 cs, %1, cs, %2
   259                              <3> %endmacro
   260                              <3> 
   261                              <3> %macro mov32 4
   262                              <3> 	mov ax,%3
   263                              <3> 	mov ds,ax
   264                              <3> 	mov cx,[%4+2]
   265                              <3> 	mov dx,[%4]
   266                              <3> 	mov ax,%1
   267                              <3> 	mov ds,ax
   268                              <3> 	mov [%2+2],cx
   269                              <3> 	mov [%2],dx
   270                              <3> %endmacro
   271                              <3> 
   272                              <3> %macro mov16 4
   273                              <3> 	mov ax,%3
   274                              <3> 	mov ds,ax
   275                              <3> 	mov bx,[%4]
   276                              <3> 	mov ax,%1
   277                              <3> 	mov ds,ax
   278                              <3> 	mov [%2],bx
   279                              <3> %endmacro
   280                              <3>  	 	
   281                              <3> %macro mformat 4
   282                              <3> 	stkopen 8
   283                              <3> 	mov word [ bp + 0 ], %1
   284                              <3> 	mov word [ bp + 2 ], %2
   285                              <3> 	mov word [ bp + 4 ], %3
   286                              <3> 	mov word [ bp + 6 ], %4
   287                              <3> 	call kernel_segment:mformat
   288                              <3> 	stkclose 8
   289                              <3> %endmacro
   290                              <3> 
   291                              <3> %macro malloc 6
   292                              <3> 	stkopen 0Bh
   293                              <3> 	mov word [ bp + 4 ], %3
   294                              <3> 	mov word [ bp + 6 ], %4
   295                              <3> 	mov word [ bp + 8 ], %5	
   296                              <3> 	call kernel_segment:malloc
   297                              <3> 	push sp
   298                              <3> 	pop bp
   299                              <3> 	mov word %1, [ bp ]
   300                              <3> 	mov word %2, [ bp + 2 ]
   301                              <3> 	mov byte %6, [ bp + 0x0A ]
   302                              <3> 	stkclose 0Bh
   303                              <3> %endmacro 	
   304                              <3> 
   305                              <3> %macro laddr 2
   306                              <3> 	laddr %1, %2, %1, %2
   307                              <3> %endmacro
   308                              <3> 
   309                              <3> %macro faddr 2
   310                              <3> 	faddr %1, %2, %1, %2
   311                              <3> %endmacro
   312                              <3>  	
   313                              <3> %macro laddr 4
   314                              <3> 	stkopen 8
   315                              <3> 	mov word [ bp + 4 ], %3
   316                              <3> 	mov word [ bp + 6 ], %4	
   317                              <3> 	call kernel_segment:laddr
   318                              <3> 	push sp
   319                              <3> 	pop bp
   320                              <3> 	mov word %1, [ bp + 0 ]
   321                              <3> 	mov word %2, [ bp + 2 ]	
   322                              <3> 	stkclose 8
   323                              <3> %endmacro
   324                              <3> 
   325                              <3> %macro faddr 4
   326                              <3> 	stkopen 8
   327                              <3> 	mov word [ bp + 4 ], %3
   328                              <3> 	mov word [ bp + 6 ], %4	
   329                              <3> 	call kernel_segment:faddr
   330                              <3> 	push sp
   331                              <3> 	pop bp
   332                              <3> 	mov word %1, [ bp + 0 ]
   333                              <3> 	mov word %2, [ bp + 2 ]	
   334                              <3> 	stkclose 8
   335                              <3> %endmacro	
   336                              <3>  
   337                              <3> 
   338                              <3> %macro stkopen 1		
   339                              <3> 	sub word sp, %1
   340                              <3> 	push sp
   341                              <3> 	pop bp
   342                              <3> %endmacro
   343                              <3> 
   344                              <3> %macro stkclose 1
   345                              <3> 	add word sp, %1
   346                              <3> %endmacro
   347                              <3> 
   348                              <3> %macro stkload 1-* 	
   349                              <3>  	%rep %0
   350                              <3>  	 	%rotate -1
   351                              <3>  		pop %1
   352                              <3>  	%endrep
   353                              <3>  	%rep %0
   354                              <3>  		push %1
   355                              <3>  		%rotate 1
   356                              <3>  	%endrep
   357                              <3> %endmacro
   358                              <3> 
   359                              <3> %macro stkpush 1-* 	
   360                              <3>  	%rep %0
   361                              <3>  		push %1
   362                              <3>  		%rotate 1
   363                              <3>  	%endrep 	
   364                              <3> %endmacro
   365                              <3>  
   366                              <3> %macro stkpop 1-*
   367                              <3>  	%rep %0
   368                              <3>  	 	%rotate -1
   369                              <3>  		pop %1
   370                              <3>  	%endrep 	 	
   371                              <3> %endmacro
   372                              <3> 
   373                              <3> %endif 
   374                              <2> 	
   375                              <2> %macro __prtch 1	
   376                              <2> 	stkopen 1	
   377                              <2> 	mov byte [ bp ], %1
   378                              <2> 	call proc_prtch
   379                              <2> 	stkclose 1
   380                              <2> %endmacro
   381                              <2> 
   382                              <2> %macro __prtln 0
   383                              <2> 	call proc_prtln
   384                              <2> %endmacro	
   385                              <2> 
   386                              <2> %macro __prtsubbin8 3
   387                              <2> 	stkopen 3
   388                              <2> 	mov byte [bp+0],%1
   389                              <2> 	mov byte [bp+1],%2
   390                              <2> 	mov byte [bp+2],%3
   391                              <2> 	call proc_prtsubbin8
   392                              <2> 	stkclose 3
   393                              <2> %endmacro
   394                              <2> 	
   395                              <2> section .data
   396                              <2> 	
   397                              <2> proc_prtIEEE754:
   398 00000000 89E0                <2> 	mov ax,sp
   399 00000002 89C5                <2> 	mov bp,ax			
   400 00000004 8B4602              <2> 	mov ax,[bp+2]	
   401 00000007 50                  <2> 	push ax
   402 00000008 50                  <2> 	push ax
   403 00000009 50                  <2> 	push ax
   404 0000000A 50                  <2> 	push ax	
   405 0000000B 50                  <2> 	push ax
   406                              <2> 	
   407                              <2> 	__prtsubbin8 ah,0,1
   408                              <3>  stkopen 3
   409 0000000C 83EC03              <4>  sub word sp, %1
   410 0000000F 54                  <4>  push sp
   411 00000010 5D                  <4>  pop bp
   412 00000011 886600              <3>  mov byte [bp+0],%1
   413 00000014 C6460100            <3>  mov byte [bp+1],%2
   414 00000018 C6460201            <3>  mov byte [bp+2],%3
   415 0000001C E87201              <3>  call proc_prtsubbin8
   416                              <3>  stkclose 3
   417 0000001F 83C403              <4>  add word sp, %1
   418                              <2> 	__prtch 20h
   419                              <3>  stkopen 1
   420 00000022 83EC01              <4>  sub word sp, %1
   421 00000025 54                  <4>  push sp
   422 00000026 5D                  <4>  pop bp
   423 00000027 C6460020            <3>  mov byte [ bp ], %1
   424 0000002B E82004              <3>  call proc_prtch
   425                              <3>  stkclose 1
   426 0000002E 83C401              <4>  add word sp, %1
   427                              <2> 	__prtch 20h
   428                              <3>  stkopen 1
   429 00000031 83EC01              <4>  sub word sp, %1
   430 00000034 54                  <4>  push sp
   431 00000035 5D                  <4>  pop bp
   432 00000036 C6460020            <3>  mov byte [ bp ], %1
   433 0000003A E81104              <3>  call proc_prtch
   434                              <3>  stkclose 1
   435 0000003D 83C401              <4>  add word sp, %1
   436 00000040 58                  <2> 	pop ax
   437                              <2> 	__prtsubbin8 ah,1,5
   438                              <3>  stkopen 3
   439 00000041 83EC03              <4>  sub word sp, %1
   440 00000044 54                  <4>  push sp
   441 00000045 5D                  <4>  pop bp
   442 00000046 886600              <3>  mov byte [bp+0],%1
   443 00000049 C6460101            <3>  mov byte [bp+1],%2
   444 0000004D C6460205            <3>  mov byte [bp+2],%3
   445 00000051 E83D01              <3>  call proc_prtsubbin8
   446                              <3>  stkclose 3
   447 00000054 83C403              <4>  add word sp, %1
   448 00000057 58                  <2> 	pop ax
   449                              <2> 	__prtsubbin8 ah,5,8
   450                              <3>  stkopen 3
   451 00000058 83EC03              <4>  sub word sp, %1
   452 0000005B 54                  <4>  push sp
   453 0000005C 5D                  <4>  pop bp
   454 0000005D 886600              <3>  mov byte [bp+0],%1
   455 00000060 C6460105            <3>  mov byte [bp+1],%2
   456 00000064 C6460208            <3>  mov byte [bp+2],%3
   457 00000068 E82601              <3>  call proc_prtsubbin8
   458                              <3>  stkclose 3
   459 0000006B 83C403              <4>  add word sp, %1
   460                              <2> 	
   461 0000006E 58                  <2> 	pop ax
   462                              <2> 	__prtsubbin8 al,0,1
   463                              <3>  stkopen 3
   464 0000006F 83EC03              <4>  sub word sp, %1
   465 00000072 54                  <4>  push sp
   466 00000073 5D                  <4>  pop bp
   467 00000074 884600              <3>  mov byte [bp+0],%1
   468 00000077 C6460100            <3>  mov byte [bp+1],%2
   469 0000007B C6460201            <3>  mov byte [bp+2],%3
   470 0000007F E80F01              <3>  call proc_prtsubbin8
   471                              <3>  stkclose 3
   472 00000082 83C403              <4>  add word sp, %1
   473                              <2> 	__prtch 20h
   474                              <3>  stkopen 1
   475 00000085 83EC01              <4>  sub word sp, %1
   476 00000088 54                  <4>  push sp
   477 00000089 5D                  <4>  pop bp
   478 0000008A C6460020            <3>  mov byte [ bp ], %1
   479 0000008E E8BD03              <3>  call proc_prtch
   480                              <3>  stkclose 1
   481 00000091 83C401              <4>  add word sp, %1
   482                              <2> 	__prtch 20h
   483                              <3>  stkopen 1
   484 00000094 83EC01              <4>  sub word sp, %1
   485 00000097 54                  <4>  push sp
   486 00000098 5D                  <4>  pop bp
   487 00000099 C6460020            <3>  mov byte [ bp ], %1
   488 0000009D E8AE03              <3>  call proc_prtch
   489                              <3>  stkclose 1
   490 000000A0 83C401              <4>  add word sp, %1
   491 000000A3 58                  <2> 	pop ax
   492                              <2> 	__prtsubbin8 al,1,4
   493                              <3>  stkopen 3
   494 000000A4 83EC03              <4>  sub word sp, %1
   495 000000A7 54                  <4>  push sp
   496 000000A8 5D                  <4>  pop bp
   497 000000A9 884600              <3>  mov byte [bp+0],%1
   498 000000AC C6460101            <3>  mov byte [bp+1],%2
   499 000000B0 C6460204            <3>  mov byte [bp+2],%3
   500 000000B4 E8DA00              <3>  call proc_prtsubbin8
   501                              <3>  stkclose 3
   502 000000B7 83C403              <4>  add word sp, %1
   503                              <2> 	__prtch 20h
   504                              <3>  stkopen 1
   505 000000BA 83EC01              <4>  sub word sp, %1
   506 000000BD 54                  <4>  push sp
   507 000000BE 5D                  <4>  pop bp
   508 000000BF C6460020            <3>  mov byte [ bp ], %1
   509 000000C3 E88803              <3>  call proc_prtch
   510                              <3>  stkclose 1
   511 000000C6 83C401              <4>  add word sp, %1
   512 000000C9 58                  <2> 	pop ax
   513                              <2> 	__prtsubbin8 al,4,8
   514                              <3>  stkopen 3
   515 000000CA 83EC03              <4>  sub word sp, %1
   516 000000CD 54                  <4>  push sp
   517 000000CE 5D                  <4>  pop bp
   518 000000CF 884600              <3>  mov byte [bp+0],%1
   519 000000D2 C6460104            <3>  mov byte [bp+1],%2
   520 000000D6 C6460208            <3>  mov byte [bp+2],%3
   521 000000DA E8B400              <3>  call proc_prtsubbin8
   522                              <3>  stkclose 3
   523 000000DD 83C403              <4>  add word sp, %1
   524                              <2> 	__prtch 20h
   525                              <3>  stkopen 1
   526 000000E0 83EC01              <4>  sub word sp, %1
   527 000000E3 54                  <4>  push sp
   528 000000E4 5D                  <4>  pop bp
   529 000000E5 C6460020            <3>  mov byte [ bp ], %1
   530 000000E9 E86203              <3>  call proc_prtch
   531                              <3>  stkclose 1
   532 000000EC 83C401              <4>  add word sp, %1
   533                              <2> 	
   534 000000EF 89E0                <2> 	mov ax,sp
   535 000000F1 89C5                <2> 	mov bp,ax			
   536 000000F3 8B4604              <2> 	mov ax,[bp+4]
   537 000000F6 50                  <2> 	push ax
   538 000000F7 50                  <2> 	push ax
   539 000000F8 50                  <2> 	push ax
   540                              <2> 	
   541                              <2> 	__prtsubbin8 ah,0,4
   542                              <3>  stkopen 3
   543 000000F9 83EC03              <4>  sub word sp, %1
   544 000000FC 54                  <4>  push sp
   545 000000FD 5D                  <4>  pop bp
   546 000000FE 886600              <3>  mov byte [bp+0],%1
   547 00000101 C6460100            <3>  mov byte [bp+1],%2
   548 00000105 C6460204            <3>  mov byte [bp+2],%3
   549 00000109 E88500              <3>  call proc_prtsubbin8
   550                              <3>  stkclose 3
   551 0000010C 83C403              <4>  add word sp, %1
   552                              <2> 	__prtch 20h
   553                              <3>  stkopen 1
   554 0000010F 83EC01              <4>  sub word sp, %1
   555 00000112 54                  <4>  push sp
   556 00000113 5D                  <4>  pop bp
   557 00000114 C6460020            <3>  mov byte [ bp ], %1
   558 00000118 E83303              <3>  call proc_prtch
   559                              <3>  stkclose 1
   560 0000011B 83C401              <4>  add word sp, %1
   561 0000011E 58                  <2> 	pop ax
   562                              <2> 	__prtsubbin8 ah,4,8
   563                              <3>  stkopen 3
   564 0000011F 83EC03              <4>  sub word sp, %1
   565 00000122 54                  <4>  push sp
   566 00000123 5D                  <4>  pop bp
   567 00000124 886600              <3>  mov byte [bp+0],%1
   568 00000127 C6460104            <3>  mov byte [bp+1],%2
   569 0000012B C6460208            <3>  mov byte [bp+2],%3
   570 0000012F E85F00              <3>  call proc_prtsubbin8
   571                              <3>  stkclose 3
   572 00000132 83C403              <4>  add word sp, %1
   573                              <2> 	__prtch 20h
   574                              <3>  stkopen 1
   575 00000135 83EC01              <4>  sub word sp, %1
   576 00000138 54                  <4>  push sp
   577 00000139 5D                  <4>  pop bp
   578 0000013A C6460020            <3>  mov byte [ bp ], %1
   579 0000013E E80D03              <3>  call proc_prtch
   580                              <3>  stkclose 1
   581 00000141 83C401              <4>  add word sp, %1
   582                              <2> 	
   583 00000144 58                  <2> 	pop ax
   584                              <2> 	__prtsubbin8 al,0,4
   585                              <3>  stkopen 3
   586 00000145 83EC03              <4>  sub word sp, %1
   587 00000148 54                  <4>  push sp
   588 00000149 5D                  <4>  pop bp
   589 0000014A 884600              <3>  mov byte [bp+0],%1
   590 0000014D C6460100            <3>  mov byte [bp+1],%2
   591 00000151 C6460204            <3>  mov byte [bp+2],%3
   592 00000155 E83900              <3>  call proc_prtsubbin8
   593                              <3>  stkclose 3
   594 00000158 83C403              <4>  add word sp, %1
   595                              <2> 	__prtch 20h
   596                              <3>  stkopen 1
   597 0000015B 83EC01              <4>  sub word sp, %1
   598 0000015E 54                  <4>  push sp
   599 0000015F 5D                  <4>  pop bp
   600 00000160 C6460020            <3>  mov byte [ bp ], %1
   601 00000164 E8E702              <3>  call proc_prtch
   602                              <3>  stkclose 1
   603 00000167 83C401              <4>  add word sp, %1
   604 0000016A 58                  <2> 	pop ax
   605                              <2> 	__prtsubbin8 al,4,8
   606                              <3>  stkopen 3
   607 0000016B 83EC03              <4>  sub word sp, %1
   608 0000016E 54                  <4>  push sp
   609 0000016F 5D                  <4>  pop bp
   610 00000170 884600              <3>  mov byte [bp+0],%1
   611 00000173 C6460104            <3>  mov byte [bp+1],%2
   612 00000177 C6460208            <3>  mov byte [bp+2],%3
   613 0000017B E81300              <3>  call proc_prtsubbin8
   614                              <3>  stkclose 3
   615 0000017E 83C403              <4>  add word sp, %1
   616                              <2> 	__prtch 20h
   617                              <3>  stkopen 1
   618 00000181 83EC01              <4>  sub word sp, %1
   619 00000184 54                  <4>  push sp
   620 00000185 5D                  <4>  pop bp
   621 00000186 C6460020            <3>  mov byte [ bp ], %1
   622 0000018A E8C102              <3>  call proc_prtch
   623                              <3>  stkclose 1
   624 0000018D 83C401              <4>  add word sp, %1
   625                              <2> 	
   626 00000190 C3                  <2> 	ret
   627                              <2> 	
   628                              <2> proc_prtsubbin8:
   629 00000191 89E0                <2> 	mov ax,sp
   630 00000193 89C5                <2> 	mov bp,ax
   631                              <2> 	
   632 00000195 8A4602              <2> 	mov al,[bp+2]
   633 00000198 50                  <2> 	push ax
   634                              <2> 	
   635 00000199 8A4E03              <2> 	mov cl,[bp+3]
   636 0000019C 8A6E04              <2> 	mov ch,[bp+4]
   637 0000019F 80FD08              <2> 	cmp ch,8
   638 000001A2 7602                <2> 	jbe .l1	
   639 000001A4 B508                <2> 		mov ch,8
   640                              <2> 	.l1:		
   641 000001A6 38E9                <2> 		cmp cl,ch		
   642 000001A8 731D                <2> 		jae .l2
   643                              <2> 		
   644 000001AA 58                  <2> 		pop ax
   645 000001AB 50                  <2> 		push ax
   646 000001AC D2E0                <2> 		shl al,cl
   647 000001AE C0E807              <2> 		shr al,7		
   648 000001B1 0430                <2> 		add al,30h
   649                              <2> 		
   650 000001B3 51                  <2> 		push cx
   651                              <2> 		__prtch al
   652                              <3>  stkopen 1
   653 000001B4 83EC01              <4>  sub word sp, %1
   654 000001B7 54                  <4>  push sp
   655 000001B8 5D                  <4>  pop bp
   656 000001B9 884600              <3>  mov byte [ bp ], %1
   657 000001BC E88F02              <3>  call proc_prtch
   658                              <3>  stkclose 1
   659 000001BF 83C401              <4>  add word sp, %1
   660 000001C2 59                  <2> 		pop cx
   661                              <2> 		
   662 000001C3 FEC1                <2> 		inc cl
   663 000001C5 EBDF                <2> 		jmp .l1
   664                              <2> 	.l2:	
   665 000001C7 58                  <2> 	pop ax
   666                              <2> 	
   667 000001C8 C3                  <2> 	ret
   668                              <2> 	
   669                              <2> proc_prtbin16:
   670 000001C9 89E0                <2> 	mov ax,sp
   671 000001CB 89C5                <2> 	mov bp,ax
   672                              <2> 		
   673 000001CD 8A7E04              <2> 	mov bh, [bp+4]
   674 000001D0 B300                <2> 	mov bl,0
   675 000001D2 B201                <2> 	mov dl,TRUE
   676 000001D4 30ED                <2> 	xor ch,ch
   677 000001D6 B102                <2> 	mov cl,2
   678                              <2> 	.l1:
   679 000001D8 80F900              <2> 		cmp cl,0
   680 000001DB 744B                <2> 		jz .l2		
   681                              <2> 		
   682 000001DD 55                  <2> 		push bp
   683 000001DE 01CD                <2> 		add bp,cx
   684 000001E0 45                  <2> 		inc bp
   685                              <2> 		
   686 000001E1 0A5E00              <2> 		or byte bl, [bp]
   687 000001E4 08FB                <2> 		or byte bl, bh
   688 000001E6 743B                <2> 		jz .prted											
   689 000001E8 53                  <2> 			push bx
   690 000001E9 51                  <2> 			push cx	
   691 000001EA 80FA01              <2> 			cmp dl, TRUE
   692 000001ED 7402                <2> 			je .first
   693 000001EF EB10                <2> 			jmp .nfirst
   694                              <2> 			.first:
   695 000001F1 B200                <2> 				mov dl, FALSE
   696 000001F3 52                  <2> 				push dx
   697                              <2> 				
   698 000001F4 88FC                <2> 				mov ah, bh
   699 000001F6 8A4600              <2> 				mov byte al, [bp]
   700 000001F9 50                  <2> 				push ax
   701 000001FA E84000              <2> 				call proc_prtbin8
   702 000001FD 58                  <2> 				pop ax
   703                              <2> 							
   704 000001FE 5A                  <2> 				pop dx
   705 000001FF EB0C                <2> 				jmp .endfirst
   706                              <2> 			.nfirst:
   707 00000201 52                  <2> 				push dx
   708                              <2> 				
   709 00000202 B401                <2> 				mov ah, TRUE
   710 00000204 8A4600              <2> 				mov byte al, [bp]
   711 00000207 50                  <2> 				push ax
   712 00000208 E83200              <2> 				call proc_prtbin8
   713 0000020B 58                  <2> 				pop ax
   714                              <2> 								
   715 0000020C 5A                  <2> 				pop dx
   716                              <2> 			.endfirst:	
   717 0000020D 59                  <2> 			pop cx
   718 0000020E 5B                  <2> 			pop bx		
   719                              <2> 			
   720 0000020F 80F901              <2> 			cmp cl,1
   721 00000212 760F                <2> 			jbe .spaceprted
   722                              <2> 				__prtch 20h
   723                              <3>  stkopen 1
   724 00000214 83EC01              <4>  sub word sp, %1
   725 00000217 54                  <4>  push sp
   726 00000218 5D                  <4>  pop bp
   727 00000219 C6460020            <3>  mov byte [ bp ], %1
   728 0000021D E82E02              <3>  call proc_prtch
   729                              <3>  stkclose 1
   730 00000220 83C401              <4>  add word sp, %1
   731                              <2> 			.spaceprted:
   732                              <2> 		.prted:
   733                              <2> 		
   734 00000223 5D                  <2> 		pop bp
   735                              <2> 		
   736 00000224 FEC9                <2> 		dec cl
   737 00000226 EBB0                <2> 		jmp .l1
   738                              <2> 	.l2:
   739                              <2> 	
   740 00000228 80FB00              <2> 	cmp bl,0
   741 0000022B 750F                <2> 	jnz .end
   742                              <2> 		__prtch 30h
   743                              <3>  stkopen 1
   744 0000022D 83EC01              <4>  sub word sp, %1
   745 00000230 54                  <4>  push sp
   746 00000231 5D                  <4>  pop bp
   747 00000232 C6460030            <3>  mov byte [ bp ], %1
   748 00000236 E81502              <3>  call proc_prtch
   749                              <3>  stkclose 1
   750 00000239 83C401              <4>  add word sp, %1
   751                              <2> 	.end:
   752                              <2> 	
   753 0000023C C3                  <2> 	ret	
   754                              <2> 	
   755                              <2> proc_prtbin8:
   756 0000023D 89E0                <2> 	mov ax,sp
   757 0000023F 89C5                <2> 	mov bp,ax
   758 00000241 8A4602              <2> 	mov byte al, [bp+2]
   759 00000244 3C00                <2> 	cmp al, 0
   760 00000246 0F858700            <2> 	jnz .nzero
   761                              <2> 		__prtch 30h
   762                              <3>  stkopen 1
   763 0000024A 83EC01              <4>  sub word sp, %1
   764 0000024D 54                  <4>  push sp
   765 0000024E 5D                  <4>  pop bp
   766 0000024F C6460030            <3>  mov byte [ bp ], %1
   767 00000253 E8F801              <3>  call proc_prtch
   768                              <3>  stkclose 1
   769 00000256 83C401              <4>  add word sp, %1
   770                              <2> 		
   771 00000259 89E0                <2> 		mov ax,sp
   772 0000025B 89C5                <2> 		mov bp,ax
   773 0000025D 8A4603              <2> 		mov byte al, [bp+3]		
   774 00000260 3C00                <2> 		cmp al, FALSE
   775 00000262 0F84C500            <2> 		je .end
   776                              <2> 			__prtch 30h
   777                              <3>  stkopen 1
   778 00000266 83EC01              <4>  sub word sp, %1
   779 00000269 54                  <4>  push sp
   780 0000026A 5D                  <4>  pop bp
   781 0000026B C6460030            <3>  mov byte [ bp ], %1
   782 0000026F E8DC01              <3>  call proc_prtch
   783                              <3>  stkclose 1
   784 00000272 83C401              <4>  add word sp, %1
   785                              <2> 			__prtch 30h
   786                              <3>  stkopen 1
   787 00000275 83EC01              <4>  sub word sp, %1
   788 00000278 54                  <4>  push sp
   789 00000279 5D                  <4>  pop bp
   790 0000027A C6460030            <3>  mov byte [ bp ], %1
   791 0000027E E8CD01              <3>  call proc_prtch
   792                              <3>  stkclose 1
   793 00000281 83C401              <4>  add word sp, %1
   794                              <2> 			__prtch 30h
   795                              <3>  stkopen 1
   796 00000284 83EC01              <4>  sub word sp, %1
   797 00000287 54                  <4>  push sp
   798 00000288 5D                  <4>  pop bp
   799 00000289 C6460030            <3>  mov byte [ bp ], %1
   800 0000028D E8BE01              <3>  call proc_prtch
   801                              <3>  stkclose 1
   802 00000290 83C401              <4>  add word sp, %1
   803                              <2> 			__prtch 30h
   804                              <3>  stkopen 1
   805 00000293 83EC01              <4>  sub word sp, %1
   806 00000296 54                  <4>  push sp
   807 00000297 5D                  <4>  pop bp
   808 00000298 C6460030            <3>  mov byte [ bp ], %1
   809 0000029C E8AF01              <3>  call proc_prtch
   810                              <3>  stkclose 1
   811 0000029F 83C401              <4>  add word sp, %1
   812                              <2> 			__prtch 30h
   813                              <3>  stkopen 1
   814 000002A2 83EC01              <4>  sub word sp, %1
   815 000002A5 54                  <4>  push sp
   816 000002A6 5D                  <4>  pop bp
   817 000002A7 C6460030            <3>  mov byte [ bp ], %1
   818 000002AB E8A001              <3>  call proc_prtch
   819                              <3>  stkclose 1
   820 000002AE 83C401              <4>  add word sp, %1
   821                              <2> 			__prtch 30h
   822                              <3>  stkopen 1
   823 000002B1 83EC01              <4>  sub word sp, %1
   824 000002B4 54                  <4>  push sp
   825 000002B5 5D                  <4>  pop bp
   826 000002B6 C6460030            <3>  mov byte [ bp ], %1
   827 000002BA E89101              <3>  call proc_prtch
   828                              <3>  stkclose 1
   829 000002BD 83C401              <4>  add word sp, %1
   830                              <2> 			__prtch 30h
   831                              <3>  stkopen 1
   832 000002C0 83EC01              <4>  sub word sp, %1
   833 000002C3 54                  <4>  push sp
   834 000002C4 5D                  <4>  pop bp
   835 000002C5 C6460030            <3>  mov byte [ bp ], %1
   836 000002C9 E88201              <3>  call proc_prtch
   837                              <3>  stkclose 1
   838 000002CC 83C401              <4>  add word sp, %1
   839 000002CF EB5A                <2> 			jmp .end		
   840                              <2> 	.nzero:
   841                              <2> 
   842 000002D1 B000                <2> 	mov byte al, FALSE
   843 000002D3 50                  <2> 	push ax
   844                              <2> 
   845 000002D4 89E0                <2> 	mov ax,sp
   846 000002D6 89C5                <2> 	mov bp,ax
   847 000002D8 8A5E04              <2> 	mov byte bl, [bp+4]
   848 000002DB B100                <2> 	mov cl,0
   849                              <2> 	.l1:
   850 000002DD 80F908              <2> 		cmp cl,8
   851 000002E0 7348                <2> 		jae .l2
   852                              <2> 		
   853 000002E2 88C8                <2> 		mov al,cl
   854                              <2> 		
   855 000002E4 88DA                <2> 		mov dl, bl		
   856                              <2> 		
   857                              <2> 		.l1.1:
   858 000002E6 3C00                <2> 			cmp al,0
   859 000002E8 7406                <2> 			jz .l1.2
   860                              <2> 							
   861 000002EA D0E2                <2> 			shl dl,1
   862                              <2> 			
   863 000002EC FEC8                <2> 			dec al
   864 000002EE EBF6                <2> 			jmp .l1.1
   865                              <2> 		.l1.2:
   866                              <2> 						
   867 000002F0 C0EA07              <2> 		shr dl,7
   868                              <2> 		
   869 000002F3 89E0                <2> 		mov ax,sp
   870 000002F5 89C5                <2> 		mov bp,ax			
   871 000002F7 8A4605              <2> 		mov byte al, [bp+5]
   872 000002FA 3C01                <2> 		cmp al, TRUE
   873 000002FC 7413                <2> 		je .endzero		
   874 000002FE 80FA00              <2> 			cmp dl,0
   875 00000301 7402                <2> 			jz .zero
   876 00000303 EB08                <2> 			jmp .notzero
   877                              <2> 			.zero:
   878 00000305 58                  <2> 				pop ax
   879 00000306 50                  <2> 				push ax
   880 00000307 3C01                <2> 				cmp al, TRUE				
   881 00000309 7406                <2> 				je .endzero
   882 0000030B EB19                <2> 				jmp .inc
   883                              <2> 			.notzero:
   884 0000030D 58                  <2> 				pop ax
   885 0000030E B001                <2> 				mov al, TRUE	
   886 00000310 50                  <2> 				push ax				
   887                              <2> 		.endzero:
   888                              <2> 									
   889 00000311 80C230              <2> 		add dl,30h
   890                              <2> 
   891 00000314 51                  <2> 		push cx
   892 00000315 52                  <2> 		push dx
   893                              <2> 		__prtch dl
   894                              <3>  stkopen 1
   895 00000316 83EC01              <4>  sub word sp, %1
   896 00000319 54                  <4>  push sp
   897 0000031A 5D                  <4>  pop bp
   898 0000031B 885600              <3>  mov byte [ bp ], %1
   899 0000031E E82D01              <3>  call proc_prtch
   900                              <3>  stkclose 1
   901 00000321 83C401              <4>  add word sp, %1
   902 00000324 5A                  <2> 		pop dx
   903 00000325 59                  <2> 		pop cx	
   904                              <2> 
   905                              <2> 		.inc:
   906                              <2> 	
   907 00000326 FEC1                <2> 		inc cl
   908 00000328 EBB3                <2> 		jmp .l1	
   909                              <2> 	.l2:
   910                              <2> 	
   911 0000032A 58                  <2> 	pop ax
   912                              <2> 	
   913                              <2> 	.end:
   914                              <2> 	
   915 0000032B C3                  <2> 	ret	
   916                              <2> 
   917                              <2> proc_prthex16:
   918 0000032C 89E0                <2> 	mov ax,sp
   919 0000032E 89C5                <2> 	mov bp,ax
   920                              <2> 
   921 00000330 8A7E04              <2> 	mov byte bh, [bp+4]		
   922 00000333 B300                <2> 	mov bl,0	
   923 00000335 B201                <2> 	mov dl,TRUE
   924 00000337 30ED                <2> 	xor ch,ch
   925 00000339 B102                <2> 	mov cl, 2	
   926                              <2> 	.l1:			
   927 0000033B 80F900              <2> 		cmp cl,0
   928 0000033E 7437                <2> 		jz .l2
   929                              <2> 							
   930 00000340 55                  <2> 		push bp		
   931 00000341 01CD                <2> 		add bp,cx
   932 00000343 45                  <2> 		inc bp		
   933                              <2> 		
   934 00000344 0A5E00              <2> 		or byte bl, [bp]
   935 00000347 08FB                <2> 		or byte bl, bh
   936 00000349 7427                <2> 		jz .prted							
   937 0000034B 53                  <2> 			push bx
   938 0000034C 51                  <2> 			push cx	
   939 0000034D 80FA01              <2> 			cmp dl, TRUE
   940 00000350 7402                <2> 			je .first
   941 00000352 EB10                <2> 			jmp .nfirst
   942                              <2> 			.first:
   943 00000354 B200                <2> 				mov dl, FALSE
   944 00000356 52                  <2> 				push dx
   945                              <2> 				
   946 00000357 88FC                <2> 				mov ah, bh
   947 00000359 8A4600              <2> 				mov byte al, [bp]
   948 0000035C 50                  <2> 				push ax
   949 0000035D E82C00              <2> 				call proc_prthex8
   950 00000360 58                  <2> 				pop ax
   951                              <2> 							
   952 00000361 5A                  <2> 				pop dx
   953 00000362 EB0C                <2> 				jmp .endfirst
   954                              <2> 			.nfirst:
   955 00000364 52                  <2> 				push dx
   956                              <2> 				
   957 00000365 B401                <2> 				mov ah, TRUE
   958 00000367 8A4600              <2> 				mov byte al, [bp]
   959 0000036A 50                  <2> 				push ax
   960 0000036B E81E00              <2> 				call proc_prthex8
   961 0000036E 58                  <2> 				pop ax
   962                              <2> 								
   963 0000036F 5A                  <2> 				pop dx
   964                              <2> 			.endfirst:	
   965 00000370 59                  <2> 			pop cx
   966 00000371 5B                  <2> 			pop bx		
   967                              <2> 		.prted:
   968                              <2> 		
   969 00000372 5D                  <2> 		pop bp
   970                              <2> 	
   971 00000373 FEC9                <2> 		dec cl
   972 00000375 EBC4                <2> 		jmp .l1		
   973                              <2> 	.l2:
   974                              <2> 	
   975 00000377 80FB00              <2> 	cmp bl,0
   976 0000037A 750F                <2> 	jnz .end
   977                              <2> 		__prtch 30h
   978                              <3>  stkopen 1
   979 0000037C 83EC01              <4>  sub word sp, %1
   980 0000037F 54                  <4>  push sp
   981 00000380 5D                  <4>  pop bp
   982 00000381 C6460030            <3>  mov byte [ bp ], %1
   983 00000385 E8C600              <3>  call proc_prtch
   984                              <3>  stkclose 1
   985 00000388 83C401              <4>  add word sp, %1
   986                              <2> 	.end:
   987                              <2> 	
   988 0000038B C3                  <2> 	ret
   989                              <2> 	
   990                              <2> proc_prthex8:
   991 0000038C 89E0                <2> 	mov ax,sp
   992 0000038E 89C5                <2> 	mov bp,ax
   993 00000390 8A4602              <2> 	mov byte al, [bp+2]
   994 00000393 3C00                <2> 	cmp al, 0
   995 00000395 752B                <2> 	jnz .nzero
   996                              <2> 		__prtch 30h
   997                              <3>  stkopen 1
   998 00000397 83EC01              <4>  sub word sp, %1
   999 0000039A 54                  <4>  push sp
  1000 0000039B 5D                  <4>  pop bp
  1001 0000039C C6460030            <3>  mov byte [ bp ], %1
  1002 000003A0 E8AB00              <3>  call proc_prtch
  1003                              <3>  stkclose 1
  1004 000003A3 83C401              <4>  add word sp, %1
  1005                              <2> 		
  1006 000003A6 89E0                <2> 		mov ax,sp
  1007 000003A8 89C5                <2> 		mov bp,ax
  1008 000003AA 8A4603              <2> 		mov byte al, [bp+3]		
  1009 000003AD 3C00                <2> 		cmp al, FALSE
  1010 000003AF 7476                <2> 		je .end
  1011                              <2> 			__prtch 30h
  1012                              <3>  stkopen 1
  1013 000003B1 83EC01              <4>  sub word sp, %1
  1014 000003B4 54                  <4>  push sp
  1015 000003B5 5D                  <4>  pop bp
  1016 000003B6 C6460030            <3>  mov byte [ bp ], %1
  1017 000003BA E89100              <3>  call proc_prtch
  1018                              <3>  stkclose 1
  1019 000003BD 83C401              <4>  add word sp, %1
  1020 000003C0 EB65                <2> 			jmp .end		
  1021                              <2> 	.nzero:
  1022                              <2> 
  1023 000003C2 B000                <2> 	mov byte al, FALSE
  1024 000003C4 50                  <2> 	push ax
  1025                              <2> 
  1026 000003C5 89E0                <2> 	mov ax,sp
  1027 000003C7 89C5                <2> 	mov bp,ax
  1028 000003C9 8A5E04              <2> 	mov byte bl, [bp+4]
  1029 000003CC B102                <2> 	mov cl,2
  1030                              <2> 	.l1:
  1031 000003CE 80F900              <2> 		cmp cl,0
  1032 000003D1 7453                <2> 		jz .l2
  1033                              <2> 		
  1034 000003D3 B002                <2> 		mov al,2
  1035 000003D5 28C8                <2> 		sub al,cl
  1036                              <2> 		
  1037 000003D7 88DA                <2> 		mov dl, bl	
  1038                              <2> 		
  1039                              <2> 		.l1.1:
  1040 000003D9 3C00                <2> 			cmp al,0
  1041 000003DB 7407                <2> 			jz .l1.2
  1042                              <2> 							
  1043 000003DD C0E204              <2> 			shl dl,4
  1044                              <2> 			
  1045 000003E0 FEC8                <2> 			dec al
  1046 000003E2 EBF5                <2> 			jmp .l1.1
  1047                              <2> 		.l1.2:
  1048                              <2> 						
  1049 000003E4 C0EA04              <2> 		shr dl,4
  1050                              <2> 
  1051 000003E7 89E0                <2> 		mov ax,sp
  1052 000003E9 89C5                <2> 		mov bp,ax			
  1053 000003EB 8A4605              <2> 		mov byte al, [bp+5]
  1054 000003EE 3C01                <2> 		cmp al, TRUE
  1055 000003F0 7413                <2> 		je .endzero		
  1056 000003F2 80FA00              <2> 			cmp dl,0
  1057 000003F5 7402                <2> 			jz .zero
  1058 000003F7 EB08                <2> 			jmp .notzero
  1059                              <2> 			.zero:
  1060 000003F9 58                  <2> 				pop ax
  1061 000003FA 50                  <2> 				push ax
  1062 000003FB 3C01                <2> 				cmp al, TRUE				
  1063 000003FD 7406                <2> 				je .endzero
  1064 000003FF EB21                <2> 				jmp .dec
  1065                              <2> 			.notzero:
  1066 00000401 58                  <2> 				pop ax
  1067 00000402 B001                <2> 				mov al, TRUE	
  1068 00000404 50                  <2> 				push ax				
  1069                              <2> 		.endzero:
  1070                              <2> 						
  1071 00000405 80FA09              <2> 		cmp dl,9
  1072 00000408 7603                <2> 		jbe .endsumseven  		
  1073 0000040A 80C207              <2> 		add dl,7
  1074                              <2> 		.endsumseven:
  1075                              <2> 						
  1076 0000040D 80C230              <2> 		add dl,30h
  1077                              <2> 
  1078 00000410 51                  <2> 		push cx
  1079 00000411 52                  <2> 		push dx
  1080                              <2> 		__prtch dl
  1081                              <3>  stkopen 1
  1082 00000412 83EC01              <4>  sub word sp, %1
  1083 00000415 54                  <4>  push sp
  1084 00000416 5D                  <4>  pop bp
  1085 00000417 885600              <3>  mov byte [ bp ], %1
  1086 0000041A E83100              <3>  call proc_prtch
  1087                              <3>  stkclose 1
  1088 0000041D 83C401              <4>  add word sp, %1
  1089 00000420 5A                  <2> 		pop dx
  1090 00000421 59                  <2> 		pop cx	
  1091                              <2> 
  1092                              <2> 		.dec:
  1093                              <2> 	
  1094 00000422 FEC9                <2> 		dec cl
  1095 00000424 EBA8                <2> 		jmp .l1	
  1096                              <2> 	.l2:
  1097                              <2> 	
  1098 00000426 58                  <2> 	pop ax
  1099                              <2> 	
  1100                              <2> 	.end:
  1101                              <2> 	
  1102 00000427 C3                  <2> 	ret
  1103                              <2> 
  1104                              <2> proc_prtstr:
  1105 00000428 89E0                <2> 	mov ax,sp
  1106 0000042A 89C5                <2> 	mov bp,ax
  1107                              <2> 	
  1108 0000042C 8B4602              <2> 	mov ax, [bp+2]
  1109 0000042F 8ED8                <2> 	mov ds, ax
  1110 00000431 8B7604              <2> 	mov si, [bp+4]						
  1111                              <2> 	.loop:
  1112 00000434 AC                  <2> 		lodsb
  1113 00000435 3C00                <2> 		cmp al,0h
  1114 00000437 7414                <2> 		jz .done
  1115                              <2> 		
  1116 00000439 1E                  <2> 		push ds
  1117 0000043A 56                  <2> 		push si
  1118                              <2> 					
  1119                              <2> 		__prtch al										
  1120                              <3>  stkopen 1
  1121 0000043B 83EC01              <4>  sub word sp, %1
  1122 0000043E 54                  <4>  push sp
  1123 0000043F 5D                  <4>  pop bp
  1124 00000440 884600              <3>  mov byte [ bp ], %1
  1125 00000443 E80800              <3>  call proc_prtch
  1126                              <3>  stkclose 1
  1127 00000446 83C401              <4>  add word sp, %1
  1128                              <2> 									
  1129 00000449 5E                  <2> 		pop si
  1130 0000044A 1F                  <2> 		pop ds
  1131                              <2> 											
  1132 0000044B EBE7                <2> 		jmp .loop 
  1133                              <2> 	.done:
  1134                              <2> 	
  1135 0000044D C3                  <2> 	ret	
  1136                              <2> 	
  1137                              <2> proc_prtch:
  1138 0000044E 89E0                <2> 	mov ax,sp
  1139 00000450 89C5                <2> 	mov bp,ax
  1140                              <2> 
  1141 00000452 8A4602              <2> 	mov al,[bp+2]
  1142 00000455 B40E                <2> 	mov ah,0Eh
  1143 00000457 B700                <2> 	mov bh,00h
  1144 00000459 CD10                <2> 	int 10h	
  1145                              <2> 	
  1146 0000045B C3                  <2> 	ret
  1147                              <2> 
  1148                              <2> proc_prtln:
  1149 0000045C B403                <2> 	mov ah,03h
  1150 0000045E B700                <2> 	mov bh,00h
  1151 00000460 CD10                <2> 	int 10h
  1152                              <2> 	
  1153 00000462 B402                <2> 	mov ah,02h
  1154 00000464 FEC6                <2> 	inc dh
  1155 00000466 B200                <2> 	mov dl,00h
  1156 00000468 CD10                <2> 	int 10h	
  1157                              <2> 	
  1158 0000046A C3                  <2> 	ret
  1159                              <2> 	
  1160                              <2> %endif
  1161                              <1>  	%include "lib/system.mac"
  1162                              <2>  
  1163                              <2> %ifndef SYSTEM_MAC
  1164                              <2>  	%define SYSTEM_MAC
  1165                              <2>  	
  1166                              <2> 	%ifndef TRUE
  1167                              <2> 		%define TRUE 01h
  1168                              <2> 	%endif
  1169                              <2> 	%ifndef FALSE
  1170                              <2> 		%define FALSE 00h
  1171                              <2> 	%endif
  1172                              <2> 	
  1173                              <2> %macro vlodsb 3
  1174                              <2> 	vlodsb cs, %1, %2, %3
  1175                              <2> %endmacro
  1176                              <2> 
  1177                              <2> %macro vstosb 3
  1178                              <2> 	vstosb cs, %1, %2, %3
  1179                              <2> %endmacro
  1180                              <2> 	 	
  1181                              <2> %macro int16toreg 2
  1182                              <2> 	int16toreg cs, %1, %2
  1183                              <2> %endmacro
  1184                              <2> 
  1185                              <2> %macro regtoint16 2
  1186                              <2> 	regtoint16 %1, cs, %2
  1187                              <2> %endmacro
  1188                              <2> 
  1189                              <2> %macro vstosb 4
  1190                              <2> 	push %1
  1191                              <2> 	pop ds
  1192                              <2> 	mov si,%2
  1193                              <2> 	add si,%3
  1194                              <2> 	mov byte [si],%4	
  1195                              <2> %endmacro
  1196                              <2> 
  1197                              <2> %macro vlodsb 4
  1198                              <2> 	push %1
  1199                              <2> 	pop ds
  1200                              <2> 	mov si,%2
  1201                              <2> 	add si,%3
  1202                              <2> 	mov byte %4,[si]	
  1203                              <2> %endmacro 	 
  1204                              <2> 
  1205                              <2> %macro int16toreg 3
  1206                              <2> 	push %2
  1207                              <2> 	push %1
  1208                              <2> 	pop ds
  1209                              <2> 	pop si
  1210                              <2> 	mov word %3,[si]	
  1211                              <2> %endmacro
  1212                              <2> 
  1213                              <2> %macro regtoint16 3
  1214                              <2> 	push %3
  1215                              <2> 	push %2
  1216                              <2> 	pop ds
  1217                              <2> 	pop si
  1218                              <2> 	mov word [si],%1	
  1219                              <2> %endmacro
  1220                              <2> 
  1221                              <2> %macro mov32 2
  1222                              <2> 	mov32 cs, %1, cs, %2
  1223                              <2> %endmacro
  1224                              <2> 
  1225                              <2> %macro mov16 2
  1226                              <2> 	mov16 cs, %1, cs, %2
  1227                              <2> %endmacro
  1228                              <2> 
  1229                              <2> %macro mov32 4
  1230                              <2> 	mov ax,%3
  1231                              <2> 	mov ds,ax
  1232                              <2> 	mov cx,[%4+2]
  1233                              <2> 	mov dx,[%4]
  1234                              <2> 	mov ax,%1
  1235                              <2> 	mov ds,ax
  1236                              <2> 	mov [%2+2],cx
  1237                              <2> 	mov [%2],dx
  1238                              <2> %endmacro
  1239                              <2> 
  1240                              <2> %macro mov16 4
  1241                              <2> 	mov ax,%3
  1242                              <2> 	mov ds,ax
  1243                              <2> 	mov bx,[%4]
  1244                              <2> 	mov ax,%1
  1245                              <2> 	mov ds,ax
  1246                              <2> 	mov [%2],bx
  1247                              <2> %endmacro
  1248                              <2>  	 	
  1249                              <2> %macro mformat 4
  1250                              <2> 	stkopen 8
  1251                              <2> 	mov word [ bp + 0 ], %1
  1252                              <2> 	mov word [ bp + 2 ], %2
  1253                              <2> 	mov word [ bp + 4 ], %3
  1254                              <2> 	mov word [ bp + 6 ], %4
  1255                              <2> 	call kernel_segment:mformat
  1256                              <2> 	stkclose 8
  1257                              <2> %endmacro
  1258                              <2> 
  1259                              <2> %macro malloc 6
  1260                              <2> 	stkopen 0Bh
  1261                              <2> 	mov word [ bp + 4 ], %3
  1262                              <2> 	mov word [ bp + 6 ], %4
  1263                              <2> 	mov word [ bp + 8 ], %5	
  1264                              <2> 	call kernel_segment:malloc
  1265                              <2> 	push sp
  1266                              <2> 	pop bp
  1267                              <2> 	mov word %1, [ bp ]
  1268                              <2> 	mov word %2, [ bp + 2 ]
  1269                              <2> 	mov byte %6, [ bp + 0x0A ]
  1270                              <2> 	stkclose 0Bh
  1271                              <2> %endmacro 	
  1272                              <2> 
  1273                              <2> %macro laddr 2
  1274                              <2> 	laddr %1, %2, %1, %2
  1275                              <2> %endmacro
  1276                              <2> 
  1277                              <2> %macro faddr 2
  1278                              <2> 	faddr %1, %2, %1, %2
  1279                              <2> %endmacro
  1280                              <2>  	
  1281                              <2> %macro laddr 4
  1282                              <2> 	stkopen 8
  1283                              <2> 	mov word [ bp + 4 ], %3
  1284                              <2> 	mov word [ bp + 6 ], %4	
  1285                              <2> 	call kernel_segment:laddr
  1286                              <2> 	push sp
  1287                              <2> 	pop bp
  1288                              <2> 	mov word %1, [ bp + 0 ]
  1289                              <2> 	mov word %2, [ bp + 2 ]	
  1290                              <2> 	stkclose 8
  1291                              <2> %endmacro
  1292                              <2> 
  1293                              <2> %macro faddr 4
  1294                              <2> 	stkopen 8
  1295                              <2> 	mov word [ bp + 4 ], %3
  1296                              <2> 	mov word [ bp + 6 ], %4	
  1297                              <2> 	call kernel_segment:faddr
  1298                              <2> 	push sp
  1299                              <2> 	pop bp
  1300                              <2> 	mov word %1, [ bp + 0 ]
  1301                              <2> 	mov word %2, [ bp + 2 ]	
  1302                              <2> 	stkclose 8
  1303                              <2> %endmacro	
  1304                              <2>  
  1305                              <2> 
  1306                              <2> %macro stkopen 1		
  1307                              <2> 	sub word sp, %1
  1308                              <2> 	push sp
  1309                              <2> 	pop bp
  1310                              <2> %endmacro
  1311                              <2> 
  1312                              <2> %macro stkclose 1
  1313                              <2> 	add word sp, %1
  1314                              <2> %endmacro
  1315                              <2> 
  1316                              <2> %macro stkload 1-* 	
  1317                              <2>  	%rep %0
  1318                              <2>  	 	%rotate -1
  1319                              <2>  		pop %1
  1320                              <2>  	%endrep
  1321                              <2>  	%rep %0
  1322                              <2>  		push %1
  1323                              <2>  		%rotate 1
  1324                              <2>  	%endrep
  1325                              <2> %endmacro
  1326                              <2> 
  1327                              <2> %macro stkpush 1-* 	
  1328                              <2>  	%rep %0
  1329                              <2>  		push %1
  1330                              <2>  		%rotate 1
  1331                              <2>  	%endrep 	
  1332                              <2> %endmacro
  1333                              <2>  
  1334                              <2> %macro stkpop 1-*
  1335                              <2>  	%rep %0
  1336                              <2>  	 	%rotate -1
  1337                              <2>  		pop %1
  1338                              <2>  	%endrep 	 	
  1339                              <2> %endmacro
  1340                              <2> 
  1341                              <2> %endif 
  1342                              <1> 
  1343                              <1> ; OBS: Esta macro no deve ser utilizada em procedimentos dinmicos		
  1344                              <1> %macro printf 1-*	
  1345                              <1> 	%rep %0					
  1346                              <1> 		__printf %1
  1347                              <1> 		%rotate 1		
  1348                              <1> 	%endrep
  1349                              <1> %endmacro	
  1350                              <1> 
  1351                              <1> ; OBS: Esta macro no deve ser utilizada em procedimentos dinmicos		
  1352                              <1> %macro __printf 1
  1353                              <1> 	section .data
  1354                              <1> 		%%str: db %1,0
  1355                              <1> 	section .text
  1356                              <1> 		prtstr cs, %%str				
  1357                              <1> %endmacro
  1358                              <1> 
  1359                              <1> %macro prtstr 2
  1360                              <1> 	stkopen 4
  1361                              <1> 	mov word [bp], %1
  1362                              <1> 	mov word [bp+2], %2
  1363                              <1> 	call proc_prtstr
  1364                              <1> 	stkclose 4
  1365                              <1> %endmacro
  1366                              <1> 
  1367                              <1> 
  1368                              <1> %macro prtIEEE754 1
  1369                              <1> 	prtIEEE754 cs, %1
  1370                              <1> %endmacro
  1371                              <1> 
  1372                              <1> %macro prtIEEE754 2
  1373                              <1> 	stkopen 4
  1374                              <1> 	mov ax,%1
  1375                              <1> 	mov ds,ax
  1376                              <1> 	mov ax, [%2+2]
  1377                              <1> 	mov word [bp+0], ax
  1378                              <1> 	mov ax, [%2]
  1379                              <1> 	mov word [bp+2], ax
  1380                              <1> 	call proc_prtIEEE754
  1381                              <1> 	stkclose 4
  1382                              <1> %endmacro
  1383                              <1> 
  1384                              <1> %macro prtbool 1	
  1385                              <1> 	cmp byte %1, TRUE
  1386                              <1> 	je .true
  1387                              <1> 	jmp .false
  1388                              <1> 	.true:
  1389                              <1> 		prtf "true"
  1390                              <1> 		jmp .endcmp
  1391                              <1> 	.false:
  1392                              <1> 		prtf "false"
  1393                              <1> 	.endcmp:	
  1394                              <1> %endmacro
  1395                              <1> 
  1396                              <1> %macro prtptr 2-3 TRUE
  1397                              <1> 	stkopen 3
  1398                              <1> 	mov word [ bp + 0 ], %2
  1399                              <1> 	mov byte [ bp + 2 ], %3
  1400                              <1> 	prthex16 %1, %3
  1401                              <1> 	writechar ':'
  1402                              <1> 	push sp
  1403                              <1> 	pop bp
  1404                              <1> 	mov word ax, [ bp + 0 ]
  1405                              <1> 	mov byte bl, [ bp + 2 ]
  1406                              <1> 	prthex16 ax, bl
  1407                              <1> 	stkclose 3
  1408                              <1> %endmacro
  1409                              <1> 
  1410                              <1> %macro prtfptr 2-3 TRUE
  1411                              <1> 	stkopen 3
  1412                              <1> 	mov word [ bp + 0 ], %1
  1413                              <1> 	mov byte [ bp + 2 ], %3
  1414                              <1> 	prthex16 %2, %3
  1415                              <1> 	push sp
  1416                              <1> 	pop bp
  1417                              <1> 	mov word ax, [ bp + 0 ]
  1418                              <1> 	mov byte bl, [ bp + 2 ]
  1419                              <1> 	prthex16 ax, bl
  1420                              <1> 	stkclose 3
  1421                              <1> %endmacro
  1422                              <1> 
  1423                              <1> %macro prtbin32 1
  1424                              <1> 	prtbin32 cs, %1
  1425                              <1> %endmacro
  1426                              <1> 
  1427                              <1> %macro prtbin32 2
  1428                              <1> 	mov ax,%1
  1429                              <1> 	mov ds,ax
  1430                              <1> 	mov word ax,[%2+2]
  1431                              <1> 	prtbin16 ax
  1432                              <1> 	prtch 20h
  1433                              <1> 	mov ax,%1
  1434                              <1> 	mov ds,ax
  1435                              <1> 	mov word ax,[%2]
  1436                              <1> 	prtbin16 ax
  1437                              <1> %endmacro
  1438                              <1> 
  1439                              <1> %macro prthex32 1
  1440                              <1> 	prthex32 cs, %1
  1441                              <1> %endmacro
  1442                              <1> 
  1443                              <1> %macro iprthex32 1
  1444                              <1> 	iprthex32 cs, %1
  1445                              <1> %endmacro
  1446                              <1> 
  1447                              <1> %macro prthex32 2
  1448                              <1> 	mov ax,%1
  1449                              <1> 	mov ds,ax
  1450                              <1> 	mov word ax,[%2+2]
  1451                              <1> 	prthex16 ax	
  1452                              <1> 	mov ax,%1
  1453                              <1> 	mov ds,ax
  1454                              <1> 	mov word ax,[%2]
  1455                              <1> 	prthex16 ax
  1456                              <1> %endmacro
  1457                              <1> 
  1458                              <1> %macro iprthex32 2
  1459                              <1> 	mov ax,%1
  1460                              <1> 	mov ds,ax
  1461                              <1> 	mov word ax,[%2+2]
  1462                              <1> 	mov word bx,ax
  1463                              <1> 	and ax,0x7FFF
  1464                              <1> 	push ax
  1465                              <1> 	and bx,0x8000
  1466                              <1> 	cmp bx,0
  1467                              <1> 	jz %%prt
  1468                              <1> 		prtch '-'		
  1469                              <1> 	%%prt:	
  1470                              <1> 	pop ax
  1471                              <1> 	prthex16 ax
  1472                              <1> 	mov ax,%1
  1473                              <1> 	mov ds,ax
  1474                              <1> 	mov word ax,[%2]
  1475                              <1> 	prthex16 ax	
  1476                              <1> %endmacro
  1477                              <1> 
  1478                              <1> %macro prtsubbin8 3
  1479                              <1> 	__prtsubbin8 %1,%2,%3
  1480                              <1> %endmacro
  1481                              <1> 
  1482                              <1> %macro prtbin16 1
  1483                              <1> 	stkopen 3
  1484                              <1> 	mov word [bp], %1
  1485                              <1> 	mov byte [bp+2], TRUE
  1486                              <1> 	call proc_prtbin16
  1487                              <1> 	stkclose 3
  1488                              <1> %endmacro
  1489                              <1> 
  1490                              <1> %macro prtbin8 1
  1491                              <1> 	stkopen 2
  1492                              <1> 	mov byte [bp], %1
  1493                              <1> 	mov byte [bp+1], TRUE
  1494                              <1> 	call proc_prtbin8
  1495                              <1> 	stkclose 2
  1496                              <1> %endmacro
  1497                              <1> 
  1498                              <1> %macro prthex16 1
  1499                              <1> 	stkopen 3
  1500                              <1> 	mov word [bp], %1
  1501                              <1> 	mov byte [bp+2], TRUE
  1502                              <1> 	call proc_prthex16
  1503                              <1> 	stkclose 3
  1504                              <1> %endmacro
  1505                              <1> 
  1506                              <1> %macro prthex8 1
  1507                              <1> 	stkopen 2
  1508                              <1> 	mov byte [bp], %1
  1509                              <1> 	mov byte [bp+1], TRUE
  1510                              <1> 	call proc_prthex8
  1511                              <1> 	stkclose 2
  1512                              <1> %endmacro
  1513                              <1> 
  1514                              <1> %macro prtch 1
  1515                              <1> 	__prtch %1
  1516                              <1> %endmacro
  1517                              <1> 
  1518                              <1> %macro prtln 0
  1519                              <1> 	__prtln
  1520                              <1> %endmacro	
  1521                              <1> 
  1522                              <1> 
  1523                              <1> %macro prtstk 0
  1524                              <1> 	printf "stack ---> "
  1525                              <1> 	mov ax,sp
  1526                              <1> 	prthex16 ax
  1527                              <1> %endmacro  
  1528                              <1> 
  1529                              <1> %endif
  1530                                  %include "lib/math.mac"
  1531                              <1> 
  1532                              <1> %ifndef MATH_MAC
  1533                              <1> 	%define MATH_MAC
  1534                              <1> 	
  1535                              <1> 	%include "lib/math.asm"
  1536                              <2> 
  1537                              <2> %ifndef MATH_ASM
  1538                              <2> 	%define MATH_ASM
  1539                              <2> 
  1540                              <2> %macro __int16to32 3
  1541                              <2> 	stkopen 0x06
  1542                              <2> 	mov word [bp+0],%1
  1543                              <2> 	call proc_int16to32
  1544                              <2> 	push sp
  1545                              <2> 	pop bp
  1546                              <2> 	mov word %2, [bp+2]
  1547                              <2> 	mov word %3, [bp+4]
  1548                              <2> 	stkclose 0x06
  1549                              <2> %endmacro
  1550                              <2> 
  1551                              <2> %macro __int32to16 3
  1552                              <2> 	stkopen 0x06
  1553                              <2> 	mov word [bp+0], %1
  1554                              <2> 	mov word [bp+2], %2
  1555                              <2> 	call proc_int32to16
  1556                              <2> 	push sp
  1557                              <2> 	pop bp
  1558                              <2> 	mov word %3, [bp+4]
  1559                              <2> 	stkclose 0x06
  1560                              <2> %endmacro
  1561                              <2> 
  1562                              <2> %macro __add32 6
  1563                              <2> 	stkopen 0x0C
  1564                              <2> 	mov word [bp+0], %1
  1565                              <2> 	mov word [bp+2], %2
  1566                              <2> 	mov word [bp+4], %3
  1567                              <2> 	mov word [bp+6], %4	
  1568                              <2> 	call proc_add32
  1569                              <2> 	push sp
  1570                              <2> 	pop bp
  1571                              <2> 	mov word %5, [bp+8]
  1572                              <2> 	mov word %6, [bp+0x0A]
  1573                              <2> 	stkclose 0x0C
  1574                              <2> %endmacro
  1575                              <2> 
  1576                              <2> %macro __sub32 6
  1577                              <2> 	stkopen 0x0C
  1578                              <2> 	mov word [bp+0], %1
  1579                              <2> 	mov word [bp+2], %2
  1580                              <2> 	mov word [bp+4], %3
  1581                              <2> 	mov word [bp+6], %4	
  1582                              <2> 	call proc_sub32
  1583                              <2> 	push sp
  1584                              <2> 	pop bp
  1585                              <2> 	mov word %5, [bp+8]
  1586                              <2> 	mov word %6, [bp+0x0A]
  1587                              <2> 	stkclose 0x0C
  1588                              <2> %endmacro
  1589                              <2> 
  1590                              <2> %macro __mul32 6
  1591                              <2> 	stkopen 0x0C
  1592                              <2> 	mov word [bp+0], %1
  1593                              <2> 	mov word [bp+2], %2
  1594                              <2> 	mov word [bp+4], %3
  1595                              <2> 	mov word [bp+6], %4	
  1596                              <2> 	call proc_mul32
  1597                              <2> 	push sp
  1598                              <2> 	pop bp
  1599                              <2> 	mov word %5, [bp+8]
  1600                              <2> 	mov word %6, [bp+0x0A]
  1601                              <2> 	stkclose 0x0C
  1602                              <2> %endmacro
  1603                              <2> 
  1604                              <2> %macro __div32 9
  1605                              <2> 	stkopen 0x11
  1606                              <2> 	mov word [bp+0], %1
  1607                              <2> 	mov word [bp+2], %2
  1608                              <2> 	mov word [bp+4], %3
  1609                              <2> 	mov word [bp+6], %4
  1610                              <2> 	mov word [bp+8], %5
  1611                              <2> 	mov word [bp+0x0A], %6	
  1612                              <2> 	call proc_div32
  1613                              <2> 	push sp
  1614                              <2> 	pop bp
  1615                              <2> 	mov word %7, [bp+0x0C]
  1616                              <2> 	mov word %8, [bp+0x0E]
  1617                              <2> 	mov byte %9, [bp+0x10]
  1618                              <2> 	stkclose 0x11
  1619                              <2> %endmacro
  1620                              <2> 
  1621                              <2> %macro __cmp32 5
  1622                              <2> 	stkopen 9
  1623                              <2> 	mov word [bp+0], %1
  1624                              <2> 	mov word [bp+2], %2
  1625                              <2> 	mov word [bp+4], %3
  1626                              <2> 	mov word [bp+6], %4
  1627                              <2> 	call proc_cmp32
  1628                              <2> 	push sp
  1629                              <2> 	pop bp
  1630                              <2> 	mov byte %5, [bp+8]
  1631                              <2> 	stkclose 9	
  1632                              <2> %endmacro
  1633                              <2> 
  1634                              <2> %macro __shl32 3
  1635                              <2> 	stkopen 5
  1636                              <2> 	mov word [bp+0], %1
  1637                              <2> 	mov word [bp+2], %2
  1638                              <2> 	mov byte [bp+4], %3
  1639                              <2> 	call proc_shl32
  1640                              <2> 	push sp
  1641                              <2> 	pop bp
  1642                              <2> 	mov word %1, [bp+0]
  1643                              <2> 	mov word %2, [bp+2]
  1644                              <2> 	stkclose 5
  1645                              <2> %endmacro
  1646                              <2> 
  1647                              <2> %macro __shr32 3
  1648                              <2> 	stkopen 5
  1649                              <2> 	mov word [bp+0], %1
  1650                              <2> 	mov word [bp+2], %2
  1651                              <2> 	mov byte [bp+4], %3
  1652                              <2> 	call proc_shr32
  1653                              <2> 	push sp
  1654                              <2> 	pop bp
  1655                              <2> 	mov word %1, [bp+0]
  1656                              <2> 	mov word %2, [bp+2]
  1657                              <2> 	stkclose 5
  1658                              <2> %endmacro
  1659                              <2> 
  1660                              <2> %macro __lzcount32 3	
  1661                              <2> 	push %2		
  1662                              <2> 	__lzcount16 %1, cl	
  1663                              <2> 	pop ax
  1664                              <2> 	cmp cl,4
  1665                              <2> 	jb .end
  1666                              <2> 		push cx		
  1667                              <2> 		__lzcount16 ax, al		
  1668                              <2> 		pop cx
  1669                              <2> 		add cl,al
  1670                              <2> 	.end:	
  1671                              <2> 	mov byte %3, cl 
  1672                              <2> %endmacro
  1673                              <2> 
  1674                              <2> %macro __lzcount16 2
  1675                              <2> 	stkopen 3
  1676                              <2> 	mov word [bp+0], %1
  1677                              <2> 	call proc__lzcount16
  1678                              <2> 	push sp
  1679                              <2> 	pop bp
  1680                              <2> 	mov byte %2, [bp+2]	
  1681                              <2> 	stkclose 3
  1682                              <2> %endmacro
  1683                              <2> 
  1684                              <2> %macro __lzbitcount32 3	
  1685                              <2> 	push %2		
  1686                              <2> 	__lzbitcount16 %1, cl
  1687                              <2> 	pop ax
  1688                              <2> 	cmp cl,16
  1689                              <2> 	jb .end
  1690                              <2> 		push cx		
  1691                              <2> 		__lzbitcount16 ax, al		
  1692                              <2> 		pop cx
  1693                              <2> 		add cl,al
  1694                              <2> 	.end:	
  1695                              <2> 	mov byte %3, cl 
  1696                              <2> %endmacro
  1697                              <2> 		
  1698                              <2> %macro __lzbitcount16 2
  1699                              <2> 	stkopen 3
  1700                              <2> 	mov word [bp+0], %1
  1701                              <2> 	call proc__lzbitcount16
  1702                              <2> 	push sp
  1703                              <2> 	pop bp
  1704                              <2> 	mov byte %2, [bp+2]	
  1705                              <2> 	stkclose 3
  1706                              <2> %endmacro	
  1707                              <2> 
  1708                              <2> %macro __calc_dividendo1 7
  1709                              <2> 	stkopen 0x0D
  1710                              <2> 	mov word [bp+0], %1
  1711                              <2> 	mov word [bp+2], %2
  1712                              <2> 	mov word [bp+4], %3
  1713                              <2> 	mov word [bp+6], %4
  1714                              <2> 	call proc_calc_dividendo1
  1715                              <2> 	push sp
  1716                              <2> 	pop bp
  1717                              <2> 	mov word %5, [bp+0x08]
  1718                              <2> 	mov word %6, [bp+0x0A]
  1719                              <2> 	mov byte %7, [bp+0x0C]
  1720                              <2> 	stkclose 0x0D
  1721                              <2> %endmacro
  1722                              <2> 
  1723                              <2> %macro __calc__prox_dividendo 5
  1724                              <2> 	stkopen 9
  1725                              <2> 	mov word [bp+0], %1
  1726                              <2> 	mov word [bp+2], %2
  1727                              <2> 	mov word [bp+4], %3
  1728                              <2> 	mov word [bp+6], %4
  1729                              <2> 	mov word [bp+8], %5
  1730                              <2> 	call proc_calc_prox_dividendo
  1731                              <2> 	push sp
  1732                              <2> 	pop bp
  1733                              <2> 	mov word %3, [bp+4]
  1734                              <2> 	mov word %4, [bp+6]
  1735                              <2> 	mov byte %5, [bp+8]
  1736                              <2> 	stkclose 9
  1737                              <2> %endmacro
  1738                              <2> 				
  1739                              <2> section .data
  1740                              <2> 
  1741                              <2> proc_int16to32:
  1742 0000046B 89E0                <2> 	mov ax,sp
  1743 0000046D 89C5                <2> 	mov bp,ax
  1744                              <2> 	
  1745 0000046F 8B4602              <2> 	mov ax,[bp+2]			
  1746 00000472 89C3                <2> 	mov bx,ax
  1747 00000474 250080              <2> 	and ax,0x8000
  1748 00000477 83F800              <2> 	cmp ax,0
  1749 0000047A 7402                <2> 	jz .zero
  1750 0000047C EB08                <2> 	jmp .one
  1751                              <2> 	.zero:
  1752 0000047E 81E3FF7F            <2> 		and bx,0x7FFF
  1753 00000482 89DA                <2> 		mov dx,bx			
  1754 00000484 EB06                <2> 		jmp .endcmp
  1755                              <2> 	.one:				
  1756 00000486 BAFFFF              <2> 		mov dx,0xFFFF
  1757 00000489 29DA                <2> 		sub dx,bx
  1758 0000048B 42                  <2> 		inc dx
  1759                              <2> 	.endcmp:
  1760 0000048C 894604              <2> 	mov [bp+4],ax
  1761 0000048F 895606              <2> 	mov [bp+6],dx
  1762                              <2> 	
  1763 00000492 C3                  <2> 	ret
  1764                              <2> 	
  1765                              <2> proc_int32to16:
  1766 00000493 89E0                <2> 	mov ax,sp
  1767 00000495 89C5                <2> 	mov bp,ax
  1768                              <2> 	
  1769 00000497 8B4602              <2> 	mov ax,[bp+2]
  1770 0000049A 8B5E04              <2> 	mov bx,[bp+4]		
  1771 0000049D 250080              <2> 	and ax,0x8000
  1772 000004A0 81E3FF7F            <2> 	and bx,0x7FFF	
  1773 000004A4 83F800              <2> 	cmp ax,0
  1774 000004A7 7402                <2> 	jz .zero
  1775 000004A9 EB04                <2> 	jmp .one
  1776                              <2> 	.zero:		
  1777 000004AB 01D8                <2> 		add ax,bx
  1778 000004AD EB05                <2> 		jmp .endcmp
  1779                              <2> 	.one:		
  1780 000004AF B8FFFF              <2> 		mov ax,0xFFFF
  1781 000004B2 29D8                <2> 		sub ax,bx
  1782                              <2> 	.endcmp:	
  1783 000004B4 894606              <2> 	mov word [bp+6], ax	
  1784                              <2> 	
  1785 000004B7 C3                  <2> 	ret
  1786                              <2> 
  1787                              <2> proc_setsig:
  1788 000004B8 89E0                <2> 	mov ax,sp
  1789 000004BA 89C5                <2> 	mov bp,ax
  1790                              <2> 	
  1791 000004BC 816602FF7F          <2> 	and word [bp+2],0x7FFF
  1792 000004C1 8146020080          <2> 	add word [bp+2],0x8000	
  1793                              <2> 	
  1794 000004C6 C3                  <2> 	ret
  1795                              <2> 	
  1796                              <2> proc_clrsig:
  1797 000004C7 89E0                <2> 	mov ax,sp
  1798 000004C9 89C5                <2> 	mov bp,ax
  1799                              <2> 	
  1800 000004CB 816602FF7F          <2> 	and word [bp+2],0x7FFF
  1801                              <2> 
  1802 000004D0 C3                  <2> 	ret
  1803                              <2> 
  1804                              <2> proc_idiv32:
  1805                              <2> 	stkopen 0x11
  1806 000004D1 83EC11              <3>  sub word sp, %1
  1807 000004D4 54                  <3>  push sp
  1808 000004D5 5D                  <3>  pop bp
  1809 000004D6 8B4613              <2> 	mov ax,[bp+0x13]
  1810 000004D9 25FF7F              <2> 	and ax,0x7FFF
  1811 000004DC 894600              <2> 	mov [bp+0],ax
  1812 000004DF 8B4615              <2> 	mov ax,[bp+0x15]
  1813 000004E2 894602              <2> 	mov [bp+2],ax
  1814 000004E5 8B4617              <2> 	mov ax,[bp+0x17]
  1815 000004E8 25FF7F              <2> 	and ax,0x7FFF
  1816 000004EB 894604              <2> 	mov [bp+4],ax
  1817 000004EE 8B4619              <2> 	mov ax,[bp+0x19]
  1818 000004F1 894606              <2> 	mov [bp+6],ax 
  1819 000004F4 E8B300              <2> 	call proc_div32
  1820 000004F7 89E0                <2> 	mov ax,sp
  1821 000004F9 89C5                <2> 	mov bp,ax
  1822 000004FB 8B4608              <2> 	mov ax,[bp+8]
  1823 000004FE 89461B              <2> 	mov [bp+0x1B], ax
  1824 00000501 8B460A              <2> 	mov ax,[bp+0x0A]
  1825 00000504 89461D              <2> 	mov [bp+0x1D], ax
  1826 00000507 8B460C              <2> 	mov ax,[bp+0x0C]
  1827 0000050A 89461F              <2> 	mov [bp+0x1F], ax
  1828 0000050D 8B460E              <2> 	mov ax,[bp+0x0E]
  1829 00000510 894621              <2> 	mov [bp+0x21], ax
  1830 00000513 8A4610              <2> 	mov al,[bp+0x10]
  1831 00000516 884623              <2> 	mov byte [bp+0x23], al
  1832                              <2> 	stkclose 0x11
  1833 00000519 83C411              <3>  add word sp, %1
  1834                              <2> 	
  1835 0000051C 54                  <2> 	push sp
  1836 0000051D 5D                  <2> 	pop bp
  1837                              <2> 		
  1838 0000051E 8B4E02              <2> 	mov cx,[bp+2]
  1839 00000521 8B5606              <2> 	mov dx,[bp+6]
  1840 00000524 81E10080            <2> 	and cx,0x8000
  1841 00000528 81E20080            <2> 	and dx,0x8000
  1842 0000052C 31D1                <2> 	xor cx,dx
  1843                              <2> 	
  1844 0000052E 837E0A00            <2> 	cmp word [bp+0x0A],0
  1845 00000532 7506                <2> 	jnz .signal1
  1846 00000534 837E0C00            <2> 	cmp word [bp+0x0C],0
  1847 00000538 7403                <2> 	jz .endsignal1
  1848                              <2> 	.signal1:
  1849 0000053A 014E0A              <2> 		add word [bp+0x0A],cx
  1850                              <2> 	.endsignal1:
  1851                              <2> 	
  1852 0000053D 837E0E00            <2> 	cmp word [bp+0x0E],0
  1853 00000541 7506                <2> 	jnz .signal2
  1854 00000543 837E1000            <2> 	cmp word [bp+0x10],0
  1855 00000547 7403                <2> 	jz .endsignal2
  1856                              <2> 	.signal2:
  1857 00000549 014E0E              <2> 		add word [bp+0x0E],cx	
  1858                              <2> 	.endsignal2:
  1859                              <2> 		
  1860 0000054C C3                  <2> 	ret	
  1861                              <2> 
  1862                              <2> proc_imul32:		
  1863                              <2> 	stkopen 0x0C
  1864 0000054D 83EC0C              <3>  sub word sp, %1
  1865 00000550 54                  <3>  push sp
  1866 00000551 5D                  <3>  pop bp
  1867 00000552 8B460E              <2> 	mov ax,[bp+0x0E]
  1868 00000555 25FF7F              <2> 	and ax,0x7FFF
  1869 00000558 894600              <2> 	mov [bp+0],ax
  1870 0000055B 8B4610              <2> 	mov ax,[bp+0x10]
  1871 0000055E 894602              <2> 	mov [bp+2],ax
  1872 00000561 8B4612              <2> 	mov ax,[bp+0x12]
  1873 00000564 25FF7F              <2> 	and ax,0x7FFF
  1874 00000567 894604              <2> 	mov [bp+4],ax
  1875 0000056A 8B4614              <2> 	mov ax,[bp+0x14]
  1876 0000056D 894606              <2> 	mov [bp+6],ax 
  1877 00000570 E8B901              <2> 	call proc_mul32
  1878 00000573 89E0                <2> 	mov ax,sp
  1879 00000575 89C5                <2> 	mov bp,ax
  1880 00000577 8B4608              <2> 	mov ax,[bp+8]
  1881 0000057A 8B5E0A              <2> 	mov bx,[bp+0x0A]
  1882                              <2> 	stkclose 0x0C
  1883 0000057D 83C40C              <3>  add word sp, %1
  1884                              <2> 	
  1885 00000580 89E1                <2> 	mov cx,sp
  1886 00000582 89CD                <2> 	mov bp,cx		
  1887                              <2> 		
  1888 00000584 89460A              <2> 	mov [bp+0x0A],ax
  1889 00000587 895E0C              <2> 	mov [bp+0x0C],bx
  1890                              <2> 	
  1891 0000058A 837E0A00            <2> 	cmp word [bp+0x0A],0
  1892 0000058E 7506                <2> 	jnz .signal1
  1893 00000590 837E0C00            <2> 	cmp word [bp+0x0C],0
  1894 00000594 7413                <2> 	jz .endsignal1
  1895                              <2> 	.signal1:
  1896 00000596 8B4E02              <2> 		mov cx,[bp+2]
  1897 00000599 8B5606              <2> 		mov dx,[bp+6]
  1898 0000059C 81E10080            <2> 		and cx,0x8000
  1899 000005A0 81E20080            <2> 		and dx,0x8000
  1900 000005A4 31D1                <2> 		xor cx,dx
  1901 000005A6 014E0A              <2> 		add word [bp+0x0A],cx
  1902                              <2> 	.endsignal1:
  1903                              <2> 	
  1904 000005A9 C3                  <2> 	ret
  1905                              <2> 
  1906                              <2> proc_div32:
  1907 000005AA 89E0                <2> 	mov ax,sp
  1908 000005AC 89C5                <2> 	mov bp,ax
  1909                              <2> 	
  1910 000005AE 8B4606              <2> 	mov ax,[bp+6]
  1911 000005B1 034608              <2> 	add ax,[bp+8]
  1912 000005B4 83F800              <2> 	cmp ax,0
  1913 000005B7 0F846C01            <2> 	jz .divbyzero
  1914                              <2> 	
  1915 000005BB 837E0200            <2> 	cmp word [bp+2], 0
  1916 000005BF 7521                <2> 	jnz .div2
  1917 000005C1 837E0600            <2> 	cmp word [bp+6], 0
  1918 000005C5 751B                <2> 	jnz .div2
  1919 000005C7 31D2                <2> 		xor dx,dx
  1920 000005C9 8B4604              <2> 		mov ax, [bp+4]
  1921 000005CC F77608              <2> 		div word [bp+8]
  1922 000005CF C7460A0000          <2> 		mov word [bp+0x0A], 0
  1923 000005D4 89460C              <2> 		mov word [bp+0x0C], ax
  1924 000005D7 C7460E0000          <2> 		mov word [bp+0x0E], 0
  1925 000005DC 895610              <2> 		mov word [bp+0x10], dx
  1926 000005DF E93F01              <2> 		jmp .enddiv
  1927                              <2> 	.div2:
  1928 000005E2 8B4602              <2> 		mov ax,[bp+2]
  1929 000005E5 3B4606              <2> 		cmp ax,[bp+6]
  1930 000005E8 0F821F01            <2> 		jb .qzero
  1931 000005EC 770A                <2> 		ja .div
  1932 000005EE 8B4604              <2> 		mov ax,[bp+4]
  1933 000005F1 3B4608              <2> 		cmp ax,[bp+8]
  1934 000005F4 0F821301            <2> 		jb .qzero
  1935                              <2> 		
  1936                              <2> 		.div:
  1937                              <2> 		
  1938 000005F8 C7460A0000          <2> 		mov word [bp+0x0A], 0
  1939 000005FD C7460C0000          <2> 		mov word [bp+0x0C], 0		
  1940 00000602 C7460E0000          <2> 		mov word [bp+0x0E], 0
  1941 00000607 C746100000          <2> 		mov word [bp+0x10], 0
  1942                              <2> 		
  1943 0000060C 8B4602              <2> 		mov ax,[bp+2]
  1944 0000060F 8B5E04              <2> 		mov bx,[bp+4]
  1945 00000612 8B4E06              <2> 		mov cx,[bp+6]
  1946 00000615 8B5608              <2> 		mov dx,[bp+8]		
  1947                              <2> 		__calc_dividendo1 ax, bx, cx, dx, ax, bx, cl
  1948                              <3>  stkopen 0x0D
  1949 00000618 83EC0D              <4>  sub word sp, %1
  1950 0000061B 54                  <4>  push sp
  1951 0000061C 5D                  <4>  pop bp
  1952 0000061D 894600              <3>  mov word [bp+0], %1
  1953 00000620 895E02              <3>  mov word [bp+2], %2
  1954 00000623 894E04              <3>  mov word [bp+4], %3
  1955 00000626 895606              <3>  mov word [bp+6], %4
  1956 00000629 E89A02              <3>  call proc_calc_dividendo1
  1957 0000062C 54                  <3>  push sp
  1958 0000062D 5D                  <3>  pop bp
  1959 0000062E 8B4608              <3>  mov word %5, [bp+0x08]
  1960 00000631 8B5E0A              <3>  mov word %6, [bp+0x0A]
  1961 00000634 8A4E0C              <3>  mov byte %7, [bp+0x0C]
  1962                              <3>  stkclose 0x0D
  1963 00000637 83C40D              <4>  add word sp, %1
  1964                              <2> 
  1965 0000063A 89E2                <2> 		mov dx,sp
  1966 0000063C 89D5                <2> 		mov bp,dx
  1967 0000063E 89460E              <2> 		mov word [bp+0x0E], ax
  1968 00000641 895E10              <2> 		mov word [bp+0x10], bx
  1969                              <2> 		
  1970 00000644 51                  <2> 		push cx
  1971                              <2> 		.l1:							
  1972 00000645 89E2                <2> 			mov dx,sp
  1973 00000647 89D5                <2> 			mov bp,dx		
  1974 00000649 83C502              <2> 			add bp,2
  1975 0000064C 8B460E              <2> 			mov ax, [bp+0x0E]
  1976 0000064F 8B5E10              <2> 			mov bx, [bp+0x10]
  1977 00000652 8B4E06              <2> 			mov cx, [bp+6]
  1978 00000655 8B5608              <2> 			mov dx, [bp+8]
  1979                              <2> 			__cmp32 ax, bx, cx, dx, cl
  1980                              <3>  stkopen 9
  1981 00000658 83EC09              <4>  sub word sp, %1
  1982 0000065B 54                  <4>  push sp
  1983 0000065C 5D                  <4>  pop bp
  1984 0000065D 894600              <3>  mov word [bp+0], %1
  1985 00000660 895E02              <3>  mov word [bp+2], %2
  1986 00000663 894E04              <3>  mov word [bp+4], %3
  1987 00000666 895606              <3>  mov word [bp+6], %4
  1988 00000669 E81F01              <3>  call proc_cmp32
  1989 0000066C 54                  <3>  push sp
  1990 0000066D 5D                  <3>  pop bp
  1991 0000066E 8A4E08              <3>  mov byte %5, [bp+8]
  1992                              <3>  stkclose 9
  1993 00000671 83C409              <4>  add word sp, %1
  1994                              <2> 			
  1995 00000674 51                  <2> 			push cx
  1996 00000675 89E2                <2> 			mov dx,sp
  1997 00000677 89D5                <2> 			mov bp,dx
  1998 00000679 83C504              <2> 			add bp,4
  1999 0000067C 8B460A              <2> 			mov ax,[bp+0x0A]
  2000 0000067F 8B5E0C              <2> 			mov bx,[bp+0x0C]
  2001 00000682 55                  <2> 			push bp
  2002                              <2> 			__shl32 ax, bx, 1
  2003                              <3>  stkopen 5
  2004 00000683 83EC05              <4>  sub word sp, %1
  2005 00000686 54                  <4>  push sp
  2006 00000687 5D                  <4>  pop bp
  2007 00000688 894600              <3>  mov word [bp+0], %1
  2008 0000068B 895E02              <3>  mov word [bp+2], %2
  2009 0000068E C6460401            <3>  mov byte [bp+4], %3
  2010 00000692 E82101              <3>  call proc_shl32
  2011 00000695 54                  <3>  push sp
  2012 00000696 5D                  <3>  pop bp
  2013 00000697 8B4600              <3>  mov word %1, [bp+0]
  2014 0000069A 8B5E02              <3>  mov word %2, [bp+2]
  2015                              <3>  stkclose 5
  2016 0000069D 83C405              <4>  add word sp, %1
  2017 000006A0 5D                  <2> 			pop bp				
  2018 000006A1 59                  <2> 			pop cx	
  2019                              <2> 									
  2020 000006A2 80F900              <2> 			cmp cl,0
  2021 000006A5 7C12                <2> 			jl .l11
  2022 000006A7 83C301              <2> 				add bx,1
  2023 000006AA 83D000              <2> 				adc ax,0	
  2024                              <2> 				
  2025 000006AD 8B4E06              <2> 				mov cx,[bp+6]
  2026 000006B0 8B5608              <2> 				mov dx,[bp+8]
  2027 000006B3 295610              <2> 				sub [bp+0x10],dx
  2028 000006B6 194E0E              <2> 				sbb [bp+0x0E],cx							
  2029                              <2> 			.l11:							
  2030 000006B9 89460A              <2> 			mov word [bp+0x0A], ax
  2031 000006BC 895E0C              <2> 			mov word [bp+0x0C], bx					
  2032                              <2> 					
  2033 000006BF 59                  <2> 			pop cx
  2034 000006C0 51                  <2> 			push cx												
  2035                              <2> 			
  2036 000006C1 80F920              <2> 			cmp cl,32
  2037 000006C4 7342                <2> 			jae .l2
  2038                              <2> 						
  2039 000006C6 59                  <2> 			pop cx
  2040                              <2> 			stkopen 9
  2041 000006C7 83EC09              <3>  sub word sp, %1
  2042 000006CA 54                  <3>  push sp
  2043 000006CB 5D                  <3>  pop bp
  2044 000006CC 8B460B              <2> 			mov ax,[bp+0x0B]
  2045 000006CF 894600              <2> 			mov word [bp+0], ax
  2046 000006D2 8B460D              <2> 			mov ax,[bp+0x0D]
  2047 000006D5 894602              <2> 			mov word [bp+2], ax
  2048 000006D8 8B4617              <2> 			mov ax,[bp+0x17]
  2049 000006DB 894604              <2> 			mov word [bp+4], ax
  2050 000006DE 8B4619              <2> 			mov ax,[bp+0x19]
  2051 000006E1 894606              <2> 			mov word [bp+6], ax
  2052 000006E4 884E08              <2> 			mov byte [bp+8], cl
  2053 000006E7 E8AD02              <2> 			call proc_calc_prox_dividendo
  2054 000006EA 89E0                <2> 			mov ax,sp
  2055 000006EC 89C5                <2> 			mov bp,ax
  2056 000006EE 8B4604              <2> 			mov word ax,[bp+4]
  2057 000006F1 8B5E06              <2> 			mov word bx,[bp+6]
  2058 000006F4 8A4E08              <2> 			mov byte cl,[bp+8] 
  2059                              <2> 			stkclose 9
  2060 000006F7 83C409              <3>  add word sp, %1
  2061 000006FA 89E2                <2> 			mov dx,sp
  2062 000006FC 89D5                <2> 			mov bp,dx
  2063 000006FE 89460E              <2> 			mov [bp+0x0E],ax
  2064 00000701 895E10              <2> 			mov [bp+0x10],bx
  2065 00000704 51                  <2> 			push cx
  2066 00000705 E93DFF              <2> 			jmp .l1
  2067                              <2> 		.l2:	
  2068 00000708 59                  <2> 		pop cx
  2069                              <2> 			
  2070 00000709 EB16                <2> 		jmp .enddiv
  2071                              <2> 	.qzero:
  2072 0000070B C7460A0000          <2> 		mov word [bp+0x0A], 0
  2073 00000710 C7460C0000          <2> 		mov word [bp+0x0C], 0
  2074 00000715 8B4602              <2> 		mov ax,[bp+2]
  2075 00000718 89460E              <2> 		mov word [bp+0x0E], ax
  2076 0000071B 8B4604              <2> 		mov ax,[bp+4]
  2077 0000071E 894610              <2> 		mov word [bp+0x10], ax	
  2078                              <2> 	.enddiv:
  2079 00000721 C6461200            <2> 		mov byte [bp+0x12], 0
  2080 00000725 EB04                <2> 		jmp .end
  2081                              <2> 	.divbyzero:
  2082 00000727 C6461201            <2> 		mov byte [bp+0x12], 1						
  2083                              <2> 	.end:		
  2084                              <2> 			
  2085 0000072B C3                  <2> 	ret
  2086                              <2> 		
  2087                              <2> proc_mul32:
  2088 0000072C 89E0                <2> 	mov ax,sp
  2089 0000072E 89C5                <2> 	mov bp,ax
  2090                              <2> 	
  2091 00000730 31D2                <2> 	xor dx,dx
  2092 00000732 8B4604              <2> 	mov ax,[bp+4]
  2093 00000735 F76608              <2> 	mul word [bp+8]
  2094                              <2> 	
  2095 00000738 89560A              <2> 	mov word [bp+0x0A], dx
  2096 0000073B 89460C              <2> 	mov word [bp+0x0C], ax	
  2097                              <2> 	
  2098 0000073E 31D2                <2> 	xor dx,dx
  2099 00000740 8B4604              <2> 	mov ax,[bp+4]
  2100 00000743 F76606              <2> 	mul word [bp+6]
  2101                              <2> 		
  2102 00000746 01460A              <2> 	add word [bp+0x0A],ax
  2103                              <2> 	
  2104 00000749 31D2                <2> 	xor dx,dx
  2105 0000074B 8B4602              <2> 	mov ax,[bp+2]
  2106 0000074E F76608              <2> 	mul word [bp+8]
  2107                              <2> 	
  2108 00000751 01460A              <2> 	add word [bp+0x0A],ax
  2109                              <2> 	
  2110 00000754 C3                  <2> 	ret
  2111                              <2> 
  2112                              <2> proc_add32:
  2113 00000755 89E0                <2> 	mov ax,sp
  2114 00000757 89C5                <2> 	mov bp,ax
  2115                              <2> 	
  2116 00000759 8B4602              <2> 	mov ax,[bp+2]
  2117 0000075C 8B5E04              <2> 	mov bx,[bp+4]
  2118 0000075F 8B4E06              <2> 	mov cx,[bp+6]
  2119 00000762 8B5608              <2> 	mov dx,[bp+8]
  2120                              <2> 	
  2121 00000765 01D3                <2> 	add bx,dx
  2122 00000767 11C8                <2> 	adc ax,cx
  2123                              <2> 	
  2124 00000769 89460A              <2> 	mov [bp+0x0A],ax
  2125 0000076C 895E0C              <2> 	mov [bp+0x0C],bx	
  2126                              <2> 	
  2127 0000076F C3                  <2> 	ret
  2128                              <2> 	
  2129                              <2> proc_sub32:
  2130 00000770 89E0                <2> 	mov ax,sp
  2131 00000772 89C5                <2> 	mov bp,ax
  2132                              <2> 	
  2133 00000774 8B4602              <2> 	mov ax,[bp+2]
  2134 00000777 8B5E04              <2> 	mov bx,[bp+4]
  2135 0000077A 8B4E06              <2> 	mov cx,[bp+6]
  2136 0000077D 8B5608              <2> 	mov dx,[bp+8]
  2137                              <2> 	
  2138 00000780 29D3                <2> 	sub bx,dx
  2139 00000782 19C8                <2> 	sbb ax,cx
  2140                              <2> 	
  2141 00000784 89460A              <2> 	mov [bp+0x0A],ax
  2142 00000787 895E0C              <2> 	mov [bp+0x0C],bx	
  2143                              <2> 	
  2144 0000078A C3                  <2> 	ret
  2145                              <2> 		
  2146                              <2> proc_cmp32:
  2147 0000078B 89E0                <2> 	mov ax,sp
  2148 0000078D 89C5                <2> 	mov bp,ax		
  2149                              <2> 		
  2150 0000078F 8B4602              <2> 	mov ax,[bp+2]
  2151 00000792 3B4606              <2> 	cmp word ax,[bp+6]
  2152 00000795 7F04                <2> 	jg .above
  2153 00000797 7C08                <2> 	jl .below
  2154 00000799 740C                <2> 	je .equal
  2155                              <2> 	.above:
  2156 0000079B C6460A01            <2> 		mov byte [bp+0x0A], 00000001b
  2157 0000079F EB14                <2> 		jmp .endcmp
  2158                              <2> 	.below:
  2159 000007A1 C6460A81            <2> 		mov byte [bp+0x0A], 10000001b
  2160 000007A5 EB0E                <2> 		jmp .endcmp
  2161                              <2> 	.equal:
  2162 000007A7 8B4604              <2> 		mov ax,[bp+4]
  2163 000007AA 3B4608              <2> 		cmp word ax,[bp+8]
  2164 000007AD 7FEC                <2> 		jg .above
  2165 000007AF 7CF0                <2> 		jl .below
  2166 000007B1 C6460A00            <2> 		mov byte [bp+0x0A], 00000000b
  2167                              <2> 	.endcmp:		
  2168 000007B5 C3                  <2> 	ret
  2169                              <2> 
  2170                              <2> proc_shl32:
  2171 000007B6 89E0                <2> 	mov ax,sp
  2172 000007B8 89C5                <2> 	mov bp,ax
  2173                              <2> 	
  2174 000007BA 31C0                <2> 	xor ax,ax
  2175 000007BC 8A4606              <2> 	mov byte al,[bp+6]
  2176 000007BF B310                <2> 	mov bl,10h
  2177 000007C1 F6F3                <2> 	div bl
  2178                              <2> 					
  2179 000007C3 3C01                <2> 	cmp al,1
  2180 000007C5 7204                <2> 	jb .zero
  2181 000007C7 7418                <2> 	je .one	
  2182 000007C9 EB27                <2> 	jmp .above
  2183                              <2> 	.zero:	
  2184 000007CB B110                <2> 		mov cl,10h
  2185 000007CD 28E1                <2> 		sub cl,ah
  2186 000007CF 8B5E04              <2> 		mov bx,[bp+4]		
  2187 000007D2 D3EB                <2> 		shr bx,cl
  2188                              <2> 		
  2189 000007D4 88E1                <2> 		mov cl,ah		
  2190 000007D6 D36602              <2> 		shl word [bp+2],cl
  2191 000007D9 015E02              <2> 		add word [bp+2],bx				
  2192 000007DC D36604              <2> 		shl word [bp+4],cl
  2193 000007DF EB1B                <2> 		jmp .endzo
  2194                              <2> 	.one:
  2195 000007E1 88E1                <2> 		mov cl,ah
  2196 000007E3 8B5E04              <2> 		mov bx, [bp+4]				
  2197 000007E6 D3E3                <2> 		shl bx, cl 
  2198 000007E8 895E02              <2> 		mov word [bp+2], bx
  2199 000007EB C746040000          <2> 		mov word [bp+4], 0
  2200 000007F0 EB0A                <2> 		jmp .endzo
  2201                              <2> 	.above:		
  2202 000007F2 C746020000          <2> 		mov word [bp+2], 0
  2203 000007F7 C746040000          <2> 		mov word [bp+4], 0
  2204                              <2> 	.endzo:	
  2205                              <2> 	
  2206 000007FC C3                  <2> 	ret
  2207                              <2> 	
  2208                              <2> proc_shr32:
  2209 000007FD 89E0                <2> 	mov ax,sp
  2210 000007FF 89C5                <2> 	mov bp,ax
  2211                              <2> 	
  2212 00000801 31C0                <2> 	xor ax,ax
  2213 00000803 8A4606              <2> 	mov byte al,[bp+6]
  2214 00000806 B310                <2> 	mov bl,10h
  2215 00000808 F6F3                <2> 	div bl
  2216                              <2> 					
  2217 0000080A 3C01                <2> 	cmp al,1
  2218 0000080C 7204                <2> 	jb .zero
  2219 0000080E 7418                <2> 	je .one	
  2220 00000810 EB27                <2> 	jmp .above
  2221                              <2> 	.zero:	
  2222 00000812 B110                <2> 		mov cl,10h
  2223 00000814 28E1                <2> 		sub cl,ah		
  2224 00000816 8B5E02              <2> 		mov bx,[bp+2]		
  2225 00000819 D3E3                <2> 		shl bx,cl
  2226                              <2> 		
  2227 0000081B 88E1                <2> 		mov cl,ah		
  2228 0000081D D36E02              <2> 		shr word [bp+2],cl
  2229 00000820 D36E04              <2> 		shr word [bp+4],cl
  2230 00000823 015E04              <2> 		add word [bp+4],bx	
  2231 00000826 EB1B                <2> 		jmp .endzo
  2232                              <2> 	.one:			
  2233 00000828 88E1                <2> 		mov cl,ah
  2234 0000082A 8B5E02              <2> 		mov bx,[bp+2]
  2235 0000082D D3EB                <2> 		shr bx,cl
  2236 0000082F C746020000          <2> 		mov word [bp+2],0 
  2237 00000834 895E04              <2> 		mov word [bp+4],bx
  2238 00000837 EB0A                <2> 		jmp .endzo
  2239                              <2> 	.above:		
  2240 00000839 C746020000          <2> 		mov word [bp+2],0
  2241 0000083E C746040000          <2> 		mov word [bp+4],0
  2242                              <2> 	.endzo:		
  2243                              <2> 
  2244 00000843 C3                  <2> 	ret
  2245                              <2> 	
  2246                              <2> proc__lzcount16:
  2247 00000844 89E0                <2> 	mov ax,sp
  2248 00000846 89C5                <2> 	mov bp,ax
  2249                              <2> 	
  2250 00000848 B100                <2> 	mov cl,0
  2251                              <2> 		
  2252 0000084A 8A6603              <2> 	mov ah, [bp+3]	
  2253 0000084D 80E4F0              <2> 	and ah,0xF0
  2254 00000850 80FC00              <2> 	cmp ah,0
  2255 00000853 7529                <2> 	jnz .end
  2256 00000855 FEC1                <2> 	inc cl
  2257                              <2> 	
  2258 00000857 8A6603              <2> 	mov ah, [bp+3]
  2259 0000085A 80E40F              <2> 	and ah,0x0F
  2260 0000085D 80FC00              <2> 	cmp ah,0
  2261 00000860 751C                <2> 	jnz .end
  2262 00000862 FEC1                <2> 	inc cl
  2263                              <2> 	
  2264 00000864 8A6602              <2> 	mov ah, [bp+2]
  2265 00000867 80E4F0              <2> 	and ah,0xF0
  2266 0000086A 80FC00              <2> 	cmp ah,0
  2267 0000086D 750F                <2> 	jnz .end
  2268 0000086F FEC1                <2> 	inc cl
  2269                              <2> 	
  2270 00000871 8A6602              <2> 	mov ah, [bp+2]
  2271 00000874 80E40F              <2> 	and ah,0x0F
  2272 00000877 80FC00              <2> 	cmp ah,0
  2273 0000087A 7502                <2> 	jnz .end
  2274 0000087C FEC1                <2> 	inc cl
  2275                              <2> 		
  2276                              <2> 	.end:
  2277 0000087E 884E04              <2> 	mov byte [bp+4], cl
  2278                              <2> 	
  2279 00000881 C3                  <2> 	ret
  2280                              <2> 
  2281                              <2> proc__lzbitcount16:
  2282 00000882 89E0                <2> 	mov ax,sp
  2283 00000884 89C5                <2> 	mov bp,ax
  2284                              <2> 	
  2285 00000886 8B4602              <2> 	mov word ax,[bp+2]
  2286                              <2> 		
  2287 00000889 B100                <2> 	mov cl,0
  2288                              <2> 	.l1:
  2289 0000088B 80F910              <2> 		cmp cl,16
  2290 0000088E 7310                <2> 		jae .l2
  2291                              <2> 		
  2292 00000890 89C3                <2> 		mov bx,ax
  2293 00000892 D3E3                <2> 		shl bx,cl
  2294 00000894 C1EB0F              <2> 		shr bx,15
  2295                              <2> 		
  2296 00000897 83FB00              <2> 		cmp bx,0
  2297 0000089A 7504                <2> 		jnz .l2
  2298                              <2> 		
  2299 0000089C FEC1                <2> 		inc cl		
  2300 0000089E EBEB                <2> 		jmp .l1
  2301                              <2> 	.l2:
  2302                              <2> 	
  2303 000008A0 884E04              <2> 	mov byte [bp+4], cl
  2304                              <2> 	
  2305 000008A3 C3                  <2> 	ret
  2306                              <2> 	
  2307                              <2> proc__lzbitcount8:
  2308 000008A4 89E0                <2> 	mov ax,sp
  2309 000008A6 89C5                <2> 	mov bp,ax
  2310                              <2> 	
  2311 000008A8 8A4602              <2> 	mov byte al,[bp+2]
  2312                              <2> 	
  2313 000008AB B100                <2> 	mov cl,0
  2314                              <2> 	.l1:
  2315 000008AD 80F908              <2> 		cmp cl,8
  2316 000008B0 7410                <2> 		je .l2
  2317                              <2> 		
  2318 000008B2 88C3                <2> 		mov bl,al
  2319 000008B4 D2E3                <2> 		shl bl,cl
  2320 000008B6 C0EB07              <2> 		shr bl,7
  2321                              <2> 		
  2322 000008B9 80FB00              <2> 		cmp bl,0
  2323 000008BC 7504                <2> 		jnz .l2
  2324                              <2> 		
  2325 000008BE FEC1                <2> 		inc cl		
  2326 000008C0 EBEB                <2> 		jmp .l1
  2327                              <2> 	.l2:
  2328                              <2> 	
  2329 000008C2 884E03              <2> 	mov byte [bp+3], cl
  2330                              <2> 		
  2331 000008C5 C3                  <2> 	ret
  2332                              <2> 	
  2333                              <2> proc_calc_dividendo1:
  2334 000008C6 89E0                <2> 	mov ax,sp
  2335 000008C8 89C5                <2> 	mov bp,ax
  2336                              <2> 	
  2337 000008CA 8B4606              <2> 	mov ax,[bp+6]
  2338 000008CD 8B5E08              <2> 	mov bx,[bp+8]
  2339 000008D0 55                  <2> 	push bp
  2340                              <2> 	__lzbitcount32 ax, bx, cl
  2341 000008D1 53                  <3>  push %2
  2342                              <3>  __lzbitcount16 %1, cl
  2343                              <4>  stkopen 3
  2344 000008D2 83EC03              <5>  sub word sp, %1
  2345 000008D5 54                  <5>  push sp
  2346 000008D6 5D                  <5>  pop bp
  2347 000008D7 894600              <4>  mov word [bp+0], %1
  2348 000008DA E8A5FF              <4>  call proc__lzbitcount16
  2349 000008DD 54                  <4>  push sp
  2350 000008DE 5D                  <4>  pop bp
  2351 000008DF 8A4E02              <4>  mov byte %2, [bp+2]
  2352                              <4>  stkclose 3
  2353 000008E2 83C403              <5>  add word sp, %1
  2354 000008E5 58                  <3>  pop ax
  2355 000008E6 80F910              <3>  cmp cl,16
  2356 000008E9 7217                <3>  jb .end
  2357 000008EB 51                  <3>  push cx
  2358                              <3>  __lzbitcount16 ax, al
  2359                              <4>  stkopen 3
  2360 000008EC 83EC03              <5>  sub word sp, %1
  2361 000008EF 54                  <5>  push sp
  2362 000008F0 5D                  <5>  pop bp
  2363 000008F1 894600              <4>  mov word [bp+0], %1
  2364 000008F4 E88BFF              <4>  call proc__lzbitcount16
  2365 000008F7 54                  <4>  push sp
  2366 000008F8 5D                  <4>  pop bp
  2367 000008F9 8A4602              <4>  mov byte %2, [bp+2]
  2368                              <4>  stkclose 3
  2369 000008FC 83C403              <5>  add word sp, %1
  2370 000008FF 59                  <3>  pop cx
  2371 00000900 00C1                <3>  add cl,al
  2372                              <3>  .end:
  2373 00000902 88C9                <3>  mov byte %3, cl
  2374 00000904 5D                  <2> 	pop bp
  2375 00000905 B320                <2> 	mov bl,32
  2376 00000907 28CB                <2> 	sub bl,cl
  2377 00000909 53                  <2> 	push bx
  2378                              <2> 		
  2379 0000090A 8B4602              <2> 	mov ax,[bp+2]
  2380 0000090D 8B5604              <2> 	mov dx,[bp+4]
  2381 00000910 55                  <2> 	push bp
  2382                              <2> 	__shr32 ax, dx, cl
  2383                              <3>  stkopen 5
  2384 00000911 83EC05              <4>  sub word sp, %1
  2385 00000914 54                  <4>  push sp
  2386 00000915 5D                  <4>  pop bp
  2387 00000916 894600              <3>  mov word [bp+0], %1
  2388 00000919 895602              <3>  mov word [bp+2], %2
  2389 0000091C 884E04              <3>  mov byte [bp+4], %3
  2390 0000091F E8DBFE              <3>  call proc_shr32
  2391 00000922 54                  <3>  push sp
  2392 00000923 5D                  <3>  pop bp
  2393 00000924 8B4600              <3>  mov word %1, [bp+0]
  2394 00000927 8B5602              <3>  mov word %2, [bp+2]
  2395                              <3>  stkclose 5
  2396 0000092A 83C405              <4>  add word sp, %1
  2397 0000092D 5D                  <2> 	pop bp
  2398 0000092E 50                  <2> 	push ax
  2399 0000092F 52                  <2> 	push dx	
  2400                              <2> 	
  2401 00000930 8B4E06              <2> 	mov cx,[bp+6]
  2402 00000933 8B5E08              <2> 	mov bx,[bp+8]
  2403                              <2> 	
  2404 00000936 55                  <2> 	push bp
  2405                              <2> 	__cmp32 ax, dx, cx, bx, cl
  2406                              <3>  stkopen 9
  2407 00000937 83EC09              <4>  sub word sp, %1
  2408 0000093A 54                  <4>  push sp
  2409 0000093B 5D                  <4>  pop bp
  2410 0000093C 894600              <3>  mov word [bp+0], %1
  2411 0000093F 895602              <3>  mov word [bp+2], %2
  2412 00000942 894E04              <3>  mov word [bp+4], %3
  2413 00000945 895E06              <3>  mov word [bp+6], %4
  2414 00000948 E840FE              <3>  call proc_cmp32
  2415 0000094B 54                  <3>  push sp
  2416 0000094C 5D                  <3>  pop bp
  2417 0000094D 8A4E08              <3>  mov byte %5, [bp+8]
  2418                              <3>  stkclose 9
  2419 00000950 83C409              <4>  add word sp, %1
  2420 00000953 5D                  <2> 	pop bp
  2421 00000954 5A                  <2> 	pop dx
  2422 00000955 58                  <2> 	pop ax
  2423 00000956 5B                  <2> 	pop bx
  2424                              <2> 		
  2425 00000957 80F900              <2> 	cmp cl,0
  2426 0000095A 7D2D                <2> 	jge .l1
  2427                              <2> 		stkopen 9
  2428 0000095C 83EC09              <3>  sub word sp, %1
  2429 0000095F 54                  <3>  push sp
  2430 00000960 5D                  <3>  pop bp
  2431 00000961 8B4E0B              <2> 		mov cx,[bp+0x0B]
  2432 00000964 894E00              <2> 		mov word [bp+0], cx
  2433 00000967 8B4E0D              <2> 		mov cx,[bp+0x0D]
  2434 0000096A 894E02              <2> 		mov word [bp+2], cx
  2435 0000096D 894604              <2> 		mov word [bp+4], ax
  2436 00000970 895606              <2> 		mov word [bp+6], dx
  2437 00000973 885E08              <2> 		mov byte [bp+8], bl
  2438 00000976 E81E00              <2> 		call proc_calc_prox_dividendo
  2439 00000979 89E0                <2> 		mov ax,sp
  2440 0000097B 89C5                <2> 		mov bp,ax
  2441 0000097D 8B4604              <2> 		mov word ax,[bp+4]
  2442 00000980 8B5606              <2> 		mov word dx,[bp+6]
  2443 00000983 8A5E08              <2> 		mov byte bl,[bp+8] 
  2444                              <2> 		stkclose 9		 
  2445 00000986 83C409              <3>  add word sp, %1
  2446                              <2> 	.l1:
  2447                              <2> 	
  2448 00000989 89E1                <2> 	mov cx,sp
  2449 0000098B 89CD                <2> 	mov bp,cx
  2450 0000098D 89460A              <2> 	mov word [bp+0x0A], ax
  2451 00000990 89560C              <2> 	mov word [bp+0x0C], dx
  2452 00000993 885E0E              <2> 	mov byte [bp+0x0E], bl	 
  2453                              <2> 	
  2454 00000996 C3                  <2> 	ret
  2455                              <2> 
  2456                              <2> proc_calc_prox_dividendo:
  2457 00000997 89E0                <2> 	mov ax,sp
  2458 00000999 89C5                <2> 	mov bp,ax
  2459                              <2> 	
  2460 0000099B 30E4                <2> 	xor ah,ah	
  2461 0000099D 8A460A              <2> 	mov al,[bp+0x0A]
  2462 000009A0 B310                <2> 	mov bl,10h
  2463 000009A2 F6F3                <2> 	div bl
  2464                              <2> 	
  2465 000009A4 3C00                <2> 	cmp al,0
  2466 000009A6 7402                <2> 	jz .zero
  2467 000009A8 EB05                <2> 	jmp .one
  2468                              <2> 	.zero:
  2469 000009AA 8B5E02              <2> 		mov bx,[bp+2]
  2470 000009AD EB03                <2> 		jmp .endcmp
  2471                              <2> 	.one:
  2472 000009AF 8B5E04              <2> 		mov bx,[bp+4]		
  2473                              <2> 	.endcmp:
  2474                              <2> 		
  2475 000009B2 88E1                <2> 	mov cl,ah
  2476 000009B4 D3E3                <2> 	shl bx,cl
  2477 000009B6 C1EB0F              <2> 	shr bx,15
  2478                              <2> 	
  2479 000009B9 8B4606              <2> 	mov ax,[bp+6]
  2480 000009BC 8B5608              <2> 	mov dx,[bp+8]
  2481 000009BF 53                  <2> 	push bx
  2482                              <2> 	__shl32 ax, dx, 1
  2483                              <3>  stkopen 5
  2484 000009C0 83EC05              <4>  sub word sp, %1
  2485 000009C3 54                  <4>  push sp
  2486 000009C4 5D                  <4>  pop bp
  2487 000009C5 894600              <3>  mov word [bp+0], %1
  2488 000009C8 895602              <3>  mov word [bp+2], %2
  2489 000009CB C6460401            <3>  mov byte [bp+4], %3
  2490 000009CF E8E4FD              <3>  call proc_shl32
  2491 000009D2 54                  <3>  push sp
  2492 000009D3 5D                  <3>  pop bp
  2493 000009D4 8B4600              <3>  mov word %1, [bp+0]
  2494 000009D7 8B5602              <3>  mov word %2, [bp+2]
  2495                              <3>  stkclose 5
  2496 000009DA 83C405              <4>  add word sp, %1
  2497 000009DD 5B                  <2> 	pop bx
  2498                              <2> 	
  2499 000009DE 01DA                <2> 	add dx,bx
  2500 000009E0 83D000              <2> 	adc ax,0
  2501                              <2> 
  2502 000009E3 89E1                <2> 	mov cx,sp
  2503 000009E5 89CD                <2> 	mov bp,cx	
  2504 000009E7 894606              <2> 	mov [bp+6],ax
  2505 000009EA 895608              <2> 	mov [bp+8],dx
  2506                              <2> 	
  2507 000009ED FE460A              <2> 	inc byte [bp+0x0A]
  2508                              <2> 	
  2509 000009F0 C3                  <2> 	ret
  2510                              <2> 	
  2511                              <2> %endif
  2512                              <1> 	%include "lib/system.mac"
  2513                              <2>  
  2514                              <2> %ifndef SYSTEM_MAC
  2515                              <2>  	%define SYSTEM_MAC
  2516                              <2>  	
  2517                              <2> 	%ifndef TRUE
  2518                              <2> 		%define TRUE 01h
  2519                              <2> 	%endif
  2520                              <2> 	%ifndef FALSE
  2521                              <2> 		%define FALSE 00h
  2522                              <2> 	%endif
  2523                              <2> 	
  2524                              <2> %macro vlodsb 3
  2525                              <2> 	vlodsb cs, %1, %2, %3
  2526                              <2> %endmacro
  2527                              <2> 
  2528                              <2> %macro vstosb 3
  2529                              <2> 	vstosb cs, %1, %2, %3
  2530                              <2> %endmacro
  2531                              <2> 	 	
  2532                              <2> %macro int16toreg 2
  2533                              <2> 	int16toreg cs, %1, %2
  2534                              <2> %endmacro
  2535                              <2> 
  2536                              <2> %macro regtoint16 2
  2537                              <2> 	regtoint16 %1, cs, %2
  2538                              <2> %endmacro
  2539                              <2> 
  2540                              <2> %macro vstosb 4
  2541                              <2> 	push %1
  2542                              <2> 	pop ds
  2543                              <2> 	mov si,%2
  2544                              <2> 	add si,%3
  2545                              <2> 	mov byte [si],%4	
  2546                              <2> %endmacro
  2547                              <2> 
  2548                              <2> %macro vlodsb 4
  2549                              <2> 	push %1
  2550                              <2> 	pop ds
  2551                              <2> 	mov si,%2
  2552                              <2> 	add si,%3
  2553                              <2> 	mov byte %4,[si]	
  2554                              <2> %endmacro 	 
  2555                              <2> 
  2556                              <2> %macro int16toreg 3
  2557                              <2> 	push %2
  2558                              <2> 	push %1
  2559                              <2> 	pop ds
  2560                              <2> 	pop si
  2561                              <2> 	mov word %3,[si]	
  2562                              <2> %endmacro
  2563                              <2> 
  2564                              <2> %macro regtoint16 3
  2565                              <2> 	push %3
  2566                              <2> 	push %2
  2567                              <2> 	pop ds
  2568                              <2> 	pop si
  2569                              <2> 	mov word [si],%1	
  2570                              <2> %endmacro
  2571                              <2> 
  2572                              <2> %macro mov32 2
  2573                              <2> 	mov32 cs, %1, cs, %2
  2574                              <2> %endmacro
  2575                              <2> 
  2576                              <2> %macro mov16 2
  2577                              <2> 	mov16 cs, %1, cs, %2
  2578                              <2> %endmacro
  2579                              <2> 
  2580                              <2> %macro mov32 4
  2581                              <2> 	mov ax,%3
  2582                              <2> 	mov ds,ax
  2583                              <2> 	mov cx,[%4+2]
  2584                              <2> 	mov dx,[%4]
  2585                              <2> 	mov ax,%1
  2586                              <2> 	mov ds,ax
  2587                              <2> 	mov [%2+2],cx
  2588                              <2> 	mov [%2],dx
  2589                              <2> %endmacro
  2590                              <2> 
  2591                              <2> %macro mov16 4
  2592                              <2> 	mov ax,%3
  2593                              <2> 	mov ds,ax
  2594                              <2> 	mov bx,[%4]
  2595                              <2> 	mov ax,%1
  2596                              <2> 	mov ds,ax
  2597                              <2> 	mov [%2],bx
  2598                              <2> %endmacro
  2599                              <2>  	 	
  2600                              <2> %macro mformat 4
  2601                              <2> 	stkopen 8
  2602                              <2> 	mov word [ bp + 0 ], %1
  2603                              <2> 	mov word [ bp + 2 ], %2
  2604                              <2> 	mov word [ bp + 4 ], %3
  2605                              <2> 	mov word [ bp + 6 ], %4
  2606                              <2> 	call kernel_segment:mformat
  2607                              <2> 	stkclose 8
  2608                              <2> %endmacro
  2609                              <2> 
  2610                              <2> %macro malloc 6
  2611                              <2> 	stkopen 0Bh
  2612                              <2> 	mov word [ bp + 4 ], %3
  2613                              <2> 	mov word [ bp + 6 ], %4
  2614                              <2> 	mov word [ bp + 8 ], %5	
  2615                              <2> 	call kernel_segment:malloc
  2616                              <2> 	push sp
  2617                              <2> 	pop bp
  2618                              <2> 	mov word %1, [ bp ]
  2619                              <2> 	mov word %2, [ bp + 2 ]
  2620                              <2> 	mov byte %6, [ bp + 0x0A ]
  2621                              <2> 	stkclose 0Bh
  2622                              <2> %endmacro 	
  2623                              <2> 
  2624                              <2> %macro laddr 2
  2625                              <2> 	laddr %1, %2, %1, %2
  2626                              <2> %endmacro
  2627                              <2> 
  2628                              <2> %macro faddr 2
  2629                              <2> 	faddr %1, %2, %1, %2
  2630                              <2> %endmacro
  2631                              <2>  	
  2632                              <2> %macro laddr 4
  2633                              <2> 	stkopen 8
  2634                              <2> 	mov word [ bp + 4 ], %3
  2635                              <2> 	mov word [ bp + 6 ], %4	
  2636                              <2> 	call kernel_segment:laddr
  2637                              <2> 	push sp
  2638                              <2> 	pop bp
  2639                              <2> 	mov word %1, [ bp + 0 ]
  2640                              <2> 	mov word %2, [ bp + 2 ]	
  2641                              <2> 	stkclose 8
  2642                              <2> %endmacro
  2643                              <2> 
  2644                              <2> %macro faddr 4
  2645                              <2> 	stkopen 8
  2646                              <2> 	mov word [ bp + 4 ], %3
  2647                              <2> 	mov word [ bp + 6 ], %4	
  2648                              <2> 	call kernel_segment:faddr
  2649                              <2> 	push sp
  2650                              <2> 	pop bp
  2651                              <2> 	mov word %1, [ bp + 0 ]
  2652                              <2> 	mov word %2, [ bp + 2 ]	
  2653                              <2> 	stkclose 8
  2654                              <2> %endmacro	
  2655                              <2>  
  2656                              <2> 
  2657                              <2> %macro stkopen 1		
  2658                              <2> 	sub word sp, %1
  2659                              <2> 	push sp
  2660                              <2> 	pop bp
  2661                              <2> %endmacro
  2662                              <2> 
  2663                              <2> %macro stkclose 1
  2664                              <2> 	add word sp, %1
  2665                              <2> %endmacro
  2666                              <2> 
  2667                              <2> %macro stkload 1-* 	
  2668                              <2>  	%rep %0
  2669                              <2>  	 	%rotate -1
  2670                              <2>  		pop %1
  2671                              <2>  	%endrep
  2672                              <2>  	%rep %0
  2673                              <2>  		push %1
  2674                              <2>  		%rotate 1
  2675                              <2>  	%endrep
  2676                              <2> %endmacro
  2677                              <2> 
  2678                              <2> %macro stkpush 1-* 	
  2679                              <2>  	%rep %0
  2680                              <2>  		push %1
  2681                              <2>  		%rotate 1
  2682                              <2>  	%endrep 	
  2683                              <2> %endmacro
  2684                              <2>  
  2685                              <2> %macro stkpop 1-*
  2686                              <2>  	%rep %0
  2687                              <2>  	 	%rotate -1
  2688                              <2>  		pop %1
  2689                              <2>  	%endrep 	 	
  2690                              <2> %endmacro
  2691                              <2> 
  2692                              <2> %endif 
  2693                              <1> 
  2694                              <1> %macro chgsig 1
  2695                              <1> 	chgsig cs, %1
  2696                              <1> %endmacro
  2697                              <1> 
  2698                              <1> %macro cmp16 3
  2699                              <1> 	cmp16 cs, %1, cs, %2, %3
  2700                              <1> %endmacro
  2701                              <1> 
  2702                              <1> %macro mul16 2
  2703                              <1> 	mul16 cs, %1, cs, %2
  2704                              <1> %endmacro
  2705                              <1> 
  2706                              <1> %macro div16 2
  2707                              <1> 	div16 cs, %1, cs, %2
  2708                              <1> %endmacro
  2709                              <1> 
  2710                              <1> %macro mod16 2
  2711                              <1> 	mod16 cs, %1, cs, %2
  2712                              <1> %endmacro
  2713                              <1> 
  2714                              <1> %macro inc16 1
  2715                              <1> 	inc16 cs, %1
  2716                              <1> %endmacro
  2717                              <1> 
  2718                              <1> %macro dec16 1
  2719                              <1> 	dec16 cs, %1
  2720                              <1> %endmacro
  2721                              <1> 
  2722                              <1> %macro add16 2
  2723                              <1> 	add16 cs, %1, cs, %2
  2724                              <1> %endmacro
  2725                              <1> 
  2726                              <1> %macro sub16 2
  2727                              <1> 	sub16 cs, %1, cs, %2
  2728                              <1> %endmacro
  2729                              <1> 
  2730                              <1> %macro int32to16 2
  2731                              <1> 	int32to16 cs, %1, %2
  2732                              <1> %endmacro
  2733                              <1> 
  2734                              <1> %macro int16to32 2
  2735                              <1> 	int16to32 %1, cs, %2
  2736                              <1> %endmacro
  2737                              <1> 
  2738                              <1> %macro setsig 1
  2739                              <1> 	setsig cs, %1
  2740                              <1> %endmacro
  2741                              <1> 
  2742                              <1> %macro clrsig 1
  2743                              <1> 	clrsig cs, %1
  2744                              <1> %endmacro
  2745                              <1> 
  2746                              <1> %macro idiv32 5
  2747                              <1> 	idiv32 cs, %1, cs, %2, cs, %3, cs, %4, cs, %5
  2748                              <1> %endmacro
  2749                              <1> 
  2750                              <1> %macro imul32 3
  2751                              <1> 	imul32 cs, %1, cs, %2, cs, %3
  2752                              <1> %endmacro
  2753                              <1> 
  2754                              <1> %macro div32 5
  2755                              <1> 	div32 cs, %1, cs, %2, cs, %3, cs, %4, cs, %5
  2756                              <1> %endmacro
  2757                              <1> 
  2758                              <1> %macro mul32 3
  2759                              <1> 	mul32 cs, %1, cs, %2, cs, %3
  2760                              <1> %endmacro
  2761                              <1> 	
  2762                              <1> %macro add32 3
  2763                              <1> 	add32 cs, %1, cs, %2, cs, %3
  2764                              <1> %endmacro
  2765                              <1> 
  2766                              <1> %macro sub32 3
  2767                              <1> 	sub32 cs, %1, cs, %2, cs, %3
  2768                              <1> %endmacro
  2769                              <1> 
  2770                              <1> %macro int32to16 3
  2771                              <1> 	stkopen 0x06
  2772                              <1> 	mov ax,%1
  2773                              <1> 	mov ds,ax
  2774                              <1> 	mov ax,[%2+2]
  2775                              <1> 	mov word [bp+0], ax
  2776                              <1> 	mov ax,[%2]	
  2777                              <1> 	mov word [bp+2], ax
  2778                              <1> 	call proc_int32to16
  2779                              <1> 	mov ax,sp
  2780                              <1> 	mov bp,ax
  2781                              <1> 	mov ax,[bp+4]
  2782                              <1> 	mov word %3, ax	
  2783                              <1> 	stkclose 0x06
  2784                              <1> %endmacro
  2785                              <1> 
  2786                              <1> %macro int16to32 3
  2787                              <1> 	stkopen 0x06
  2788                              <1> 	mov word [bp+0], %1	
  2789                              <1> 	call proc_int16to32
  2790                              <1> 	mov ax,sp
  2791                              <1> 	mov bp,ax
  2792                              <1> 	mov ax,%2
  2793                              <1> 	mov ds,ax
  2794                              <1> 	mov ax,[bp+2]
  2795                              <1> 	mov [%3+2],ax
  2796                              <1> 	mov ax,[bp+4]
  2797                              <1> 	mov [%3],ax	
  2798                              <1> 	stkclose 0x06
  2799                              <1> %endmacro
  2800                              <1> 
  2801                              <1> %macro setsig 2
  2802                              <1> 	stkopen 0x02
  2803                              <1> 	mov ax,%1
  2804                              <1> 	mov ds,ax
  2805                              <1> 	mov ax,[%2+2]
  2806                              <1> 	mov word [bp+0], ax
  2807                              <1> 	call proc_setsig
  2808                              <1> 	mov ax,sp
  2809                              <1> 	mov bp,ax
  2810                              <1> 	mov ax,%1
  2811                              <1> 	mov ds,ax
  2812                              <1> 	mov ax,[bp+0]
  2813                              <1> 	mov word [%2+2], ax
  2814                              <1> 	stkclose 0x02
  2815                              <1> %endmacro
  2816                              <1> 
  2817                              <1> %macro clrsig 2
  2818                              <1> 	stkopen 0x02
  2819                              <1> 	mov ax,%1
  2820                              <1> 	mov ds,ax
  2821                              <1> 	mov ax,[%2+2]
  2822                              <1> 	mov word [bp+0], ax
  2823                              <1> 	call proc_clrsig
  2824                              <1> 	mov ax,sp
  2825                              <1> 	mov bp,ax
  2826                              <1> 	mov ax,%1
  2827                              <1> 	mov ds,ax
  2828                              <1> 	mov ax,[bp+0]
  2829                              <1> 	mov word [%2+2], ax
  2830                              <1> 	stkclose 0x02
  2831                              <1> %endmacro
  2832                              <1> 
  2833                              <1> %macro div32 10
  2834                              <1> 	stkopen 0x11
  2835                              <1> 	mov ax,%1
  2836                              <1> 	mov ds,ax
  2837                              <1> 	mov ax,[%2+2]
  2838                              <1> 	mov word [bp+0], ax
  2839                              <1> 	mov ax,[%2]
  2840                              <1> 	mov word [bp+2], ax
  2841                              <1> 	mov ax,%3
  2842                              <1> 	mov ds,ax
  2843                              <1> 	mov ax,[%4+2]
  2844                              <1> 	mov word [bp+4], ax
  2845                              <1> 	mov ax,[%4]
  2846                              <1> 	mov word [bp+6], ax
  2847                              <1> 	call proc_div32
  2848                              <1> 	mov ax,sp
  2849                              <1> 	mov bp,ax
  2850                              <1> 	mov ax,%5
  2851                              <1> 	mov ds,ax
  2852                              <1> 	mov word ax, [bp+8]
  2853                              <1> 	mov word [%6+2], ax
  2854                              <1> 	mov word ax, [bp+0x0A]
  2855                              <1> 	mov word [%6], ax
  2856                              <1> 	mov ax,%7
  2857                              <1> 	mov ds,ax
  2858                              <1> 	mov word ax,[bp+0x0C]
  2859                              <1> 	mov word [%8+2],ax
  2860                              <1> 	mov word ax,[bp+0x0E]
  2861                              <1> 	mov word [%8],ax
  2862                              <1> 	mov ax,%9
  2863                              <1> 	mov ds,ax
  2864                              <1> 	mov byte al,[bp+0x10]
  2865                              <1> 	mov byte [%10],al
  2866                              <1> 	stkclose 0x11
  2867                              <1> %endmacro
  2868                              <1> 	
  2869                              <1> %macro mul32 6
  2870                              <1> 	stkopen 0x0C
  2871                              <1> 	mov ax,%1
  2872                              <1> 	mov ds,ax
  2873                              <1> 	mov ax,[%2+2]
  2874                              <1> 	mov word [bp+0], ax
  2875                              <1> 	mov ax,[%2]
  2876                              <1> 	mov word [bp+2], ax
  2877                              <1> 	mov ax,%3
  2878                              <1> 	mov ds,ax
  2879                              <1> 	mov ax,[%4+2]
  2880                              <1> 	mov word [bp+4], ax
  2881                              <1> 	mov ax,[%4]
  2882                              <1> 	mov word [bp+6], ax
  2883                              <1> 	call proc_mul32
  2884                              <1> 	mov ax,sp
  2885                              <1> 	mov bp,ax
  2886                              <1> 	mov ax,%5
  2887                              <1> 	mov ds,ax
  2888                              <1> 	mov word ax, [bp+8]
  2889                              <1> 	mov word [%6+2], ax
  2890                              <1> 	mov word ax, [bp+0x0A]
  2891                              <1> 	mov word [%6], ax
  2892                              <1> 	stkclose 0x0C
  2893                              <1> %endmacro	
  2894                              <1> 	
  2895                              <1> %macro add32 6
  2896                              <1> 	stkopen 0x0C
  2897                              <1> 	mov ax,%1
  2898                              <1> 	mov ds,ax
  2899                              <1> 	mov ax,[%2+2]
  2900                              <1> 	mov word [bp+0], ax
  2901                              <1> 	mov ax,[%2]
  2902                              <1> 	mov word [bp+2], ax
  2903                              <1> 	mov ax,%3
  2904                              <1> 	mov ds,ax
  2905                              <1> 	mov ax,[%4+2]
  2906                              <1> 	mov word [bp+4], ax
  2907                              <1> 	mov ax,[%4]
  2908                              <1> 	mov word [bp+6], ax
  2909                              <1> 	call proc_add32
  2910                              <1> 	mov ax,sp
  2911                              <1> 	mov bp,ax
  2912                              <1> 	mov ax,%5
  2913                              <1> 	mov ds,ax
  2914                              <1> 	mov word ax, [bp+8]
  2915                              <1> 	mov word [%6+2], ax
  2916                              <1> 	mov word ax, [bp+0x0A]
  2917                              <1> 	mov word [%6], ax
  2918                              <1> 	stkclose 0x0C
  2919                              <1> %endmacro
  2920                              <1> 
  2921                              <1> %macro sub32 6
  2922                              <1> 	stkopen 0x0C
  2923                              <1> 	mov ax,%1
  2924                              <1> 	mov ds,ax
  2925                              <1> 	mov ax,[%2+2]
  2926                              <1> 	mov word [bp+0], ax
  2927                              <1> 	mov ax,[%2]
  2928                              <1> 	mov word [bp+2], ax
  2929                              <1> 	mov ax,%3
  2930                              <1> 	mov ds,ax
  2931                              <1> 	mov ax,[%4+2]
  2932                              <1> 	mov word [bp+4], ax
  2933                              <1> 	mov ax,[%4]
  2934                              <1> 	mov word [bp+6], ax
  2935                              <1> 	call proc_sub32
  2936                              <1> 	mov ax,sp
  2937                              <1> 	mov bp,ax
  2938                              <1> 	mov ax,%5
  2939                              <1> 	mov ds,ax
  2940                              <1> 	mov word ax, [bp+8]
  2941                              <1> 	mov word [%6+2], ax
  2942                              <1> 	mov word ax, [bp+0x0A]
  2943                              <1> 	mov word [%6], ax
  2944                              <1> 	stkclose 0x0C
  2945                              <1> %endmacro
  2946                              <1> 
  2947                              <1> %macro idiv32 10
  2948                              <1> 	stkopen 0x11
  2949                              <1> 	mov ax,%1
  2950                              <1> 	mov ds,ax
  2951                              <1> 	mov ax,[%2+2]
  2952                              <1> 	mov word [bp+0], ax
  2953                              <1> 	mov ax,[%2]
  2954                              <1> 	mov word [bp+2], ax
  2955                              <1> 	mov ax,%3
  2956                              <1> 	mov ds,ax
  2957                              <1> 	mov ax,[%4+2]
  2958                              <1> 	mov word [bp+4], ax
  2959                              <1> 	mov ax,[%4]
  2960                              <1> 	mov word [bp+6], ax
  2961                              <1> 	call proc_idiv32
  2962                              <1> 	mov ax,sp
  2963                              <1> 	mov bp,ax
  2964                              <1> 	mov ax,%5
  2965                              <1> 	mov ds,ax
  2966                              <1> 	mov word ax, [bp+8]
  2967                              <1> 	mov word [%6+2], ax
  2968                              <1> 	mov word ax, [bp+0x0A]
  2969                              <1> 	mov word [%6], ax
  2970                              <1> 	mov ax,%7
  2971                              <1> 	mov ds,ax
  2972                              <1> 	mov word ax,[bp+0x0C]
  2973                              <1> 	mov word [%8+2],ax
  2974                              <1> 	mov word ax,[bp+0x0E]
  2975                              <1> 	mov word [%8],ax
  2976                              <1> 	mov ax,%9
  2977                              <1> 	mov ds,ax
  2978                              <1> 	mov byte al,[bp+0x10]
  2979                              <1> 	mov byte [%10],al
  2980                              <1> 	stkclose 0x11
  2981                              <1> %endmacro
  2982                              <1> 
  2983                              <1> %macro imul32 6
  2984                              <1> 	stkopen 0x0C
  2985                              <1> 	mov ax,%1
  2986                              <1> 	mov ds,ax
  2987                              <1> 	mov ax,[%2+2]
  2988                              <1> 	mov word [bp+0], ax
  2989                              <1> 	mov ax,[%2]
  2990                              <1> 	mov word [bp+2], ax
  2991                              <1> 	mov ax,%3
  2992                              <1> 	mov ds,ax
  2993                              <1> 	mov ax,[%4+2]
  2994                              <1> 	mov word [bp+4], ax
  2995                              <1> 	mov ax,[%4]
  2996                              <1> 	mov word [bp+6], ax
  2997                              <1> 	call proc_imul32
  2998                              <1> 	mov ax,sp
  2999                              <1> 	mov bp,ax
  3000                              <1> 	mov ax,%5
  3001                              <1> 	mov ds,ax
  3002                              <1> 	mov word ax, [bp+8]
  3003                              <1> 	mov word [%6+2], ax
  3004                              <1> 	mov word ax, [bp+0x0A]
  3005                              <1> 	mov word [%6], ax
  3006                              <1> 	stkclose 0x0C
  3007                              <1> %endmacro
  3008                              <1> 	
  3009                              <1> %macro cmp32 3
  3010                              <1> 	cmp32 cs, %1, cs, %2, %3
  3011                              <1> %endmacro	
  3012                              <1> 	
  3013                              <1> %macro cmp32 5
  3014                              <1> 	stkopen 9
  3015                              <1> 	mov ax,%1
  3016                              <1> 	mov ds,ax
  3017                              <1> 	mov word ax,[%2+2]
  3018                              <1> 	mov word [bp+0], ax
  3019                              <1> 	mov word ax,[%2]
  3020                              <1> 	mov word [bp+2], ax	
  3021                              <1> 	mov ax,%3
  3022                              <1> 	mov ds,ax
  3023                              <1> 	mov word ax,[%4+2]
  3024                              <1> 	mov word [bp+4], ax
  3025                              <1> 	mov word ax,[%4]
  3026                              <1> 	mov word [bp+6], ax	
  3027                              <1> 	call proc_cmp32
  3028                              <1> 	mov ax,sp
  3029                              <1> 	mov bp,ax
  3030                              <1> 	mov al,[bp+8]
  3031                              <1> 	mov byte %5,al
  3032                              <1> 	stkclose 9
  3033                              <1> %endmacro
  3034                              <1> 	
  3035                              <1> %macro shl32 2
  3036                              <1> 	shl32 cs, %1, %2
  3037                              <1> %endmacro	
  3038                              <1> 	
  3039                              <1> %macro shl32 3
  3040                              <1> 	stkopen 5
  3041                              <1> 	mov ax,%1
  3042                              <1> 	mov ds,ax
  3043                              <1> 	mov word ax,[%2+2]
  3044                              <1> 	mov word [bp+0], ax
  3045                              <1> 	mov word ax,[%2]
  3046                              <1> 	mov word [bp+2], ax
  3047                              <1> 	mov byte al, %3
  3048                              <1> 	mov byte [bp+4], al 
  3049                              <1> 	call proc_shl32
  3050                              <1> 	mov ax,sp
  3051                              <1> 	mov bp,ax
  3052                              <1> 	mov ax,%1
  3053                              <1> 	mov ds,ax
  3054                              <1> 	mov ax,[bp+0]
  3055                              <1> 	mov word [%2+2],ax
  3056                              <1> 	mov ax,[bp+2]
  3057                              <1> 	mov word [%2],ax
  3058                              <1> 	stkclose 5
  3059                              <1> %endmacro
  3060                              <1> 
  3061                              <1> 
  3062                              <1> %macro shr32 2
  3063                              <1> 	shr32 cs, %1, %2
  3064                              <1> %endmacro	
  3065                              <1> 	
  3066                              <1> %macro shr32 3
  3067                              <1> 	stkopen 5
  3068                              <1> 	mov ax,%1
  3069                              <1> 	mov ds,ax
  3070                              <1> 	mov word ax,[%2+2]
  3071                              <1> 	mov word [bp+0], ax
  3072                              <1> 	mov word ax,[%2]
  3073                              <1> 	mov word [bp+2], ax
  3074                              <1> 	mov byte al, %3
  3075                              <1> 	mov byte [bp+4], al 
  3076                              <1> 	call proc_shr32
  3077                              <1> 	mov ax,sp
  3078                              <1> 	mov bp,ax
  3079                              <1> 	mov ax,%1
  3080                              <1> 	mov ds,ax
  3081                              <1> 	mov ax,[bp+0]
  3082                              <1> 	mov word [%2+2],ax
  3083                              <1> 	mov ax,[bp+2]
  3084                              <1> 	mov word [%2],ax
  3085                              <1> 	stkclose 5
  3086                              <1> %endmacro
  3087                              <1> 
  3088                              <1> %macro inc16 2
  3089                              <1> 	mov ax,%1
  3090                              <1> 	mov ds,ax
  3091                              <1> 	inc word [%2]
  3092                              <1> %endmacro
  3093                              <1> 
  3094                              <1> %macro dec16 2
  3095                              <1> 	mov ax,%1
  3096                              <1> 	mov ds,ax
  3097                              <1> 	dec word [%2]
  3098                              <1> %endmacro
  3099                              <1> 
  3100                              <1> %macro add16 4	
  3101                              <1> 	mov ax,%3
  3102                              <1> 	mov ds,ax
  3103                              <1> 	mov bx,[%4]	
  3104                              <1> 	mov ax,%1
  3105                              <1> 	mov ds,ax	
  3106                              <1> 	add [%2],bx
  3107                              <1> %endmacro
  3108                              <1> 
  3109                              <1> %macro sub16 4
  3110                              <1> 	mov ax,%3
  3111                              <1> 	mov ds,ax
  3112                              <1> 	mov bx,[%4]
  3113                              <1> 	mov ax,%1
  3114                              <1> 	mov ds,ax
  3115                              <1> 	sub [%2],bx
  3116                              <1> %endmacro
  3117                              <1> 
  3118                              <1> %macro mul16 4
  3119                              <1> 	mov ax,%1
  3120                              <1> 	mov ds,ax
  3121                              <1> 	mov bx,[%2]
  3122                              <1> 	mov ax,%3
  3123                              <1> 	mov ds,ax
  3124                              <1> 	mov cx,[%4]
  3125                              <1> 	
  3126                              <1> 	mov ax,bx
  3127                              <1> 	imul cx
  3128                              <1> 	
  3129                              <1> 	mov dx,%1
  3130                              <1> 	mov ds,dx
  3131                              <1> 	mov [%2],ax
  3132                              <1> %endmacro
  3133                              <1> 
  3134                              <1> %macro div16 4
  3135                              <1> 	mov ax,%1
  3136                              <1> 	mov ds,ax
  3137                              <1> 	mov bx,[%2]
  3138                              <1> 	mov ax,%3
  3139                              <1> 	mov ds,ax
  3140                              <1> 	mov cx,[%4]
  3141                              <1> 	
  3142                              <1> 	xor dx,dx
  3143                              <1> 	mov ax,bx
  3144                              <1> 	idiv cx
  3145                              <1> 	
  3146                              <1> 	mov dx,%1
  3147                              <1> 	mov ds,dx
  3148                              <1> 	mov [%2],ax
  3149                              <1> %endmacro
  3150                              <1> 
  3151                              <1> 
  3152                              <1> %macro mod16 4
  3153                              <1> 	mov ax,%1
  3154                              <1> 	mov ds,ax
  3155                              <1> 	mov bx,[%2]
  3156                              <1> 	mov ax,%3
  3157                              <1> 	mov ds,ax
  3158                              <1> 	mov cx,[%4]
  3159                              <1> 	
  3160                              <1> 	xor dx,dx
  3161                              <1> 	mov ax,bx
  3162                              <1> 	idiv cx
  3163                              <1> 	
  3164                              <1> 	mov bx,%1
  3165                              <1> 	mov ds,bx
  3166                              <1> 	mov [%2],dx
  3167                              <1> %endmacro
  3168                              <1> 
  3169                              <1> %macro cmp16 5
  3170                              <1> 	mov ax,%1
  3171                              <1> 	mov ds,ax
  3172                              <1> 	mov bx,[%2]
  3173                              <1> 	mov ax,%3
  3174                              <1> 	mov ds,ax
  3175                              <1> 	mov	cx,[%4]
  3176                              <1> 	
  3177                              <1> 	cmp bx,cx
  3178                              <1> 	jg %%above
  3179                              <1> 	jl %%below
  3180                              <1> 		mov byte %5, 0
  3181                              <1> 		jmp %%endcmp
  3182                              <1> 	%%above:
  3183                              <1> 		mov byte %5, 1
  3184                              <1> 		jmp %%endcmp
  3185                              <1> 	%%below:
  3186                              <1> 		mov byte %5, -1
  3187                              <1> 	%%endcmp:
  3188                              <1> %endmacro
  3189                              <1> 
  3190                              <1> %macro chgsig 2
  3191                              <1> 	mov ax,%1
  3192                              <1> 	mov ds,ax
  3193                              <1> 	mov ax,[%2]
  3194                              <1> 	mov bx,0xFFFF
  3195                              <1> 	sub bx,ax
  3196                              <1> 	inc bx
  3197                              <1> 	mov [%2],bx
  3198                              <1> %endmacro
  3199                              <1> 	
  3200                              <1> %endif
  3201                                  %include "lib/float.mac"
  3202                              <1> 
  3203                              <1> %ifndef FLOAT_MAC
  3204                              <1> 	%define FLOAT_MAC
  3205                              <1> 	
  3206                              <1> 	%include "lib/float.asm"
  3207                              <2> 
  3208                              <2> %ifndef FLOAT_ASM
  3209                              <2> 	%define FLOAT_ASM
  3210                              <2> 	
  3211                              <2> 	%include "lib/system.mac"
  3212                              <3>  
  3213                              <3> %ifndef SYSTEM_MAC
  3214                              <3>  	%define SYSTEM_MAC
  3215                              <3>  	
  3216                              <3> 	%ifndef TRUE
  3217                              <3> 		%define TRUE 01h
  3218                              <3> 	%endif
  3219                              <3> 	%ifndef FALSE
  3220                              <3> 		%define FALSE 00h
  3221                              <3> 	%endif
  3222                              <3> 	
  3223                              <3> %macro vlodsb 3
  3224                              <3> 	vlodsb cs, %1, %2, %3
  3225                              <3> %endmacro
  3226                              <3> 
  3227                              <3> %macro vstosb 3
  3228                              <3> 	vstosb cs, %1, %2, %3
  3229                              <3> %endmacro
  3230                              <3> 	 	
  3231                              <3> %macro int16toreg 2
  3232                              <3> 	int16toreg cs, %1, %2
  3233                              <3> %endmacro
  3234                              <3> 
  3235                              <3> %macro regtoint16 2
  3236                              <3> 	regtoint16 %1, cs, %2
  3237                              <3> %endmacro
  3238                              <3> 
  3239                              <3> %macro vstosb 4
  3240                              <3> 	push %1
  3241                              <3> 	pop ds
  3242                              <3> 	mov si,%2
  3243                              <3> 	add si,%3
  3244                              <3> 	mov byte [si],%4	
  3245                              <3> %endmacro
  3246                              <3> 
  3247                              <3> %macro vlodsb 4
  3248                              <3> 	push %1
  3249                              <3> 	pop ds
  3250                              <3> 	mov si,%2
  3251                              <3> 	add si,%3
  3252                              <3> 	mov byte %4,[si]	
  3253                              <3> %endmacro 	 
  3254                              <3> 
  3255                              <3> %macro int16toreg 3
  3256                              <3> 	push %2
  3257                              <3> 	push %1
  3258                              <3> 	pop ds
  3259                              <3> 	pop si
  3260                              <3> 	mov word %3,[si]	
  3261                              <3> %endmacro
  3262                              <3> 
  3263                              <3> %macro regtoint16 3
  3264                              <3> 	push %3
  3265                              <3> 	push %2
  3266                              <3> 	pop ds
  3267                              <3> 	pop si
  3268                              <3> 	mov word [si],%1	
  3269                              <3> %endmacro
  3270                              <3> 
  3271                              <3> %macro mov32 2
  3272                              <3> 	mov32 cs, %1, cs, %2
  3273                              <3> %endmacro
  3274                              <3> 
  3275                              <3> %macro mov16 2
  3276                              <3> 	mov16 cs, %1, cs, %2
  3277                              <3> %endmacro
  3278                              <3> 
  3279                              <3> %macro mov32 4
  3280                              <3> 	mov ax,%3
  3281                              <3> 	mov ds,ax
  3282                              <3> 	mov cx,[%4+2]
  3283                              <3> 	mov dx,[%4]
  3284                              <3> 	mov ax,%1
  3285                              <3> 	mov ds,ax
  3286                              <3> 	mov [%2+2],cx
  3287                              <3> 	mov [%2],dx
  3288                              <3> %endmacro
  3289                              <3> 
  3290                              <3> %macro mov16 4
  3291                              <3> 	mov ax,%3
  3292                              <3> 	mov ds,ax
  3293                              <3> 	mov bx,[%4]
  3294                              <3> 	mov ax,%1
  3295                              <3> 	mov ds,ax
  3296                              <3> 	mov [%2],bx
  3297                              <3> %endmacro
  3298                              <3>  	 	
  3299                              <3> %macro mformat 4
  3300                              <3> 	stkopen 8
  3301                              <3> 	mov word [ bp + 0 ], %1
  3302                              <3> 	mov word [ bp + 2 ], %2
  3303                              <3> 	mov word [ bp + 4 ], %3
  3304                              <3> 	mov word [ bp + 6 ], %4
  3305                              <3> 	call kernel_segment:mformat
  3306                              <3> 	stkclose 8
  3307                              <3> %endmacro
  3308                              <3> 
  3309                              <3> %macro malloc 6
  3310                              <3> 	stkopen 0Bh
  3311                              <3> 	mov word [ bp + 4 ], %3
  3312                              <3> 	mov word [ bp + 6 ], %4
  3313                              <3> 	mov word [ bp + 8 ], %5	
  3314                              <3> 	call kernel_segment:malloc
  3315                              <3> 	push sp
  3316                              <3> 	pop bp
  3317                              <3> 	mov word %1, [ bp ]
  3318                              <3> 	mov word %2, [ bp + 2 ]
  3319                              <3> 	mov byte %6, [ bp + 0x0A ]
  3320                              <3> 	stkclose 0Bh
  3321                              <3> %endmacro 	
  3322                              <3> 
  3323                              <3> %macro laddr 2
  3324                              <3> 	laddr %1, %2, %1, %2
  3325                              <3> %endmacro
  3326                              <3> 
  3327                              <3> %macro faddr 2
  3328                              <3> 	faddr %1, %2, %1, %2
  3329                              <3> %endmacro
  3330                              <3>  	
  3331                              <3> %macro laddr 4
  3332                              <3> 	stkopen 8
  3333                              <3> 	mov word [ bp + 4 ], %3
  3334                              <3> 	mov word [ bp + 6 ], %4	
  3335                              <3> 	call kernel_segment:laddr
  3336                              <3> 	push sp
  3337                              <3> 	pop bp
  3338                              <3> 	mov word %1, [ bp + 0 ]
  3339                              <3> 	mov word %2, [ bp + 2 ]	
  3340                              <3> 	stkclose 8
  3341                              <3> %endmacro
  3342                              <3> 
  3343                              <3> %macro faddr 4
  3344                              <3> 	stkopen 8
  3345                              <3> 	mov word [ bp + 4 ], %3
  3346                              <3> 	mov word [ bp + 6 ], %4	
  3347                              <3> 	call kernel_segment:faddr
  3348                              <3> 	push sp
  3349                              <3> 	pop bp
  3350                              <3> 	mov word %1, [ bp + 0 ]
  3351                              <3> 	mov word %2, [ bp + 2 ]	
  3352                              <3> 	stkclose 8
  3353                              <3> %endmacro	
  3354                              <3>  
  3355                              <3> 
  3356                              <3> %macro stkopen 1		
  3357                              <3> 	sub word sp, %1
  3358                              <3> 	push sp
  3359                              <3> 	pop bp
  3360                              <3> %endmacro
  3361                              <3> 
  3362                              <3> %macro stkclose 1
  3363                              <3> 	add word sp, %1
  3364                              <3> %endmacro
  3365                              <3> 
  3366                              <3> %macro stkload 1-* 	
  3367                              <3>  	%rep %0
  3368                              <3>  	 	%rotate -1
  3369                              <3>  		pop %1
  3370                              <3>  	%endrep
  3371                              <3>  	%rep %0
  3372                              <3>  		push %1
  3373                              <3>  		%rotate 1
  3374                              <3>  	%endrep
  3375                              <3> %endmacro
  3376                              <3> 
  3377                              <3> %macro stkpush 1-* 	
  3378                              <3>  	%rep %0
  3379                              <3>  		push %1
  3380                              <3>  		%rotate 1
  3381                              <3>  	%endrep 	
  3382                              <3> %endmacro
  3383                              <3>  
  3384                              <3> %macro stkpop 1-*
  3385                              <3>  	%rep %0
  3386                              <3>  	 	%rotate -1
  3387                              <3>  		pop %1
  3388                              <3>  	%endrep 	 	
  3389                              <3> %endmacro
  3390                              <3> 
  3391                              <3> %endif 
  3392                              <2> 	%include "lib/math.mac"
  3393                              <3> 
  3394                              <3> %ifndef MATH_MAC
  3395                              <3> 	%define MATH_MAC
  3396                              <3> 	
  3397                              <3> 	%include "lib/math.asm"
  3398                              <3> 	%include "lib/system.mac"
  3399                              <3> 
  3400                              <3> %macro chgsig 1
  3401                              <3> 	chgsig cs, %1
  3402                              <3> %endmacro
  3403                              <3> 
  3404                              <3> %macro cmp16 3
  3405                              <3> 	cmp16 cs, %1, cs, %2, %3
  3406                              <3> %endmacro
  3407                              <3> 
  3408                              <3> %macro mul16 2
  3409                              <3> 	mul16 cs, %1, cs, %2
  3410                              <3> %endmacro
  3411                              <3> 
  3412                              <3> %macro div16 2
  3413                              <3> 	div16 cs, %1, cs, %2
  3414                              <3> %endmacro
  3415                              <3> 
  3416                              <3> %macro mod16 2
  3417                              <3> 	mod16 cs, %1, cs, %2
  3418                              <3> %endmacro
  3419                              <3> 
  3420                              <3> %macro inc16 1
  3421                              <3> 	inc16 cs, %1
  3422                              <3> %endmacro
  3423                              <3> 
  3424                              <3> %macro dec16 1
  3425                              <3> 	dec16 cs, %1
  3426                              <3> %endmacro
  3427                              <3> 
  3428                              <3> %macro add16 2
  3429                              <3> 	add16 cs, %1, cs, %2
  3430                              <3> %endmacro
  3431                              <3> 
  3432                              <3> %macro sub16 2
  3433                              <3> 	sub16 cs, %1, cs, %2
  3434                              <3> %endmacro
  3435                              <3> 
  3436                              <3> %macro int32to16 2
  3437                              <3> 	int32to16 cs, %1, %2
  3438                              <3> %endmacro
  3439                              <3> 
  3440                              <3> %macro int16to32 2
  3441                              <3> 	int16to32 %1, cs, %2
  3442                              <3> %endmacro
  3443                              <3> 
  3444                              <3> %macro setsig 1
  3445                              <3> 	setsig cs, %1
  3446                              <3> %endmacro
  3447                              <3> 
  3448                              <3> %macro clrsig 1
  3449                              <3> 	clrsig cs, %1
  3450                              <3> %endmacro
  3451                              <3> 
  3452                              <3> %macro idiv32 5
  3453                              <3> 	idiv32 cs, %1, cs, %2, cs, %3, cs, %4, cs, %5
  3454                              <3> %endmacro
  3455                              <3> 
  3456                              <3> %macro imul32 3
  3457                              <3> 	imul32 cs, %1, cs, %2, cs, %3
  3458                              <3> %endmacro
  3459                              <3> 
  3460                              <3> %macro div32 5
  3461                              <3> 	div32 cs, %1, cs, %2, cs, %3, cs, %4, cs, %5
  3462                              <3> %endmacro
  3463                              <3> 
  3464                              <3> %macro mul32 3
  3465                              <3> 	mul32 cs, %1, cs, %2, cs, %3
  3466                              <3> %endmacro
  3467                              <3> 	
  3468                              <3> %macro add32 3
  3469                              <3> 	add32 cs, %1, cs, %2, cs, %3
  3470                              <3> %endmacro
  3471                              <3> 
  3472                              <3> %macro sub32 3
  3473                              <3> 	sub32 cs, %1, cs, %2, cs, %3
  3474                              <3> %endmacro
  3475                              <3> 
  3476                              <3> %macro int32to16 3
  3477                              <3> 	stkopen 0x06
  3478                              <3> 	mov ax,%1
  3479                              <3> 	mov ds,ax
  3480                              <3> 	mov ax,[%2+2]
  3481                              <3> 	mov word [bp+0], ax
  3482                              <3> 	mov ax,[%2]	
  3483                              <3> 	mov word [bp+2], ax
  3484                              <3> 	call proc_int32to16
  3485                              <3> 	mov ax,sp
  3486                              <3> 	mov bp,ax
  3487                              <3> 	mov ax,[bp+4]
  3488                              <3> 	mov word %3, ax	
  3489                              <3> 	stkclose 0x06
  3490                              <3> %endmacro
  3491                              <3> 
  3492                              <3> %macro int16to32 3
  3493                              <3> 	stkopen 0x06
  3494                              <3> 	mov word [bp+0], %1	
  3495                              <3> 	call proc_int16to32
  3496                              <3> 	mov ax,sp
  3497                              <3> 	mov bp,ax
  3498                              <3> 	mov ax,%2
  3499                              <3> 	mov ds,ax
  3500                              <3> 	mov ax,[bp+2]
  3501                              <3> 	mov [%3+2],ax
  3502                              <3> 	mov ax,[bp+4]
  3503                              <3> 	mov [%3],ax	
  3504                              <3> 	stkclose 0x06
  3505                              <3> %endmacro
  3506                              <3> 
  3507                              <3> %macro setsig 2
  3508                              <3> 	stkopen 0x02
  3509                              <3> 	mov ax,%1
  3510                              <3> 	mov ds,ax
  3511                              <3> 	mov ax,[%2+2]
  3512                              <3> 	mov word [bp+0], ax
  3513                              <3> 	call proc_setsig
  3514                              <3> 	mov ax,sp
  3515                              <3> 	mov bp,ax
  3516                              <3> 	mov ax,%1
  3517                              <3> 	mov ds,ax
  3518                              <3> 	mov ax,[bp+0]
  3519                              <3> 	mov word [%2+2], ax
  3520                              <3> 	stkclose 0x02
  3521                              <3> %endmacro
  3522                              <3> 
  3523                              <3> %macro clrsig 2
  3524                              <3> 	stkopen 0x02
  3525                              <3> 	mov ax,%1
  3526                              <3> 	mov ds,ax
  3527                              <3> 	mov ax,[%2+2]
  3528                              <3> 	mov word [bp+0], ax
  3529                              <3> 	call proc_clrsig
  3530                              <3> 	mov ax,sp
  3531                              <3> 	mov bp,ax
  3532                              <3> 	mov ax,%1
  3533                              <3> 	mov ds,ax
  3534                              <3> 	mov ax,[bp+0]
  3535                              <3> 	mov word [%2+2], ax
  3536                              <3> 	stkclose 0x02
  3537                              <3> %endmacro
  3538                              <3> 
  3539                              <3> %macro div32 10
  3540                              <3> 	stkopen 0x11
  3541                              <3> 	mov ax,%1
  3542                              <3> 	mov ds,ax
  3543                              <3> 	mov ax,[%2+2]
  3544                              <3> 	mov word [bp+0], ax
  3545                              <3> 	mov ax,[%2]
  3546                              <3> 	mov word [bp+2], ax
  3547                              <3> 	mov ax,%3
  3548                              <3> 	mov ds,ax
  3549                              <3> 	mov ax,[%4+2]
  3550                              <3> 	mov word [bp+4], ax
  3551                              <3> 	mov ax,[%4]
  3552                              <3> 	mov word [bp+6], ax
  3553                              <3> 	call proc_div32
  3554                              <3> 	mov ax,sp
  3555                              <3> 	mov bp,ax
  3556                              <3> 	mov ax,%5
  3557                              <3> 	mov ds,ax
  3558                              <3> 	mov word ax, [bp+8]
  3559                              <3> 	mov word [%6+2], ax
  3560                              <3> 	mov word ax, [bp+0x0A]
  3561                              <3> 	mov word [%6], ax
  3562                              <3> 	mov ax,%7
  3563                              <3> 	mov ds,ax
  3564                              <3> 	mov word ax,[bp+0x0C]
  3565                              <3> 	mov word [%8+2],ax
  3566                              <3> 	mov word ax,[bp+0x0E]
  3567                              <3> 	mov word [%8],ax
  3568                              <3> 	mov ax,%9
  3569                              <3> 	mov ds,ax
  3570                              <3> 	mov byte al,[bp+0x10]
  3571                              <3> 	mov byte [%10],al
  3572                              <3> 	stkclose 0x11
  3573                              <3> %endmacro
  3574                              <3> 	
  3575                              <3> %macro mul32 6
  3576                              <3> 	stkopen 0x0C
  3577                              <3> 	mov ax,%1
  3578                              <3> 	mov ds,ax
  3579                              <3> 	mov ax,[%2+2]
  3580                              <3> 	mov word [bp+0], ax
  3581                              <3> 	mov ax,[%2]
  3582                              <3> 	mov word [bp+2], ax
  3583                              <3> 	mov ax,%3
  3584                              <3> 	mov ds,ax
  3585                              <3> 	mov ax,[%4+2]
  3586                              <3> 	mov word [bp+4], ax
  3587                              <3> 	mov ax,[%4]
  3588                              <3> 	mov word [bp+6], ax
  3589                              <3> 	call proc_mul32
  3590                              <3> 	mov ax,sp
  3591                              <3> 	mov bp,ax
  3592                              <3> 	mov ax,%5
  3593                              <3> 	mov ds,ax
  3594                              <3> 	mov word ax, [bp+8]
  3595                              <3> 	mov word [%6+2], ax
  3596                              <3> 	mov word ax, [bp+0x0A]
  3597                              <3> 	mov word [%6], ax
  3598                              <3> 	stkclose 0x0C
  3599                              <3> %endmacro	
  3600                              <3> 	
  3601                              <3> %macro add32 6
  3602                              <3> 	stkopen 0x0C
  3603                              <3> 	mov ax,%1
  3604                              <3> 	mov ds,ax
  3605                              <3> 	mov ax,[%2+2]
  3606                              <3> 	mov word [bp+0], ax
  3607                              <3> 	mov ax,[%2]
  3608                              <3> 	mov word [bp+2], ax
  3609                              <3> 	mov ax,%3
  3610                              <3> 	mov ds,ax
  3611                              <3> 	mov ax,[%4+2]
  3612                              <3> 	mov word [bp+4], ax
  3613                              <3> 	mov ax,[%4]
  3614                              <3> 	mov word [bp+6], ax
  3615                              <3> 	call proc_add32
  3616                              <3> 	mov ax,sp
  3617                              <3> 	mov bp,ax
  3618                              <3> 	mov ax,%5
  3619                              <3> 	mov ds,ax
  3620                              <3> 	mov word ax, [bp+8]
  3621                              <3> 	mov word [%6+2], ax
  3622                              <3> 	mov word ax, [bp+0x0A]
  3623                              <3> 	mov word [%6], ax
  3624                              <3> 	stkclose 0x0C
  3625                              <3> %endmacro
  3626                              <3> 
  3627                              <3> %macro sub32 6
  3628                              <3> 	stkopen 0x0C
  3629                              <3> 	mov ax,%1
  3630                              <3> 	mov ds,ax
  3631                              <3> 	mov ax,[%2+2]
  3632                              <3> 	mov word [bp+0], ax
  3633                              <3> 	mov ax,[%2]
  3634                              <3> 	mov word [bp+2], ax
  3635                              <3> 	mov ax,%3
  3636                              <3> 	mov ds,ax
  3637                              <3> 	mov ax,[%4+2]
  3638                              <3> 	mov word [bp+4], ax
  3639                              <3> 	mov ax,[%4]
  3640                              <3> 	mov word [bp+6], ax
  3641                              <3> 	call proc_sub32
  3642                              <3> 	mov ax,sp
  3643                              <3> 	mov bp,ax
  3644                              <3> 	mov ax,%5
  3645                              <3> 	mov ds,ax
  3646                              <3> 	mov word ax, [bp+8]
  3647                              <3> 	mov word [%6+2], ax
  3648                              <3> 	mov word ax, [bp+0x0A]
  3649                              <3> 	mov word [%6], ax
  3650                              <3> 	stkclose 0x0C
  3651                              <3> %endmacro
  3652                              <3> 
  3653                              <3> %macro idiv32 10
  3654                              <3> 	stkopen 0x11
  3655                              <3> 	mov ax,%1
  3656                              <3> 	mov ds,ax
  3657                              <3> 	mov ax,[%2+2]
  3658                              <3> 	mov word [bp+0], ax
  3659                              <3> 	mov ax,[%2]
  3660                              <3> 	mov word [bp+2], ax
  3661                              <3> 	mov ax,%3
  3662                              <3> 	mov ds,ax
  3663                              <3> 	mov ax,[%4+2]
  3664                              <3> 	mov word [bp+4], ax
  3665                              <3> 	mov ax,[%4]
  3666                              <3> 	mov word [bp+6], ax
  3667                              <3> 	call proc_idiv32
  3668                              <3> 	mov ax,sp
  3669                              <3> 	mov bp,ax
  3670                              <3> 	mov ax,%5
  3671                              <3> 	mov ds,ax
  3672                              <3> 	mov word ax, [bp+8]
  3673                              <3> 	mov word [%6+2], ax
  3674                              <3> 	mov word ax, [bp+0x0A]
  3675                              <3> 	mov word [%6], ax
  3676                              <3> 	mov ax,%7
  3677                              <3> 	mov ds,ax
  3678                              <3> 	mov word ax,[bp+0x0C]
  3679                              <3> 	mov word [%8+2],ax
  3680                              <3> 	mov word ax,[bp+0x0E]
  3681                              <3> 	mov word [%8],ax
  3682                              <3> 	mov ax,%9
  3683                              <3> 	mov ds,ax
  3684                              <3> 	mov byte al,[bp+0x10]
  3685                              <3> 	mov byte [%10],al
  3686                              <3> 	stkclose 0x11
  3687                              <3> %endmacro
  3688                              <3> 
  3689                              <3> %macro imul32 6
  3690                              <3> 	stkopen 0x0C
  3691                              <3> 	mov ax,%1
  3692                              <3> 	mov ds,ax
  3693                              <3> 	mov ax,[%2+2]
  3694                              <3> 	mov word [bp+0], ax
  3695                              <3> 	mov ax,[%2]
  3696                              <3> 	mov word [bp+2], ax
  3697                              <3> 	mov ax,%3
  3698                              <3> 	mov ds,ax
  3699                              <3> 	mov ax,[%4+2]
  3700                              <3> 	mov word [bp+4], ax
  3701                              <3> 	mov ax,[%4]
  3702                              <3> 	mov word [bp+6], ax
  3703                              <3> 	call proc_imul32
  3704                              <3> 	mov ax,sp
  3705                              <3> 	mov bp,ax
  3706                              <3> 	mov ax,%5
  3707                              <3> 	mov ds,ax
  3708                              <3> 	mov word ax, [bp+8]
  3709                              <3> 	mov word [%6+2], ax
  3710                              <3> 	mov word ax, [bp+0x0A]
  3711                              <3> 	mov word [%6], ax
  3712                              <3> 	stkclose 0x0C
  3713                              <3> %endmacro
  3714                              <3> 	
  3715                              <3> %macro cmp32 3
  3716                              <3> 	cmp32 cs, %1, cs, %2, %3
  3717                              <3> %endmacro	
  3718                              <3> 	
  3719                              <3> %macro cmp32 5
  3720                              <3> 	stkopen 9
  3721                              <3> 	mov ax,%1
  3722                              <3> 	mov ds,ax
  3723                              <3> 	mov word ax,[%2+2]
  3724                              <3> 	mov word [bp+0], ax
  3725                              <3> 	mov word ax,[%2]
  3726                              <3> 	mov word [bp+2], ax	
  3727                              <3> 	mov ax,%3
  3728                              <3> 	mov ds,ax
  3729                              <3> 	mov word ax,[%4+2]
  3730                              <3> 	mov word [bp+4], ax
  3731                              <3> 	mov word ax,[%4]
  3732                              <3> 	mov word [bp+6], ax	
  3733                              <3> 	call proc_cmp32
  3734                              <3> 	mov ax,sp
  3735                              <3> 	mov bp,ax
  3736                              <3> 	mov al,[bp+8]
  3737                              <3> 	mov byte %5,al
  3738                              <3> 	stkclose 9
  3739                              <3> %endmacro
  3740                              <3> 	
  3741                              <3> %macro shl32 2
  3742                              <3> 	shl32 cs, %1, %2
  3743                              <3> %endmacro	
  3744                              <3> 	
  3745                              <3> %macro shl32 3
  3746                              <3> 	stkopen 5
  3747                              <3> 	mov ax,%1
  3748                              <3> 	mov ds,ax
  3749                              <3> 	mov word ax,[%2+2]
  3750                              <3> 	mov word [bp+0], ax
  3751                              <3> 	mov word ax,[%2]
  3752                              <3> 	mov word [bp+2], ax
  3753                              <3> 	mov byte al, %3
  3754                              <3> 	mov byte [bp+4], al 
  3755                              <3> 	call proc_shl32
  3756                              <3> 	mov ax,sp
  3757                              <3> 	mov bp,ax
  3758                              <3> 	mov ax,%1
  3759                              <3> 	mov ds,ax
  3760                              <3> 	mov ax,[bp+0]
  3761                              <3> 	mov word [%2+2],ax
  3762                              <3> 	mov ax,[bp+2]
  3763                              <3> 	mov word [%2],ax
  3764                              <3> 	stkclose 5
  3765                              <3> %endmacro
  3766                              <3> 
  3767                              <3> 
  3768                              <3> %macro shr32 2
  3769                              <3> 	shr32 cs, %1, %2
  3770                              <3> %endmacro	
  3771                              <3> 	
  3772                              <3> %macro shr32 3
  3773                              <3> 	stkopen 5
  3774                              <3> 	mov ax,%1
  3775                              <3> 	mov ds,ax
  3776                              <3> 	mov word ax,[%2+2]
  3777                              <3> 	mov word [bp+0], ax
  3778                              <3> 	mov word ax,[%2]
  3779                              <3> 	mov word [bp+2], ax
  3780                              <3> 	mov byte al, %3
  3781                              <3> 	mov byte [bp+4], al 
  3782                              <3> 	call proc_shr32
  3783                              <3> 	mov ax,sp
  3784                              <3> 	mov bp,ax
  3785                              <3> 	mov ax,%1
  3786                              <3> 	mov ds,ax
  3787                              <3> 	mov ax,[bp+0]
  3788                              <3> 	mov word [%2+2],ax
  3789                              <3> 	mov ax,[bp+2]
  3790                              <3> 	mov word [%2],ax
  3791                              <3> 	stkclose 5
  3792                              <3> %endmacro
  3793                              <3> 
  3794                              <3> %macro inc16 2
  3795                              <3> 	mov ax,%1
  3796                              <3> 	mov ds,ax
  3797                              <3> 	inc word [%2]
  3798                              <3> %endmacro
  3799                              <3> 
  3800                              <3> %macro dec16 2
  3801                              <3> 	mov ax,%1
  3802                              <3> 	mov ds,ax
  3803                              <3> 	dec word [%2]
  3804                              <3> %endmacro
  3805                              <3> 
  3806                              <3> %macro add16 4	
  3807                              <3> 	mov ax,%3
  3808                              <3> 	mov ds,ax
  3809                              <3> 	mov bx,[%4]	
  3810                              <3> 	mov ax,%1
  3811                              <3> 	mov ds,ax	
  3812                              <3> 	add [%2],bx
  3813                              <3> %endmacro
  3814                              <3> 
  3815                              <3> %macro sub16 4
  3816                              <3> 	mov ax,%3
  3817                              <3> 	mov ds,ax
  3818                              <3> 	mov bx,[%4]
  3819                              <3> 	mov ax,%1
  3820                              <3> 	mov ds,ax
  3821                              <3> 	sub [%2],bx
  3822                              <3> %endmacro
  3823                              <3> 
  3824                              <3> %macro mul16 4
  3825                              <3> 	mov ax,%1
  3826                              <3> 	mov ds,ax
  3827                              <3> 	mov bx,[%2]
  3828                              <3> 	mov ax,%3
  3829                              <3> 	mov ds,ax
  3830                              <3> 	mov cx,[%4]
  3831                              <3> 	
  3832                              <3> 	mov ax,bx
  3833                              <3> 	imul cx
  3834                              <3> 	
  3835                              <3> 	mov dx,%1
  3836                              <3> 	mov ds,dx
  3837                              <3> 	mov [%2],ax
  3838                              <3> %endmacro
  3839                              <3> 
  3840                              <3> %macro div16 4
  3841                              <3> 	mov ax,%1
  3842                              <3> 	mov ds,ax
  3843                              <3> 	mov bx,[%2]
  3844                              <3> 	mov ax,%3
  3845                              <3> 	mov ds,ax
  3846                              <3> 	mov cx,[%4]
  3847                              <3> 	
  3848                              <3> 	xor dx,dx
  3849                              <3> 	mov ax,bx
  3850                              <3> 	idiv cx
  3851                              <3> 	
  3852                              <3> 	mov dx,%1
  3853                              <3> 	mov ds,dx
  3854                              <3> 	mov [%2],ax
  3855                              <3> %endmacro
  3856                              <3> 
  3857                              <3> 
  3858                              <3> %macro mod16 4
  3859                              <3> 	mov ax,%1
  3860                              <3> 	mov ds,ax
  3861                              <3> 	mov bx,[%2]
  3862                              <3> 	mov ax,%3
  3863                              <3> 	mov ds,ax
  3864                              <3> 	mov cx,[%4]
  3865                              <3> 	
  3866                              <3> 	xor dx,dx
  3867                              <3> 	mov ax,bx
  3868                              <3> 	idiv cx
  3869                              <3> 	
  3870                              <3> 	mov bx,%1
  3871                              <3> 	mov ds,bx
  3872                              <3> 	mov [%2],dx
  3873                              <3> %endmacro
  3874                              <3> 
  3875                              <3> %macro cmp16 5
  3876                              <3> 	mov ax,%1
  3877                              <3> 	mov ds,ax
  3878                              <3> 	mov bx,[%2]
  3879                              <3> 	mov ax,%3
  3880                              <3> 	mov ds,ax
  3881                              <3> 	mov	cx,[%4]
  3882                              <3> 	
  3883                              <3> 	cmp bx,cx
  3884                              <3> 	jg %%above
  3885                              <3> 	jl %%below
  3886                              <3> 		mov byte %5, 0
  3887                              <3> 		jmp %%endcmp
  3888                              <3> 	%%above:
  3889                              <3> 		mov byte %5, 1
  3890                              <3> 		jmp %%endcmp
  3891                              <3> 	%%below:
  3892                              <3> 		mov byte %5, -1
  3893                              <3> 	%%endcmp:
  3894                              <3> %endmacro
  3895                              <3> 
  3896                              <3> %macro chgsig 2
  3897                              <3> 	mov ax,%1
  3898                              <3> 	mov ds,ax
  3899                              <3> 	mov ax,[%2]
  3900                              <3> 	mov bx,0xFFFF
  3901                              <3> 	sub bx,ax
  3902                              <3> 	inc bx
  3903                              <3> 	mov [%2],bx
  3904                              <3> %endmacro
  3905                              <3> 	
  3906                              <3> %endif
  3907                              <2> 	
  3908                              <2> %macro __fltoint16 3
  3909                              <2> 	stkopen 0x06
  3910                              <2> 	mov word [bp+0],%1
  3911                              <2> 	mov word [bp+2],%2
  3912                              <2> 	call proc_fltoint16
  3913                              <2> 	push sp
  3914                              <2> 	pop bp
  3915                              <2> 	mov word %3,[bp+4]
  3916                              <2> 	stkclose 0x06
  3917                              <2> %endmacro
  3918                              <2> 
  3919                              <2> %macro __int16tofl 3	
  3920                              <2> 	stkopen 0x06
  3921                              <2> 	mov word [bp+0],%1
  3922                              <2> 	call proc_int16tofl
  3923                              <2> 	push sp
  3924                              <2> 	pop bp
  3925                              <2> 	mov word %2,[bp+2]
  3926                              <2> 	mov word %3,[bp+4]
  3927                              <2> 	stkclose 0x06
  3928                              <2> %endmacro
  3929                              <2> 		
  3930                              <2> %macro __fltoint32 4
  3931                              <2> 	stkopen 0x08
  3932                              <2> 	mov word [bp+0],%1
  3933                              <2> 	mov word [bp+2],%2
  3934                              <2> 	call proc_fltoint32
  3935                              <2> 	push sp
  3936                              <2> 	pop bp
  3937                              <2> 	mov word %3,[bp+4]
  3938                              <2> 	mov word %4,[bp+6]
  3939                              <2> 	stkclose 0x08
  3940                              <2> %endmacro
  3941                              <2> 
  3942                              <2> %macro __int32tofl 4
  3943                              <2> 	stkopen 0x08
  3944                              <2> 	mov word [bp+0],%1
  3945                              <2> 	mov word [bp+2],%2
  3946                              <2> 	call proc_int32tofl
  3947                              <2> 	push sp
  3948                              <2> 	pop bp
  3949                              <2> 	mov word %3,[bp+4]
  3950                              <2> 	mov word %4,[bp+6]
  3951                              <2> 	stkclose 0x08
  3952                              <2> %endmacro	
  3953                              <2> 
  3954                              <2> %macro __flcmp 5
  3955                              <2> 	stkopen 0x09
  3956                              <2> 	mov word [bp+0],%1
  3957                              <2> 	mov word [bp+2],%2
  3958                              <2> 	mov word [bp+4],%3
  3959                              <2> 	mov word [bp+6],%4
  3960                              <2> 	call proc_flcmp
  3961                              <2> 	push sp
  3962                              <2> 	pop bp
  3963                              <2> 	mov byte %5, [bp+8]
  3964                              <2> 	stkclose 0x09
  3965                              <2> %endmacro
  3966                              <2> 	
  3967                              <2> %macro __flshl 1
  3968                              <2> 	stkopen 0x02
  3969                              <2> 	mov word [bp+0],%1
  3970                              <2> 	call proc_flshl
  3971                              <2> 	push sp
  3972                              <2> 	pop bp
  3973                              <2> 	mov word %1,[bp+0]
  3974                              <2> 	stkclose 0x02
  3975                              <2> %endmacro	
  3976                              <2> 
  3977                              <2> %macro __flshr 1
  3978                              <2> 	stkopen 0x02
  3979                              <2> 	mov word [bp+0],%1
  3980                              <2> 	call proc_flshr
  3981                              <2> 	push sp
  3982                              <2> 	pop bp
  3983                              <2> 	mov word %1,[bp+0]
  3984                              <2> 	stkclose 0x02
  3985                              <2> %endmacro	
  3986                              <2> 	
  3987                              <2> %macro __flinvsig 1
  3988                              <2> 	stkopen 0x02
  3989                              <2> 	mov word [bp+0],%1
  3990                              <2> 	call proc_flinvsig
  3991                              <2> 	push sp
  3992                              <2> 	pop bp
  3993                              <2> 	mov word %1, [bp+0]
  3994                              <2> 	stkclose 0x02
  3995                              <2> %endmacro
  3996                              <2> 
  3997                              <2> %macro __flsetsig 1
  3998                              <2> 	stkopen 0x04
  3999                              <2> 	mov word [bp+0],%1
  4000                              <2> 	mov word [bp+2],0x8000
  4001                              <2> 	call proc_flsetsig
  4002                              <2> 	push sp
  4003                              <2> 	pop bp
  4004                              <2> 	mov word %1, [bp+0]
  4005                              <2> 	stkclose 0x04
  4006                              <2> %endmacro	
  4007                              <2> 
  4008                              <2> %macro __flclearsig 1
  4009                              <2> 	stkopen 0x04
  4010                              <2> 	mov word [bp+0],%1
  4011                              <2> 	mov word [bp+2],0
  4012                              <2> 	call proc_flclrsig
  4013                              <2> 	push sp
  4014                              <2> 	pop bp
  4015                              <2> 	mov word %1, [bp+0]
  4016                              <2> 	stkclose 0x04
  4017                              <2> %endmacro		
  4018                              <2> 	
  4019                              <2> %macro __fladd 6
  4020                              <2> 	stkopen 0x0E
  4021                              <2> 	mov word [bp+0],%1
  4022                              <2> 	mov word [bp+2],%2
  4023                              <2> 	mov word [bp+4],%3
  4024                              <2> 	mov word [bp+6],%4
  4025                              <2> 	mov word [bp+0x0C],0
  4026                              <2> 	call proc_fladdorsub
  4027                              <2> 	push sp
  4028                              <2> 	pop bp
  4029                              <2> 	mov word %5,[bp+8]
  4030                              <2> 	mov word %6,[bp+0x0A]
  4031                              <2> 	stkclose 0x0E
  4032                              <2> %endmacro
  4033                              <2> 
  4034                              <2> %macro __flsub 6
  4035                              <2> 	stkopen 0x0E
  4036                              <2> 	mov word [bp+0],%1
  4037                              <2> 	mov word [bp+2],%2
  4038                              <2> 	mov word [bp+4],%3
  4039                              <2> 	mov word [bp+6],%4
  4040                              <2> 	mov word [bp+0x0C],0x8000
  4041                              <2> 	call proc_fladdorsub
  4042                              <2> 	push sp
  4043                              <2> 	pop bp
  4044                              <2> 	mov word %5,[bp+8]
  4045                              <2> 	mov word %6,[bp+0x0A]
  4046                              <2> 	stkclose 0x0E
  4047                              <2> %endmacro
  4048                              <2> 
  4049                              <2> %macro __flmul 6
  4050                              <2> 	stkopen 0x0E
  4051                              <2> 	mov word [bp+0],%1
  4052                              <2> 	mov word [bp+2],%2
  4053                              <2> 	mov word [bp+4],%3
  4054                              <2> 	mov word [bp+6],%4
  4055                              <2> 	call proc_flmul
  4056                              <2> 	push sp
  4057                              <2> 	pop bp
  4058                              <2> 	mov word %5,[bp+8]
  4059                              <2> 	mov word %6,[bp+0x0A]
  4060                              <2> 	stkclose 0x0E
  4061                              <2> %endmacro
  4062                              <2> 
  4063                              <2> %macro __fldiv 6
  4064                              <2> 	stkopen 0x0E
  4065                              <2> 	mov word [bp+0],%1
  4066                              <2> 	mov word [bp+2],%2
  4067                              <2> 	mov word [bp+4],%3
  4068                              <2> 	mov word [bp+6],%4
  4069                              <2> 	call proc_fldiv
  4070                              <2> 	push sp
  4071                              <2> 	pop bp
  4072                              <2> 	mov word %5,[bp+8]
  4073                              <2> 	mov word %6,[bp+0x0A]
  4074                              <2> 	stkclose 0x0E
  4075                              <2> %endmacro
  4076                              <2> 
  4077                              <2> %macro __validate 7
  4078                              <2> 	stkopen 0x0D
  4079                              <2> 	mov word [bp+0],%1
  4080                              <2> 	mov word [bp+2],%2
  4081                              <2> 	mov word [bp+4],%3
  4082                              <2> 	mov word [bp+6],%4
  4083                              <2> 	call proc__validate
  4084                              <2> 	push sp
  4085                              <2> 	pop bp
  4086                              <2> 	mov word %5,[bp+8]
  4087                              <2> 	mov word %6,[bp+0x0A]
  4088                              <2> 	mov byte %7,[bp+0x0C]
  4089                              <2> 	stkclose 0x0D
  4090                              <2> %endmacro
  4091                              <2> 
  4092                              <2> %macro __div_validate 7
  4093                              <2> 	stkopen 0x0D
  4094                              <2> 	mov word [bp+0],%1
  4095                              <2> 	mov word [bp+2],%2
  4096                              <2> 	mov word [bp+4],%3
  4097                              <2> 	mov word [bp+6],%4
  4098                              <2> 	call proc__div_validate
  4099                              <2> 	push sp
  4100                              <2> 	pop bp
  4101                              <2> 	mov word %5,[bp+8]
  4102                              <2> 	mov word %6,[bp+0x0A]
  4103                              <2> 	mov byte %7,[bp+0x0C]
  4104                              <2> 	stkclose 0x0D
  4105                              <2> %endmacro
  4106                              <2> 
  4107                              <2> %macro __mul_validate 5
  4108                              <2> 	stkopen 0x09
  4109                              <2> 	mov word [bp+0],%1
  4110                              <2> 	mov word [bp+2],%2
  4111                              <2> 	call proc__mul_validate
  4112                              <2> 	push sp
  4113                              <2> 	pop bp
  4114                              <2> 	mov word %3,[bp+4]
  4115                              <2> 	mov word %4,[bp+6]
  4116                              <2> 	mov byte %5,[bp+8]
  4117                              <2> 	stkclose 0x09
  4118                              <2> %endmacro
  4119                              <2> 
  4120                              <2> %macro __addorsub_validate 7
  4121                              <2> 	stkopen 0x0D
  4122                              <2> 	mov word [bp+0],%1
  4123                              <2> 	mov word [bp+2],%2
  4124                              <2> 	mov word [bp+4],%3
  4125                              <2> 	mov word [bp+6],%4
  4126                              <2> 	call proc__addorsub_validate
  4127                              <2> 	push sp
  4128                              <2> 	pop bp
  4129                              <2> 	mov word %5,[bp+8]
  4130                              <2> 	mov word %6,[bp+0x0A]
  4131                              <2> 	mov byte %7,[bp+0x0C]
  4132                              <2> 	stkclose 0x0D
  4133                              <2> %endmacro
  4134                              <2> 
  4135                              <2> %macro __cmp_validate 4
  4136                              <2> 	stkopen 0x06
  4137                              <2> 	mov word [bp+0],%1
  4138                              <2> 	mov word [bp+2],%2
  4139                              <2> 	call proc__cmp_validate
  4140                              <2> 	push sp
  4141                              <2> 	pop bp
  4142                              <2> 	mov byte %3, [bp+4]
  4143                              <2> 	mov byte %4, [bp+5]
  4144                              <2> 	stkclose 0x06
  4145                              <2> %endmacro
  4146                              <2> 
  4147                              <2> %macro __iaddorsub32 7
  4148                              <2> 	stkopen 0x0D
  4149                              <2> 	mov word [bp+0],%1
  4150                              <2> 	mov word [bp+2],%2
  4151                              <2> 	mov word [bp+4],%3
  4152                              <2> 	mov word [bp+6],%4
  4153                              <2> 	mov word [bp+0x0C], %7
  4154                              <2> 	call proc__iaddorsub32
  4155                              <2> 	push sp
  4156                              <2> 	pop bp
  4157                              <2> 	mov word %5,[bp+8]
  4158                              <2> 	mov word %6,[bp+0x0A]
  4159                              <2> 	stkclose 0x0D
  4160                              <2> %endmacro
  4161                              <2> 
  4162                              <2> %macro __fldiv32 6
  4163                              <2> 	stkopen 0x11
  4164                              <2> 	mov word [bp+0],%1
  4165                              <2> 	mov word [bp+2],%2
  4166                              <2> 	mov word [bp+4],%3
  4167                              <2> 	mov word [bp+6],%4
  4168                              <2> 	call proc__fldiv32
  4169                              <2> 	push sp
  4170                              <2> 	pop bp
  4171                              <2> 	mov word %5,[bp+8]
  4172                              <2> 	mov word %6,[bp+0x0A]
  4173                              <2> 	stkclose 0x11
  4174                              <2> %endmacro
  4175                              <2> 
  4176                              <2> %macro __mul32_64 8
  4177                              <2> 	stkopen 0x10
  4178                              <2> 	mov word [bp+0],%1
  4179                              <2> 	mov word [bp+2],%2
  4180                              <2> 	mov word [bp+4],%3
  4181                              <2> 	mov word [bp+6],%4
  4182                              <2> 	call proc__mul32_64
  4183                              <2> 	push sp
  4184                              <2> 	pop bp
  4185                              <2> 	mov word %5,[bp+8]
  4186                              <2> 	mov word %6,[bp+0x0A]
  4187                              <2> 	mov word %7,[bp+0x0C]
  4188                              <2> 	mov word %8,[bp+0x0E]
  4189                              <2> 	stkclose 0x10
  4190                              <2> %endmacro
  4191                              <2> 
  4192                              <2> %macro __normalize 3
  4193                              <2> 	stkopen 0x06
  4194                              <2> 	mov word [bp+0],%1
  4195                              <2> 	mov word [bp+2],%2
  4196                              <2> 	mov word [bp+4],%3
  4197                              <2> 	call proc__normalize
  4198                              <2> 	push sp
  4199                              <2> 	pop bp
  4200                              <2> 	mov word %1,[bp+0]
  4201                              <2> 	mov word %2,[bp+2]
  4202                              <2> 	stkclose 0x06
  4203                              <2> %endmacro
  4204                              <2> 
  4205                              <2> section .data
  4206                              <2> 
  4207                              <2> proc_fltoint16:
  4208 000009F1 89E0                <2> 	mov ax,sp
  4209 000009F3 89C5                <2> 	mov bp,ax
  4210                              <2> 	
  4211 000009F5 8B4602              <2> 	mov ax,[bp+2]
  4212 000009F8 8B5E04              <2> 	mov bx,[bp+4]
  4213                              <2> 	__fltoint32 ax, ax, ax, bx
  4214                              <3>  stkopen 0x08
  4215 000009FB 83EC08              <4>  sub word sp, %1
  4216 000009FE 54                  <4>  push sp
  4217 000009FF 5D                  <4>  pop bp
  4218 00000A00 894600              <3>  mov word [bp+0],%1
  4219 00000A03 894602              <3>  mov word [bp+2],%2
  4220 00000A06 E86A00              <3>  call proc_fltoint32
  4221 00000A09 54                  <3>  push sp
  4222 00000A0A 5D                  <3>  pop bp
  4223 00000A0B 8B4604              <3>  mov word %3,[bp+4]
  4224 00000A0E 8B5E06              <3>  mov word %4,[bp+6]
  4225                              <3>  stkclose 0x08
  4226 00000A11 83C408              <4>  add word sp, %1
  4227                              <2> 	__int32to16 ax, bx, cx
  4228                              <3>  stkopen 0x06
  4229 00000A14 83EC06              <4>  sub word sp, %1
  4230 00000A17 54                  <4>  push sp
  4231 00000A18 5D                  <4>  pop bp
  4232 00000A19 894600              <3>  mov word [bp+0], %1
  4233 00000A1C 895E02              <3>  mov word [bp+2], %2
  4234 00000A1F E871FA              <3>  call proc_int32to16
  4235 00000A22 54                  <3>  push sp
  4236 00000A23 5D                  <3>  pop bp
  4237 00000A24 8B4E04              <3>  mov word %3, [bp+4]
  4238                              <3>  stkclose 0x06
  4239 00000A27 83C406              <4>  add word sp, %1
  4240                              <2> 	
  4241 00000A2A 89E0                <2> 	mov ax,sp
  4242 00000A2C 89C5                <2> 	mov bp,ax
  4243 00000A2E 894E06              <2> 	mov [bp+6],cx
  4244                              <2> 	
  4245 00000A31 C3                  <2> 	ret
  4246                              <2> 	
  4247                              <2> proc_int16tofl:
  4248 00000A32 89E0                <2> 	mov ax,sp
  4249 00000A34 89C5                <2> 	mov bp,ax
  4250                              <2> 	
  4251 00000A36 8B4602              <2> 	mov ax,[bp+2]
  4252                              <2> 	__int16to32 ax, ax, bx
  4253                              <3>  stkopen 0x06
  4254 00000A39 83EC06              <4>  sub word sp, %1
  4255 00000A3C 54                  <4>  push sp
  4256 00000A3D 5D                  <4>  pop bp
  4257 00000A3E 894600              <3>  mov word [bp+0],%1
  4258 00000A41 E827FA              <3>  call proc_int16to32
  4259 00000A44 54                  <3>  push sp
  4260 00000A45 5D                  <3>  pop bp
  4261 00000A46 8B4602              <3>  mov word %2, [bp+2]
  4262 00000A49 8B5E04              <3>  mov word %3, [bp+4]
  4263                              <3>  stkclose 0x06
  4264 00000A4C 83C406              <4>  add word sp, %1
  4265                              <2> 	__int32tofl ax, bx, cx, dx
  4266                              <3>  stkopen 0x08
  4267 00000A4F 83EC08              <4>  sub word sp, %1
  4268 00000A52 54                  <4>  push sp
  4269 00000A53 5D                  <4>  pop bp
  4270 00000A54 894600              <3>  mov word [bp+0],%1
  4271 00000A57 895E02              <3>  mov word [bp+2],%2
  4272 00000A5A E88E00              <3>  call proc_int32tofl
  4273 00000A5D 54                  <3>  push sp
  4274 00000A5E 5D                  <3>  pop bp
  4275 00000A5F 8B4E04              <3>  mov word %3,[bp+4]
  4276 00000A62 8B5606              <3>  mov word %4,[bp+6]
  4277                              <3>  stkclose 0x08
  4278 00000A65 83C408              <4>  add word sp, %1
  4279                              <2> 	
  4280 00000A68 89E0                <2> 	mov ax,sp
  4281 00000A6A 89C5                <2> 	mov bp,ax
  4282 00000A6C 894E04              <2> 	mov [bp+4],cx
  4283 00000A6F 895606              <2> 	mov [bp+6],dx
  4284                              <2> 
  4285 00000A72 C3                  <2> 	ret
  4286                              <2> 
  4287                              <2> proc_fltoint32:
  4288 00000A73 89E0                <2> 	mov ax,sp
  4289 00000A75 89C5                <2> 	mov bp,ax
  4290                              <2> 
  4291 00000A77 8B4602              <2> 	mov ax,[bp+2]
  4292 00000A7A 8B5E04              <2> 	mov bx,[bp+4]
  4293 00000A7D 25FF7F              <2> 	and ax,0x7FFF
  4294 00000A80 09D8                <2> 	or ax,bx
  4295 00000A82 83F800              <2> 	cmp ax,0
  4296 00000A85 7510                <2> 	jnz .continue
  4297                              <2> 	.zero:
  4298 00000A87 8B4602              <2> 		mov ax,[bp+2]
  4299 00000A8A 250080              <2> 		and ax,0x8000
  4300 00000A8D 894606              <2> 		mov word [bp+6],ax
  4301 00000A90 C746080000          <2> 		mov word [bp+8],0
  4302 00000A95 EB53                <2> 		jmp .done
  4303                              <2> 	.continue:
  4304                              <2> 	
  4305 00000A97 8B4E02              <2> 	mov cx,[bp+2]
  4306 00000A9A D1E1                <2> 	shl cx,1
  4307 00000A9C 80ED7F              <2> 	sub ch,0x7F
  4308 00000A9F 80FD00              <2> 	cmp ch,0
  4309 00000AA2 7CE3                <2> 	jl .zero
  4310                              <2> 	
  4311                              <2> 	;push cx	round	
  4312                              <2> 	
  4313 00000AA4 B117                <2> 	mov cl,23	
  4314 00000AA6 38CD                <2> 	cmp ch,cl
  4315 00000AA8 7302                <2> 	jae .endexp
  4316 00000AAA 28E9                <2> 		sub cl,ch
  4317                              <2> 	.endexp:
  4318                              <2> 	
  4319 00000AAC 8B4602              <2> 	mov ax,[bp+2]
  4320 00000AAF 83E07F              <2> 	and ax,0x007F
  4321 00000AB2 0D8000              <2> 	or ax,0x0080
  4322                              <2> 	
  4323 00000AB5 8B5E04              <2> 	mov bx,[bp+4]
  4324                              <2> 		
  4325                              <2> 	__shr32 ax, bx, cl
  4326                              <3>  stkopen 5
  4327 00000AB8 83EC05              <4>  sub word sp, %1
  4328 00000ABB 54                  <4>  push sp
  4329 00000ABC 5D                  <4>  pop bp
  4330 00000ABD 894600              <3>  mov word [bp+0], %1
  4331 00000AC0 895E02              <3>  mov word [bp+2], %2
  4332 00000AC3 884E04              <3>  mov byte [bp+4], %3
  4333 00000AC6 E834FD              <3>  call proc_shr32
  4334 00000AC9 54                  <3>  push sp
  4335 00000ACA 5D                  <3>  pop bp
  4336 00000ACB 8B4600              <3>  mov word %1, [bp+0]
  4337 00000ACE 8B5E02              <3>  mov word %2, [bp+2]
  4338                              <3>  stkclose 5
  4339 00000AD1 83C405              <4>  add word sp, %1
  4340                              <2> 		
  4341 00000AD4 89E2                <2> 	mov dx,sp
  4342 00000AD6 89D5                <2> 	mov bp,dx
  4343 00000AD8 83C502              <2> 	add bp,2
  4344                              <2> 	
  4345 00000ADB 8B4E02              <2> 	mov cx,[bp+2]
  4346 00000ADE 81E10080            <2> 	and cx,0x8000
  4347 00000AE2 01C8                <2> 	add ax,cx
  4348                              <2> 		 
  4349 00000AE4 894606              <2> 	mov [bp+6],ax
  4350 00000AE7 895E08              <2> 	mov [bp+8],bx
  4351                              <2> 	
  4352                              <2> 	;; round
  4353                              <2> 	%if 0	
  4354                              <2> 	pop cx
  4355                              <2> 	add ch,9
  4356                              <2> 	
  4357                              <2> 	mov ax,[bp+2]
  4358                              <2> 	mov bx,[bp+4]
  4359                              <2> 	__shl32 ax, bx, ch	
  4360                              <2> 	and ax,0x8000
  4361                              <2> 	cmp ax,0
  4362                              <2> 	jz .done
  4363                              <2> 		mov ax,sp
  4364                              <2> 		mov bp,ax		
  4365                              <2> 		add word [bp+8],1		
  4366                              <2> 		adc word [bp+6],0
  4367                              <2> 	%endif	
  4368                              <2> 			
  4369                              <2> 	.done:
  4370                              <2> 	
  4371 00000AEA C3                  <2> 	ret
  4372                              <2> 	
  4373                              <2> proc_int32tofl:
  4374 00000AEB 89E0                <2> 	mov ax,sp
  4375 00000AED 89C5                <2> 	mov bp,ax
  4376                              <2> 	
  4377 00000AEF 8B4602              <2> 	mov ax,[bp+2]
  4378 00000AF2 8B5E04              <2> 	mov bx,[bp+4]
  4379                              <2> 	
  4380 00000AF5 89C1                <2> 	mov cx,ax
  4381 00000AF7 81E1FF7F            <2> 	and cx,0x7FFF
  4382 00000AFB 09D9                <2> 	or cx,bx
  4383 00000AFD 83F900              <2> 	cmp cx,0
  4384 00000B00 7511                <2> 	jnz .continue
  4385 00000B02 8B4602              <2> 		mov ax,[bp+2]
  4386 00000B05 250080              <2> 		and ax,0x8000
  4387 00000B08 894606              <2> 		mov word [bp+6],ax
  4388 00000B0B C746080000          <2> 		mov word [bp+8],0
  4389 00000B10 E99100              <2> 		jmp .done
  4390                              <2> 	.continue:
  4391                              <2> 	
  4392 00000B13 83E07F              <2> 	and ax,0x007F	
  4393                              <2> 	
  4394 00000B16 894606              <2> 	mov [bp+6],ax
  4395 00000B19 895E08              <2> 	mov [bp+8],bx	
  4396                              <2> 		
  4397                              <2> 	__lzbitcount32 ax, bx, ch		
  4398 00000B1C 53                  <3>  push %2
  4399                              <3>  __lzbitcount16 %1, cl
  4400                              <4>  stkopen 3
  4401 00000B1D 83EC03              <5>  sub word sp, %1
  4402 00000B20 54                  <5>  push sp
  4403 00000B21 5D                  <5>  pop bp
  4404 00000B22 894600              <4>  mov word [bp+0], %1
  4405 00000B25 E85AFD              <4>  call proc__lzbitcount16
  4406 00000B28 54                  <4>  push sp
  4407 00000B29 5D                  <4>  pop bp
  4408 00000B2A 8A4E02              <4>  mov byte %2, [bp+2]
  4409                              <4>  stkclose 3
  4410 00000B2D 83C403              <5>  add word sp, %1
  4411 00000B30 58                  <3>  pop ax
  4412 00000B31 80F910              <3>  cmp cl,16
  4413 00000B34 7217                <3>  jb .end
  4414 00000B36 51                  <3>  push cx
  4415                              <3>  __lzbitcount16 ax, al
  4416                              <4>  stkopen 3
  4417 00000B37 83EC03              <5>  sub word sp, %1
  4418 00000B3A 54                  <5>  push sp
  4419 00000B3B 5D                  <5>  pop bp
  4420 00000B3C 894600              <4>  mov word [bp+0], %1
  4421 00000B3F E840FD              <4>  call proc__lzbitcount16
  4422 00000B42 54                  <4>  push sp
  4423 00000B43 5D                  <4>  pop bp
  4424 00000B44 8A4602              <4>  mov byte %2, [bp+2]
  4425                              <4>  stkclose 3
  4426 00000B47 83C403              <5>  add word sp, %1
  4427 00000B4A 59                  <3>  pop cx
  4428 00000B4B 00C1                <3>  add cl,al
  4429                              <3>  .end:
  4430 00000B4D 88CD                <3>  mov byte %3, cl
  4431 00000B4F B120                <2> 	mov cl,32
  4432 00000B51 28E9                <2> 	sub cl,ch
  4433                              <2> 	
  4434 00000B53 80F918              <2> 	cmp cl,24
  4435 00000B56 732C                <2> 	jae .endmantissa
  4436                              <2> 	
  4437 00000B58 B218                <2> 	mov dl,24
  4438 00000B5A 28CA                <2> 	sub dl,cl				
  4439                              <2> 	
  4440 00000B5C 89E0                <2> 	mov ax,sp
  4441 00000B5E 89C5                <2> 	mov bp,ax
  4442 00000B60 8B4606              <2> 	mov ax,[bp+6]
  4443 00000B63 8B5E08              <2> 	mov bx,[bp+8]
  4444                              <2> 	
  4445 00000B66 51                  <2> 	push cx	
  4446                              <2> 	__shl32 ax, bx, dl	
  4447                              <3>  stkopen 5
  4448 00000B67 83EC05              <4>  sub word sp, %1
  4449 00000B6A 54                  <4>  push sp
  4450 00000B6B 5D                  <4>  pop bp
  4451 00000B6C 894600              <3>  mov word [bp+0], %1
  4452 00000B6F 895E02              <3>  mov word [bp+2], %2
  4453 00000B72 885604              <3>  mov byte [bp+4], %3
  4454 00000B75 E83EFC              <3>  call proc_shl32
  4455 00000B78 54                  <3>  push sp
  4456 00000B79 5D                  <3>  pop bp
  4457 00000B7A 8B4600              <3>  mov word %1, [bp+0]
  4458 00000B7D 8B5E02              <3>  mov word %2, [bp+2]
  4459                              <3>  stkclose 5
  4460 00000B80 83C405              <4>  add word sp, %1
  4461 00000B83 59                  <2> 	pop cx
  4462                              <2> 	
  4463                              <2> 	.endmantissa:
  4464                              <2> 	
  4465 00000B84 83E07F              <2> 	and ax,0x007F
  4466                              <2> 		
  4467 00000B87 80C17E              <2> 	add cl,0x7E
  4468 00000B8A C1E108              <2> 	shl cx,8
  4469 00000B8D D1E9                <2> 	shr cx,1
  4470 00000B8F 01C8                <2> 	add ax,cx
  4471                              <2> 	
  4472 00000B91 89E1                <2> 	mov cx,sp
  4473 00000B93 89CD                <2> 	mov bp,cx
  4474                              <2> 	
  4475 00000B95 8B4E02              <2> 	mov cx,[bp+2]
  4476 00000B98 81E10080            <2> 	and cx,0x8000	
  4477 00000B9C 01C8                <2> 	add ax,cx
  4478                              <2> 		
  4479 00000B9E 894606              <2> 	mov [bp+6],ax
  4480 00000BA1 895E08              <2> 	mov [bp+8],bx
  4481                              <2> 	
  4482                              <2> 	.done:		
  4483                              <2> 	
  4484 00000BA4 C3                  <2> 	ret
  4485                              <2> 	
  4486                              <2> proc_flcmp:
  4487 00000BA5 89E0                <2> 	mov ax,sp
  4488 00000BA7 89C5                <2> 	mov bp,ax		
  4489                              <2> 	
  4490 00000BA9 8B4602              <2> 	mov ax,[bp+2]
  4491 00000BAC 8B5E06              <2> 	mov bx,[bp+6]
  4492 00000BAF 55                  <2> 	push bp
  4493                              <2> 	__cmp_validate ax, bx, cl, dl
  4494                              <3>  stkopen 0x06
  4495 00000BB0 83EC06              <4>  sub word sp, %1
  4496 00000BB3 54                  <4>  push sp
  4497 00000BB4 5D                  <4>  pop bp
  4498 00000BB5 894600              <3>  mov word [bp+0],%1
  4499 00000BB8 895E02              <3>  mov word [bp+2],%2
  4500 00000BBB E84C09              <3>  call proc__cmp_validate
  4501 00000BBE 54                  <3>  push sp
  4502 00000BBF 5D                  <3>  pop bp
  4503 00000BC0 8A4E04              <3>  mov byte %3, [bp+4]
  4504 00000BC3 8A5605              <3>  mov byte %4, [bp+5]
  4505                              <3>  stkclose 0x06
  4506 00000BC6 83C406              <4>  add word sp, %1
  4507 00000BC9 5D                  <2> 	pop bp
  4508 00000BCA 80FA00              <2> 	cmp dl,0
  4509 00000BCD 7505                <2> 	jnz .continue
  4510 00000BCF 884E0A              <2> 		mov byte [bp+0x0A], cl
  4511 00000BD2 EB5E                <2> 		jmp .done		
  4512                              <2> 	.continue:
  4513                              <2> 			
  4514 00000BD4 8B4602              <2> 	mov ax,[bp+2]
  4515 00000BD7 8B5E06              <2> 	mov bx,[bp+6]
  4516 00000BDA 250080              <2> 	and ax,0x8000
  4517 00000BDD 81E30080            <2> 	and bx,0x8000	
  4518 00000BE1 39D8                <2> 	cmp ax,bx
  4519 00000BE3 723C                <2> 	jb .above
  4520 00000BE5 773E                <2> 	ja .below
  4521                              <2> 	
  4522 00000BE7 8B4602              <2> 	mov ax,[bp+2]
  4523 00000BEA 8B5E06              <2> 	mov bx,[bp+6]
  4524 00000BED D1E0                <2> 	shl ax,1
  4525 00000BEF D1E3                <2> 	shl bx,1
  4526 00000BF1 38FC                <2> 	cmp ah,bh
  4527 00000BF3 772C                <2> 	ja .above
  4528 00000BF5 722E                <2> 	jb .below
  4529                              <2> 	
  4530 00000BF7 8B4602              <2> 	mov ax,[bp+2]
  4531 00000BFA 8B5E04              <2> 	mov bx,[bp+4]
  4532 00000BFD 8B4E06              <2> 	mov cx,[bp+6]
  4533 00000C00 8B5608              <2> 	mov dx,[bp+8]
  4534                              <2> 	
  4535                              <2> 	__cmp32 ax, bx, cx, dx, cl
  4536                              <3>  stkopen 9
  4537 00000C03 83EC09              <4>  sub word sp, %1
  4538 00000C06 54                  <4>  push sp
  4539 00000C07 5D                  <4>  pop bp
  4540 00000C08 894600              <3>  mov word [bp+0], %1
  4541 00000C0B 895E02              <3>  mov word [bp+2], %2
  4542 00000C0E 894E04              <3>  mov word [bp+4], %3
  4543 00000C11 895606              <3>  mov word [bp+6], %4
  4544 00000C14 E874FB              <3>  call proc_cmp32
  4545 00000C17 54                  <3>  push sp
  4546 00000C18 5D                  <3>  pop bp
  4547 00000C19 8A4E08              <3>  mov byte %5, [bp+8]
  4548                              <3>  stkclose 9
  4549 00000C1C 83C409              <4>  add word sp, %1
  4550 00000C1F EB0A                <2> 	jmp .endcmp
  4551                              <2> 		
  4552                              <2> 	.above:
  4553 00000C21 B101                <2> 		mov cl, 1
  4554 00000C23 EB06                <2> 		jmp .endcmp
  4555                              <2> 	.below:
  4556 00000C25 B1FF                <2> 		mov cl, -1
  4557 00000C27 EB02                <2> 		jmp .endcmp
  4558                              <2> 	.equal:	
  4559 00000C29 B100                <2> 		mov cl, 0	
  4560                              <2> 	.endcmp:
  4561                              <2> 	
  4562 00000C2B 89E0                <2> 	mov ax,sp
  4563 00000C2D 89C5                <2> 	mov bp,ax
  4564 00000C2F 884E0A              <2> 	mov byte [bp+0x0A], cl
  4565                              <2> 	
  4566                              <2> 	.done:
  4567                              <2> 					
  4568 00000C32 C3                  <2> 	ret
  4569                              <2> 
  4570                              <2> proc_flshl:
  4571 00000C33 89E0                <2> 	mov ax,sp
  4572 00000C35 89C5                <2> 	mov bp,ax
  4573                              <2> 	
  4574 00000C37 8B4602              <2> 	mov ax,[bp+2]
  4575 00000C3A 25807F              <2> 	and ax,0x7F80
  4576 00000C3D D1E0                <2> 	shl ax,1
  4577 00000C3F FEC4                <2> 	inc ah	
  4578 00000C41 D1E8                <2> 	shr ax,1
  4579                              <2> 	
  4580 00000C43 8B5E02              <2> 	mov bx,[bp+2]
  4581 00000C46 81E37F80            <2> 	and bx,0x807F
  4582 00000C4A 01C3                <2> 	add bx,ax
  4583                              <2> 	
  4584 00000C4C 895E02              <2> 	mov [bp+2],bx		
  4585                              <2> 	
  4586 00000C4F C3                  <2> 	ret
  4587                              <2> 
  4588                              <2> proc_flshr:
  4589 00000C50 89E0                <2> 	mov ax,sp
  4590 00000C52 89C5                <2> 	mov bp,ax
  4591                              <2> 	
  4592 00000C54 8B4602              <2> 	mov ax,[bp+2]
  4593 00000C57 25807F              <2> 	and ax,0x7F80
  4594 00000C5A D1E0                <2> 	shl ax,1
  4595 00000C5C FECC                <2> 	dec ah	
  4596 00000C5E D1E8                <2> 	shr ax,1
  4597                              <2> 	
  4598 00000C60 8B5E02              <2> 	mov bx,[bp+2]
  4599 00000C63 81E37F80            <2> 	and bx,0x807F
  4600 00000C67 01C3                <2> 	add bx,ax
  4601                              <2> 	
  4602 00000C69 895E02              <2> 	mov [bp+2],bx	
  4603                              <2> 	
  4604 00000C6C C3                  <2> 	ret
  4605                              <2> 
  4606                              <2> proc_fldiv:
  4607 00000C6D 89E0                <2> 	mov ax,sp
  4608 00000C6F 89C5                <2> 	mov bp,ax
  4609                              <2> 				
  4610                              <2> 	; sinal
  4611                              <2> 	
  4612 00000C71 8B4602              <2> 	mov ax,[bp+2]
  4613 00000C74 8B5E06              <2> 	mov bx,[bp+6]
  4614 00000C77 250080              <2> 	and ax,0x8000
  4615 00000C7A 81E30080            <2> 	and bx,0x8000
  4616 00000C7E 31D8                <2> 	xor ax,bx
  4617 00000C80 89460A              <2> 	mov word [bp+0x0A],ax
  4618                              <2> 		
  4619                              <2> 	; sinal calculado e setado
  4620                              <2> 
  4621                              <2> 	; valores especiais
  4622                              <2> 	
  4623 00000C83 8B4602              <2> 	mov ax,[bp+2]
  4624 00000C86 8B5E04              <2> 	mov bx,[bp+4]
  4625 00000C89 8B4E06              <2> 	mov cx,[bp+6]
  4626 00000C8C 8B5608              <2> 	mov dx,[bp+8]
  4627                              <2> 	__validate ax, bx, cx, dx, ax, bx, cl
  4628                              <3>  stkopen 0x0D
  4629 00000C8F 83EC0D              <4>  sub word sp, %1
  4630 00000C92 54                  <4>  push sp
  4631 00000C93 5D                  <4>  pop bp
  4632 00000C94 894600              <3>  mov word [bp+0],%1
  4633 00000C97 895E02              <3>  mov word [bp+2],%2
  4634 00000C9A 894E04              <3>  mov word [bp+4],%3
  4635 00000C9D 895606              <3>  mov word [bp+6],%4
  4636 00000CA0 E81707              <3>  call proc__validate
  4637 00000CA3 54                  <3>  push sp
  4638 00000CA4 5D                  <3>  pop bp
  4639 00000CA5 8B4608              <3>  mov word %5,[bp+8]
  4640 00000CA8 8B5E0A              <3>  mov word %6,[bp+0x0A]
  4641 00000CAB 8A4E0C              <3>  mov byte %7,[bp+0x0C]
  4642                              <3>  stkclose 0x0D
  4643 00000CAE 83C40D              <4>  add word sp, %1
  4644 00000CB1 80F900              <2> 	cmp cl,0
  4645 00000CB4 750D                <2> 	jnz .continue
  4646 00000CB6 89E2                <2> 		mov dx,sp
  4647 00000CB8 89D5                <2> 		mov bp,dx
  4648 00000CBA 01460A              <2> 		add word [bp+0x0A],ax
  4649 00000CBD 895E0C              <2> 		mov word [bp+0x0C],bx						
  4650 00000CC0 E9C800              <2> 		jmp .done	
  4651                              <2> 	.continue:
  4652                              <2> 	
  4653 00000CC3 89E0                <2> 	mov ax,sp
  4654 00000CC5 89C5                <2> 	mov bp,ax
  4655 00000CC7 8B4602              <2> 	mov ax,[bp+2]
  4656 00000CCA 8B5E04              <2> 	mov bx,[bp+4]
  4657 00000CCD 8B4E06              <2> 	mov cx,[bp+6]
  4658 00000CD0 8B5608              <2> 	mov dx,[bp+8]
  4659                              <2> 	__div_validate ax, bx, cx, dx, ax, bx, cl
  4660                              <3>  stkopen 0x0D
  4661 00000CD3 83EC0D              <4>  sub word sp, %1
  4662 00000CD6 54                  <4>  push sp
  4663 00000CD7 5D                  <4>  pop bp
  4664 00000CD8 894600              <3>  mov word [bp+0],%1
  4665 00000CDB 895E02              <3>  mov word [bp+2],%2
  4666 00000CDE 894E04              <3>  mov word [bp+4],%3
  4667 00000CE1 895606              <3>  mov word [bp+6],%4
  4668 00000CE4 E83A07              <3>  call proc__div_validate
  4669 00000CE7 54                  <3>  push sp
  4670 00000CE8 5D                  <3>  pop bp
  4671 00000CE9 8B4608              <3>  mov word %5,[bp+8]
  4672 00000CEC 8B5E0A              <3>  mov word %6,[bp+0x0A]
  4673 00000CEF 8A4E0C              <3>  mov byte %7,[bp+0x0C]
  4674                              <3>  stkclose 0x0D
  4675 00000CF2 83C40D              <4>  add word sp, %1
  4676 00000CF5 80F900              <2> 	cmp cl,0
  4677 00000CF8 750D                <2> 	jnz .continue2
  4678 00000CFA 89E2                <2> 		mov dx,sp
  4679 00000CFC 89D5                <2> 		mov bp,dx
  4680 00000CFE 01460A              <2> 		add word [bp+0x0A],ax
  4681 00000D01 895E0C              <2> 		mov word [bp+0x0C],bx				
  4682 00000D04 E98400              <2> 		jmp .done	
  4683                              <2> 	.continue2:
  4684                              <2> 	; valores especiais tratados
  4685                              <2> 			
  4686                              <2> 	; expoente parcial
  4687                              <2> 
  4688 00000D07 89E0                <2> 	mov ax,sp
  4689 00000D09 89C5                <2> 	mov bp,ax
  4690 00000D0B 8B4602              <2> 	mov ax,[bp+2]
  4691 00000D0E 8B5E06              <2> 	mov bx,[bp+6]
  4692 00000D11 25807F              <2> 	and ax,0x7F80
  4693 00000D14 81E3807F            <2> 	and bx,0x7F80
  4694 00000D18 D1E0                <2> 	shl ax,1
  4695 00000D1A D1E3                <2> 	shl bx,1		
  4696                              <2> 			
  4697 00000D1C 28FC                <2> 	sub ah,bh		
  4698 00000D1E 80C47F              <2> 	add ah,0x7F
  4699                              <2> 	
  4700 00000D21 50                  <2> 	push ax
  4701                              <2> 		
  4702                              <2> 	; expoente parcial calculado
  4703                              <2> 	
  4704                              <2> 	; mantissa
  4705                              <2> 
  4706 00000D22 8B4602              <2> 	mov ax,[bp+2]
  4707 00000D25 8B5E04              <2> 	mov bx,[bp+4]
  4708 00000D28 8B4E06              <2> 	mov cx,[bp+6]
  4709 00000D2B 8B5608              <2> 	mov dx,[bp+8]
  4710 00000D2E 83E07F              <2> 	and ax,0x007F
  4711 00000D31 83E17F              <2> 	and cx,0x007F
  4712 00000D34 0D8000              <2> 	or ax,0x0080
  4713 00000D37 81C98000            <2> 	or cx,0x0080
  4714                              <2> 	
  4715                              <2> 	__fldiv32 ax, bx, cx, dx, cx, dx
  4716                              <3>  stkopen 0x11
  4717 00000D3B 83EC11              <4>  sub word sp, %1
  4718 00000D3E 54                  <4>  push sp
  4719 00000D3F 5D                  <4>  pop bp
  4720 00000D40 894600              <3>  mov word [bp+0],%1
  4721 00000D43 895E02              <3>  mov word [bp+2],%2
  4722 00000D46 894E04              <3>  mov word [bp+4],%3
  4723 00000D49 895606              <3>  mov word [bp+6],%4
  4724 00000D4C E87505              <3>  call proc__fldiv32
  4725 00000D4F 54                  <3>  push sp
  4726 00000D50 5D                  <3>  pop bp
  4727 00000D51 8B4E08              <3>  mov word %5,[bp+8]
  4728 00000D54 8B560A              <3>  mov word %6,[bp+0x0A]
  4729                              <3>  stkclose 0x11
  4730 00000D57 83C411              <4>  add word sp, %1
  4731                              <2> 		
  4732 00000D5A 89E0                <2> 	mov ax,sp
  4733 00000D5C 89C5                <2> 	mov bp,ax
  4734 00000D5E 83C502              <2> 	add bp,2
  4735                              <2> 	
  4736 00000D61 034E0A              <2> 	add cx,[bp+0x0A]
  4737                              <2> 			
  4738 00000D64 58                  <2> 	pop ax	
  4739                              <2> 	__normalize cx, dx, ax
  4740                              <3>  stkopen 0x06
  4741 00000D65 83EC06              <4>  sub word sp, %1
  4742 00000D68 54                  <4>  push sp
  4743 00000D69 5D                  <4>  pop bp
  4744 00000D6A 894E00              <3>  mov word [bp+0],%1
  4745 00000D6D 895602              <3>  mov word [bp+2],%2
  4746 00000D70 894604              <3>  mov word [bp+4],%3
  4747 00000D73 E8B303              <3>  call proc__normalize
  4748 00000D76 54                  <3>  push sp
  4749 00000D77 5D                  <3>  pop bp
  4750 00000D78 8B4E00              <3>  mov word %1,[bp+0]
  4751 00000D7B 8B5602              <3>  mov word %2,[bp+2]
  4752                              <3>  stkclose 0x06
  4753 00000D7E 83C406              <4>  add word sp, %1
  4754                              <2> 	
  4755 00000D81 89E0                <2> 	mov ax,sp
  4756 00000D83 89C5                <2> 	mov bp,ax
  4757 00000D85 894E0A              <2> 	mov [bp+0x0A],cx
  4758 00000D88 89560C              <2> 	mov [bp+0x0C],dx
  4759                              <2> 	
  4760                              <2> 	.done:
  4761                              <2> 			
  4762 00000D8B C3                  <2> 	ret
  4763                              <2> 
  4764                              <2> proc_flmul:
  4765 00000D8C 89E0                <2> 	mov ax,sp
  4766 00000D8E 89C5                <2> 	mov bp,ax
  4767                              <2> 	
  4768                              <2> 	; sinal
  4769                              <2> 	
  4770 00000D90 8B4602              <2> 	mov ax,[bp+2]
  4771 00000D93 8B5E06              <2> 	mov bx,[bp+6]
  4772 00000D96 250080              <2> 	and ax,0x8000
  4773 00000D99 81E30080            <2> 	and bx,0x8000
  4774 00000D9D 31D8                <2> 	xor ax,bx
  4775 00000D9F 89460A              <2> 	mov word [bp+0x0A],ax
  4776                              <2> 	
  4777                              <2> 	; sinal calculado e setado
  4778                              <2> 
  4779                              <2> 	; valores especiais
  4780                              <2> 
  4781 00000DA2 8B4602              <2> 	mov ax,[bp+2]
  4782 00000DA5 8B5E04              <2> 	mov bx,[bp+4]
  4783 00000DA8 8B4E06              <2> 	mov cx,[bp+6]
  4784 00000DAB 8B5608              <2> 	mov dx,[bp+8]
  4785                              <2> 	__validate ax, bx, cx, dx, ax, bx, cl
  4786                              <3>  stkopen 0x0D
  4787 00000DAE 83EC0D              <4>  sub word sp, %1
  4788 00000DB1 54                  <4>  push sp
  4789 00000DB2 5D                  <4>  pop bp
  4790 00000DB3 894600              <3>  mov word [bp+0],%1
  4791 00000DB6 895E02              <3>  mov word [bp+2],%2
  4792 00000DB9 894E04              <3>  mov word [bp+4],%3
  4793 00000DBC 895606              <3>  mov word [bp+6],%4
  4794 00000DBF E8F805              <3>  call proc__validate
  4795 00000DC2 54                  <3>  push sp
  4796 00000DC3 5D                  <3>  pop bp
  4797 00000DC4 8B4608              <3>  mov word %5,[bp+8]
  4798 00000DC7 8B5E0A              <3>  mov word %6,[bp+0x0A]
  4799 00000DCA 8A4E0C              <3>  mov byte %7,[bp+0x0C]
  4800                              <3>  stkclose 0x0D
  4801 00000DCD 83C40D              <4>  add word sp, %1
  4802 00000DD0 80F900              <2> 	cmp cl,0
  4803 00000DD3 750D                <2> 	jnz .continue
  4804 00000DD5 89E2                <2> 		mov dx,sp
  4805 00000DD7 89D5                <2> 		mov bp,dx
  4806 00000DD9 01460A              <2> 		add word [bp+0x0A],ax
  4807 00000DDC 895E0C              <2> 		mov word [bp+0x0C],bx						
  4808 00000DDF E95501              <2> 		jmp .done	
  4809                              <2> 	.continue:
  4810                              <2> 
  4811 00000DE2 89E0                <2> 	mov ax,sp
  4812 00000DE4 89C5                <2> 	mov bp,ax
  4813 00000DE6 8B4602              <2> 	mov ax,[bp+2]
  4814 00000DE9 8B4E06              <2> 	mov cx,[bp+6]
  4815                              <2> 	__mul_validate ax, cx, ax, bx, cl
  4816                              <3>  stkopen 0x09
  4817 00000DEC 83EC09              <4>  sub word sp, %1
  4818 00000DEF 54                  <4>  push sp
  4819 00000DF0 5D                  <4>  pop bp
  4820 00000DF1 894600              <3>  mov word [bp+0],%1
  4821 00000DF4 894E02              <3>  mov word [bp+2],%2
  4822 00000DF7 E88106              <3>  call proc__mul_validate
  4823 00000DFA 54                  <3>  push sp
  4824 00000DFB 5D                  <3>  pop bp
  4825 00000DFC 8B4604              <3>  mov word %3,[bp+4]
  4826 00000DFF 8B5E06              <3>  mov word %4,[bp+6]
  4827 00000E02 8A4E08              <3>  mov byte %5,[bp+8]
  4828                              <3>  stkclose 0x09
  4829 00000E05 83C409              <4>  add word sp, %1
  4830 00000E08 80F900              <2> 	cmp cl,0
  4831 00000E0B 750D                <2> 	jnz .continue2
  4832 00000E0D 89E2                <2> 		mov dx,sp
  4833 00000E0F 89D5                <2> 		mov bp,dx
  4834 00000E11 01460A              <2> 		add word [bp+0x0A],ax
  4835 00000E14 895E0C              <2> 		mov word [bp+0x0C],bx				
  4836 00000E17 E91D01              <2> 		jmp .done	
  4837                              <2> 	.continue2:
  4838                              <2> 	; valores especiais tratados
  4839                              <2> 		
  4840                              <2> 	; expoente parcial
  4841                              <2> 
  4842 00000E1A 89E0                <2> 	mov ax,sp
  4843 00000E1C 89C5                <2> 	mov bp,ax
  4844 00000E1E 8B4602              <2> 	mov ax,[bp+2]
  4845 00000E21 8B5E06              <2> 	mov bx,[bp+6]
  4846 00000E24 25807F              <2> 	and ax,0x7F80
  4847 00000E27 81E3807F            <2> 	and bx,0x7F80
  4848 00000E2B D1E0                <2> 	shl ax,1
  4849 00000E2D D1E3                <2> 	shl bx,1		
  4850                              <2> 			
  4851 00000E2F 80EC7F              <2> 	sub ah,0x7F
  4852 00000E32 80EF7F              <2> 	sub bh,0x7F
  4853                              <2> 				
  4854 00000E35 00FC                <2> 	add ah,bh
  4855 00000E37 80C47F              <2> 	add ah,0x7F
  4856                              <2> 	
  4857 00000E3A 50                  <2> 	push ax
  4858                              <2> 	
  4859                              <2> 	; expoente parcial calculado	
  4860                              <2> 	
  4861                              <2> 	; mantissa
  4862                              <2> 	
  4863 00000E3B 8B4602              <2> 	mov ax,[bp+2]
  4864 00000E3E 8B5E04              <2> 	mov bx,[bp+4]
  4865 00000E41 8B4E06              <2> 	mov cx,[bp+6]
  4866 00000E44 8B5608              <2> 	mov dx,[bp+8]	
  4867                              <2> 	
  4868 00000E47 83E07F              <2> 	and ax, 0x007F
  4869 00000E4A 83E17F              <2> 	and cx, 0x007F
  4870 00000E4D 0D8000              <2> 	or ax, 0x0080
  4871 00000E50 81C98000            <2> 	or cx, 0x0080
  4872                              <2> 		
  4873                              <2> 	__mul32_64 ax, bx, cx, dx, ax, bx, cx, dx
  4874                              <3>  stkopen 0x10
  4875 00000E54 83EC10              <4>  sub word sp, %1
  4876 00000E57 54                  <4>  push sp
  4877 00000E58 5D                  <4>  pop bp
  4878 00000E59 894600              <3>  mov word [bp+0],%1
  4879 00000E5C 895E02              <3>  mov word [bp+2],%2
  4880 00000E5F 894E04              <3>  mov word [bp+4],%3
  4881 00000E62 895606              <3>  mov word [bp+6],%4
  4882 00000E65 E81104              <3>  call proc__mul32_64
  4883 00000E68 54                  <3>  push sp
  4884 00000E69 5D                  <3>  pop bp
  4885 00000E6A 8B4608              <3>  mov word %5,[bp+8]
  4886 00000E6D 8B5E0A              <3>  mov word %6,[bp+0x0A]
  4887 00000E70 8B4E0C              <3>  mov word %7,[bp+0x0C]
  4888 00000E73 8B560E              <3>  mov word %8,[bp+0x0E]
  4889                              <3>  stkclose 0x10
  4890 00000E76 83C410              <4>  add word sp, %1
  4891                              <2> 	
  4892 00000E79 51                  <2> 	push cx
  4893                              <2> 	__shl32 ax, bx, 8
  4894                              <3>  stkopen 5
  4895 00000E7A 83EC05              <4>  sub word sp, %1
  4896 00000E7D 54                  <4>  push sp
  4897 00000E7E 5D                  <4>  pop bp
  4898 00000E7F 894600              <3>  mov word [bp+0], %1
  4899 00000E82 895E02              <3>  mov word [bp+2], %2
  4900 00000E85 C6460408            <3>  mov byte [bp+4], %3
  4901 00000E89 E82AF9              <3>  call proc_shl32
  4902 00000E8C 54                  <3>  push sp
  4903 00000E8D 5D                  <3>  pop bp
  4904 00000E8E 8B4600              <3>  mov word %1, [bp+0]
  4905 00000E91 8B5E02              <3>  mov word %2, [bp+2]
  4906                              <3>  stkclose 5
  4907 00000E94 83C405              <4>  add word sp, %1
  4908 00000E97 59                  <2> 	pop cx
  4909 00000E98 88EB                <2> 	mov bl,ch
  4910                              <2> 								
  4911 00000E9A 50                  <2> 	push ax
  4912 00000E9B 53                  <2> 	push bx
  4913                              <2> 	__lzbitcount32 ax, bx, cl
  4914 00000E9C 53                  <3>  push %2
  4915                              <3>  __lzbitcount16 %1, cl
  4916                              <4>  stkopen 3
  4917 00000E9D 83EC03              <5>  sub word sp, %1
  4918 00000EA0 54                  <5>  push sp
  4919 00000EA1 5D                  <5>  pop bp
  4920 00000EA2 894600              <4>  mov word [bp+0], %1
  4921 00000EA5 E8DAF9              <4>  call proc__lzbitcount16
  4922 00000EA8 54                  <4>  push sp
  4923 00000EA9 5D                  <4>  pop bp
  4924 00000EAA 8A4E02              <4>  mov byte %2, [bp+2]
  4925                              <4>  stkclose 3
  4926 00000EAD 83C403              <5>  add word sp, %1
  4927 00000EB0 58                  <3>  pop ax
  4928 00000EB1 80F910              <3>  cmp cl,16
  4929 00000EB4 7217                <3>  jb .end
  4930 00000EB6 51                  <3>  push cx
  4931                              <3>  __lzbitcount16 ax, al
  4932                              <4>  stkopen 3
  4933 00000EB7 83EC03              <5>  sub word sp, %1
  4934 00000EBA 54                  <5>  push sp
  4935 00000EBB 5D                  <5>  pop bp
  4936 00000EBC 894600              <4>  mov word [bp+0], %1
  4937 00000EBF E8C0F9              <4>  call proc__lzbitcount16
  4938 00000EC2 54                  <4>  push sp
  4939 00000EC3 5D                  <4>  pop bp
  4940 00000EC4 8A4602              <4>  mov byte %2, [bp+2]
  4941                              <4>  stkclose 3
  4942 00000EC7 83C403              <5>  add word sp, %1
  4943 00000ECA 59                  <3>  pop cx
  4944 00000ECB 00C1                <3>  add cl,al
  4945                              <3>  .end:
  4946 00000ECD 88C9                <3>  mov byte %3, cl
  4947 00000ECF 5B                  <2> 	pop bx
  4948 00000ED0 58                  <2> 	pop ax
  4949                              <2> 		
  4950 00000ED1 80E908              <2> 	sub cl,8	
  4951 00000ED4 80F908              <2> 	cmp cl,8
  4952 00000ED7 7402                <2> 	je .equal
  4953 00000ED9 7F06                <2> 	jg .great
  4954                              <2> 	.equal:	
  4955 00000EDB 5A                  <2> 		pop dx
  4956 00000EDC FEC6                <2> 		inc dh
  4957 00000EDE 52                  <2> 		push dx
  4958 00000EDF EB1C                <2> 		jmp .endcmp
  4959                              <2> 	.great:
  4960                              <2> 		__shl32 ax, bx, cl
  4961                              <3>  stkopen 5
  4962 00000EE1 83EC05              <4>  sub word sp, %1
  4963 00000EE4 54                  <4>  push sp
  4964 00000EE5 5D                  <4>  pop bp
  4965 00000EE6 894600              <3>  mov word [bp+0], %1
  4966 00000EE9 895E02              <3>  mov word [bp+2], %2
  4967 00000EEC 884E04              <3>  mov byte [bp+4], %3
  4968 00000EEF E8C4F8              <3>  call proc_shl32
  4969 00000EF2 54                  <3>  push sp
  4970 00000EF3 5D                  <3>  pop bp
  4971 00000EF4 8B4600              <3>  mov word %1, [bp+0]
  4972 00000EF7 8B5E02              <3>  mov word %2, [bp+2]
  4973                              <3>  stkclose 5
  4974 00000EFA 83C405              <4>  add word sp, %1
  4975                              <2> 	.endcmp:
  4976                              <2> 	
  4977 00000EFD 89E1                <2> 	mov cx,sp
  4978 00000EFF 89CD                <2> 	mov bp,cx
  4979 00000F01 83C502              <2> 	add bp,2
  4980                              <2> 	
  4981 00000F04 01460A              <2> 	add word [bp+0x0A],ax
  4982 00000F07 895E0C              <2> 	mov word [bp+0x0C],bx
  4983                              <2> 	
  4984                              <2> 	; mantissa setada e expoente calculado
  4985                              <2> 				
  4986 00000F0A 8B4E0A              <2> 	mov cx,[bp+0x0A]
  4987 00000F0D 8B560C              <2> 	mov dx,[bp+0x0C]
  4988                              <2> 	
  4989 00000F10 58                  <2> 	pop ax						
  4990                              <2> 	__normalize cx, dx, ax	; normaliza, preserva sinal e seta expoente	
  4991                              <3>  stkopen 0x06
  4992 00000F11 83EC06              <4>  sub word sp, %1
  4993 00000F14 54                  <4>  push sp
  4994 00000F15 5D                  <4>  pop bp
  4995 00000F16 894E00              <3>  mov word [bp+0],%1
  4996 00000F19 895602              <3>  mov word [bp+2],%2
  4997 00000F1C 894604              <3>  mov word [bp+4],%3
  4998 00000F1F E80702              <3>  call proc__normalize
  4999 00000F22 54                  <3>  push sp
  5000 00000F23 5D                  <3>  pop bp
  5001 00000F24 8B4E00              <3>  mov word %1,[bp+0]
  5002 00000F27 8B5602              <3>  mov word %2,[bp+2]
  5003                              <3>  stkclose 0x06
  5004 00000F2A 83C406              <4>  add word sp, %1
  5005                              <2> 		
  5006 00000F2D 89E0                <2> 	mov ax,sp
  5007 00000F2F 89C5                <2> 	mov bp,ax
  5008 00000F31 894E0A              <2> 	mov [bp+0x0A],cx
  5009 00000F34 89560C              <2> 	mov [bp+0x0C],dx		
  5010                              <2> 
  5011                              <2> 	.done:
  5012                              <2> 																	
  5013 00000F37 C3                  <2> 	ret
  5014                              <2> 	
  5015                              <2> proc_fladdorsub:	
  5016                              <2> 	; valores especiais
  5017 00000F38 89E0                <2> 	mov ax,sp
  5018 00000F3A 89C5                <2> 	mov bp,ax
  5019 00000F3C 8B4602              <2> 	mov ax,[bp+2]
  5020 00000F3F 8B5E04              <2> 	mov bx,[bp+4]
  5021 00000F42 8B4E06              <2> 	mov cx,[bp+6]
  5022 00000F45 81E10080            <2> 	and cx,0x8000
  5023 00000F49 334E0E              <2> 	xor word cx,[bp+0x0E]	
  5024 00000F4C 8B5606              <2> 	mov dx,[bp+6]
  5025 00000F4F 81E2FF7F            <2> 	and dx,0x7FFF
  5026 00000F53 01D1                <2> 	add cx,dx	
  5027 00000F55 8B5608              <2> 	mov dx,[bp+8]
  5028                              <2> 	__validate ax, bx, cx, dx, ax, bx, cl
  5029                              <3>  stkopen 0x0D
  5030 00000F58 83EC0D              <4>  sub word sp, %1
  5031 00000F5B 54                  <4>  push sp
  5032 00000F5C 5D                  <4>  pop bp
  5033 00000F5D 894600              <3>  mov word [bp+0],%1
  5034 00000F60 895E02              <3>  mov word [bp+2],%2
  5035 00000F63 894E04              <3>  mov word [bp+4],%3
  5036 00000F66 895606              <3>  mov word [bp+6],%4
  5037 00000F69 E84E04              <3>  call proc__validate
  5038 00000F6C 54                  <3>  push sp
  5039 00000F6D 5D                  <3>  pop bp
  5040 00000F6E 8B4608              <3>  mov word %5,[bp+8]
  5041 00000F71 8B5E0A              <3>  mov word %6,[bp+0x0A]
  5042 00000F74 8A4E0C              <3>  mov byte %7,[bp+0x0C]
  5043                              <3>  stkclose 0x0D
  5044 00000F77 83C40D              <4>  add word sp, %1
  5045 00000F7A 80F900              <2> 	cmp cl,0
  5046 00000F7D 750D                <2> 	jnz .continue
  5047 00000F7F 89E2                <2> 		mov dx,sp
  5048 00000F81 89D5                <2> 		mov bp,dx		
  5049 00000F83 89460A              <2> 		mov word [bp+0x0A],ax
  5050 00000F86 895E0C              <2> 		mov word [bp+0x0C],bx										
  5051 00000F89 E99C01              <2> 		jmp .done	
  5052                              <2> 	.continue:
  5053                              <2> 	
  5054 00000F8C 89E0                <2> 	mov ax,sp
  5055 00000F8E 89C5                <2> 	mov bp,ax
  5056 00000F90 8B4602              <2> 	mov ax,[bp+2]
  5057 00000F93 8B5E04              <2> 	mov bx,[bp+4]
  5058 00000F96 8B4E06              <2> 	mov cx,[bp+6]
  5059 00000F99 81E10080            <2> 	and cx,0x8000
  5060 00000F9D 334E0E              <2> 	xor word cx,[bp+0x0E]	
  5061 00000FA0 8B5606              <2> 	mov dx,[bp+6]
  5062 00000FA3 81E2FF7F            <2> 	and dx,0x7FFF
  5063 00000FA7 01D1                <2> 	add cx,dx
  5064 00000FA9 8B5608              <2> 	mov dx,[bp+8]
  5065                              <2> 	__addorsub_validate ax, bx, cx, dx, ax, bx, cl
  5066                              <3>  stkopen 0x0D
  5067 00000FAC 83EC0D              <4>  sub word sp, %1
  5068 00000FAF 54                  <4>  push sp
  5069 00000FB0 5D                  <4>  pop bp
  5070 00000FB1 894600              <3>  mov word [bp+0],%1
  5071 00000FB4 895E02              <3>  mov word [bp+2],%2
  5072 00000FB7 894E04              <3>  mov word [bp+4],%3
  5073 00000FBA 895606              <3>  mov word [bp+6],%4
  5074 00000FBD E8EC04              <3>  call proc__addorsub_validate
  5075 00000FC0 54                  <3>  push sp
  5076 00000FC1 5D                  <3>  pop bp
  5077 00000FC2 8B4608              <3>  mov word %5,[bp+8]
  5078 00000FC5 8B5E0A              <3>  mov word %6,[bp+0x0A]
  5079 00000FC8 8A4E0C              <3>  mov byte %7,[bp+0x0C]
  5080                              <3>  stkclose 0x0D
  5081 00000FCB 83C40D              <4>  add word sp, %1
  5082 00000FCE 80F900              <2> 	cmp cl,0
  5083 00000FD1 750D                <2> 	jnz .continue2
  5084 00000FD3 89E2                <2> 		mov dx,sp
  5085 00000FD5 89D5                <2> 		mov bp,dx					
  5086 00000FD7 89460A              <2> 		mov word [bp+0x0A],ax
  5087 00000FDA 895E0C              <2> 		mov word [bp+0x0C],bx
  5088 00000FDD E94801              <2> 		jmp .done	
  5089                              <2> 	.continue2:
  5090                              <2> 	
  5091                              <2> 	; valores especiais tratados	
  5092                              <2> 
  5093 00000FE0 89E0                <2> 	mov ax,sp
  5094 00000FE2 89C5                <2> 	mov bp,ax	
  5095 00000FE4 8B4602              <2> 	mov ax,[bp+2]
  5096 00000FE7 8B5E06              <2> 	mov bx,[bp+6]
  5097                              <2> 	
  5098 00000FEA D1E0                <2> 	shl ax,1
  5099 00000FEC D1E3                <2> 	shl bx,1
  5100 00000FEE 88E5                <2> 	mov ch,ah	
  5101 00000FF0 28FD                <2> 	sub ch,bh	
  5102                              <2> 		
  5103 00000FF2 80FD00              <2> 	cmp ch,0
  5104 00000FF5 7402                <2> 	jz .expzero
  5105 00000FF7 EB1E                <2> 	jmp .expnzero
  5106                              <2> 	.expzero:
  5107 00000FF9 50                  <2> 		push ax
  5108 00000FFA 8B4602              <2> 		mov ax,[bp+2]
  5109 00000FFD 8B5E04              <2> 		mov bx,[bp+4]
  5110 00001000 8B4E06              <2> 		mov cx,[bp+6]
  5111 00001003 8B5608              <2> 		mov dx,[bp+8]
  5112 00001006 257F80              <2> 		and ax,0x807F
  5113 00001009 81E17F80            <2> 		and cx,0x807F
  5114 0000100D 0D8000              <2> 		or ax,0x0080
  5115 00001010 81C98000            <2> 		or cx,0x0080
  5116                              <2> 												
  5117 00001014 E99A00              <2> 		jmp .endexpcmp
  5118                              <2> 	.expnzero:
  5119                              <2> 				
  5120 00001017 80FD00              <2> 		cmp ch,0
  5121 0000101A 7F05                <2> 		jg .exp1great
  5122 0000101C 7C49                <2> 		jl .exp1less
  5123 0000101E E99000              <2> 		jmp .endexpcmp
  5124                              <2> 		.exp1great:					
  5125 00001021 50                  <2> 			push ax
  5126                              <2> 		
  5127 00001022 8B4606              <2> 			mov ax,[bp+6]
  5128 00001025 8B5E08              <2> 			mov bx,[bp+8]
  5129 00001028 83E07F              <2> 			and ax,0x007F
  5130 0000102B 0D8000              <2> 			or ax,0x0080
  5131                              <2> 						
  5132 0000102E 55                  <2> 			push bp
  5133                              <2> 			__shr32 ax, bx, ch
  5134                              <3>  stkopen 5
  5135 0000102F 83EC05              <4>  sub word sp, %1
  5136 00001032 54                  <4>  push sp
  5137 00001033 5D                  <4>  pop bp
  5138 00001034 894600              <3>  mov word [bp+0], %1
  5139 00001037 895E02              <3>  mov word [bp+2], %2
  5140 0000103A 886E04              <3>  mov byte [bp+4], %3
  5141 0000103D E8BDF7              <3>  call proc_shr32
  5142 00001040 54                  <3>  push sp
  5143 00001041 5D                  <3>  pop bp
  5144 00001042 8B4600              <3>  mov word %1, [bp+0]
  5145 00001045 8B5E02              <3>  mov word %2, [bp+2]
  5146                              <3>  stkclose 5
  5147 00001048 83C405              <4>  add word sp, %1
  5148 0000104B 5D                  <2> 			pop bp		
  5149                              <2> 				
  5150 0000104C 8B5606              <2> 			mov dx,[bp+6]
  5151 0000104F 81E20080            <2> 			and dx,0x8000
  5152 00001053 01D0                <2> 			add ax,dx			
  5153                              <2> 			
  5154 00001055 89C1                <2> 			mov cx,ax
  5155 00001057 89DA                <2> 			mov dx,bx
  5156 00001059 8B4602              <2> 			mov ax,[bp+2]
  5157 0000105C 8B5E04              <2> 			mov bx,[bp+4]										
  5158                              <2> 									
  5159 0000105F 257F80              <2> 			and ax,0x807F
  5160 00001062 0D8000              <2> 			or ax,0x0080
  5161                              <2> 						
  5162 00001065 EB4A                <2> 			jmp .endexp1cmp	
  5163                              <2> 		.exp1less:
  5164 00001067 88E9                <2> 			mov cl,ch
  5165 00001069 B5FF                <2> 			mov ch,0xFF
  5166 0000106B 28CD                <2> 			sub ch,cl
  5167 0000106D FEC5                <2> 			inc ch
  5168 0000106F 53                  <2> 			push bx		
  5169                              <2> 		
  5170 00001070 8B4602              <2> 			mov ax,[bp+2]
  5171 00001073 8B5E04              <2> 			mov bx,[bp+4]
  5172 00001076 83E07F              <2> 			and ax,0x007F
  5173 00001079 0D8000              <2> 			or ax,0x0080
  5174                              <2> 						
  5175 0000107C 55                  <2> 			push bp
  5176                              <2> 			__shr32 ax, bx, ch
  5177                              <3>  stkopen 5
  5178 0000107D 83EC05              <4>  sub word sp, %1
  5179 00001080 54                  <4>  push sp
  5180 00001081 5D                  <4>  pop bp
  5181 00001082 894600              <3>  mov word [bp+0], %1
  5182 00001085 895E02              <3>  mov word [bp+2], %2
  5183 00001088 886E04              <3>  mov byte [bp+4], %3
  5184 0000108B E86FF7              <3>  call proc_shr32
  5185 0000108E 54                  <3>  push sp
  5186 0000108F 5D                  <3>  pop bp
  5187 00001090 8B4600              <3>  mov word %1, [bp+0]
  5188 00001093 8B5E02              <3>  mov word %2, [bp+2]
  5189                              <3>  stkclose 5
  5190 00001096 83C405              <4>  add word sp, %1
  5191 00001099 5D                  <2> 			pop bp
  5192                              <2> 								
  5193 0000109A 8B5602              <2> 			mov dx,[bp+2]
  5194 0000109D 81E20080            <2> 			and dx,0x8000
  5195 000010A1 01D0                <2> 			add ax,dx			
  5196                              <2> 			
  5197 000010A3 8B4E06              <2> 			mov cx,[bp+6]
  5198 000010A6 8B5608              <2> 			mov dx,[bp+8]										
  5199                              <2> 									
  5200 000010A9 81E17F80            <2> 			and cx,0x807F
  5201 000010AD 81C98000            <2> 			or cx,0x0080
  5202                              <2> 									
  5203                              <2> 		.endexp1cmp:
  5204                              <2> 		
  5205                              <2> 	.endexpcmp:			
  5206                              <2> 	
  5207 000010B1 837E0E00            <2> 	cmp word [bp+0x0E],0
  5208 000010B5 7526                <2> 	jnz .sub
  5209                              <2> 		__iaddorsub32 ax, bx, cx, dx, ax, bx, 0
  5210                              <3>  stkopen 0x0D
  5211 000010B7 83EC0D              <4>  sub word sp, %1
  5212 000010BA 54                  <4>  push sp
  5213 000010BB 5D                  <4>  pop bp
  5214 000010BC 894600              <3>  mov word [bp+0],%1
  5215 000010BF 895E02              <3>  mov word [bp+2],%2
  5216 000010C2 894E04              <3>  mov word [bp+4],%3
  5217 000010C5 895606              <3>  mov word [bp+6],%4
  5218 000010C8 C7460C0000          <3>  mov word [bp+0x0C], %7
  5219 000010CD E81201              <3>  call proc__iaddorsub32
  5220 000010D0 54                  <3>  push sp
  5221 000010D1 5D                  <3>  pop bp
  5222 000010D2 8B4608              <3>  mov word %5,[bp+8]
  5223 000010D5 8B5E0A              <3>  mov word %6,[bp+0x0A]
  5224                              <3>  stkclose 0x0D
  5225 000010D8 83C40D              <4>  add word sp, %1
  5226 000010DB EB24                <2> 		jmp .endop
  5227                              <2> 	.sub:
  5228                              <2> 		__iaddorsub32 ax, bx, cx, dx, ax, bx, 0x8000
  5229                              <3>  stkopen 0x0D
  5230 000010DD 83EC0D              <4>  sub word sp, %1
  5231 000010E0 54                  <4>  push sp
  5232 000010E1 5D                  <4>  pop bp
  5233 000010E2 894600              <3>  mov word [bp+0],%1
  5234 000010E5 895E02              <3>  mov word [bp+2],%2
  5235 000010E8 894E04              <3>  mov word [bp+4],%3
  5236 000010EB 895606              <3>  mov word [bp+6],%4
  5237 000010EE C7460C0080          <3>  mov word [bp+0x0C], %7
  5238 000010F3 E8EC00              <3>  call proc__iaddorsub32
  5239 000010F6 54                  <3>  push sp
  5240 000010F7 5D                  <3>  pop bp
  5241 000010F8 8B4608              <3>  mov word %5,[bp+8]
  5242 000010FB 8B5E0A              <3>  mov word %6,[bp+0x0A]
  5243                              <3>  stkclose 0x0D
  5244 000010FE 83C40D              <4>  add word sp, %1
  5245                              <2> 	.endop:
  5246                              <2> 						
  5247 00001101 59                  <2> 	pop cx
  5248                              <2> 	
  5249                              <2> 	__normalize ax, bx, cx
  5250                              <3>  stkopen 0x06
  5251 00001102 83EC06              <4>  sub word sp, %1
  5252 00001105 54                  <4>  push sp
  5253 00001106 5D                  <4>  pop bp
  5254 00001107 894600              <3>  mov word [bp+0],%1
  5255 0000110A 895E02              <3>  mov word [bp+2],%2
  5256 0000110D 894E04              <3>  mov word [bp+4],%3
  5257 00001110 E81600              <3>  call proc__normalize
  5258 00001113 54                  <3>  push sp
  5259 00001114 5D                  <3>  pop bp
  5260 00001115 8B4600              <3>  mov word %1,[bp+0]
  5261 00001118 8B5E02              <3>  mov word %2,[bp+2]
  5262                              <3>  stkclose 0x06
  5263 0000111B 83C406              <4>  add word sp, %1
  5264                              <2> 	
  5265 0000111E 89E1                <2> 	mov cx,sp
  5266 00001120 89CD                <2> 	mov bp,cx
  5267 00001122 89460A              <2> 	mov word [bp+0x0A],ax
  5268 00001125 895E0C              <2> 	mov word [bp+0x0C],bx
  5269                              <2> 									
  5270                              <2> 	.done:		
  5271                              <2> 							
  5272 00001128 C3                  <2> 	ret
  5273                              <2> 	
  5274                              <2> proc__normalize:
  5275 00001129 89E0                <2> 	mov ax,sp
  5276 0000112B 89C5                <2> 	mov bp,ax	
  5277                              <2> 
  5278 0000112D 8B4E02              <2> 	mov cx,[bp+2]	
  5279 00001130 8B5604              <2> 	mov dx,[bp+4]
  5280 00001133 8B5E06              <2> 	mov bx,[bp+6]
  5281                              <2> 					
  5282 00001136 89C8                <2> 	mov ax,cx
  5283 00001138 250080              <2> 	and ax,0x8000			
  5284 0000113B 894602              <2> 	mov [bp+2],ax	
  5285                              <2> 					
  5286 0000113E 81E1FF7F            <2> 	and cx,0x7FFF
  5287                              <2> 			
  5288 00001142 51                  <2> 	push cx
  5289 00001143 52                  <2> 	push dx
  5290 00001144 53                  <2> 	push bx
  5291                              <2> 	__lzbitcount32 cx, dx, al	
  5292 00001145 52                  <3>  push %2
  5293                              <3>  __lzbitcount16 %1, cl
  5294                              <4>  stkopen 3
  5295 00001146 83EC03              <5>  sub word sp, %1
  5296 00001149 54                  <5>  push sp
  5297 0000114A 5D                  <5>  pop bp
  5298 0000114B 894E00              <4>  mov word [bp+0], %1
  5299 0000114E E831F7              <4>  call proc__lzbitcount16
  5300 00001151 54                  <4>  push sp
  5301 00001152 5D                  <4>  pop bp
  5302 00001153 8A4E02              <4>  mov byte %2, [bp+2]
  5303                              <4>  stkclose 3
  5304 00001156 83C403              <5>  add word sp, %1
  5305 00001159 58                  <3>  pop ax
  5306 0000115A 80F910              <3>  cmp cl,16
  5307 0000115D 7217                <3>  jb .end
  5308 0000115F 51                  <3>  push cx
  5309                              <3>  __lzbitcount16 ax, al
  5310                              <4>  stkopen 3
  5311 00001160 83EC03              <5>  sub word sp, %1
  5312 00001163 54                  <5>  push sp
  5313 00001164 5D                  <5>  pop bp
  5314 00001165 894600              <4>  mov word [bp+0], %1
  5315 00001168 E817F7              <4>  call proc__lzbitcount16
  5316 0000116B 54                  <4>  push sp
  5317 0000116C 5D                  <4>  pop bp
  5318 0000116D 8A4602              <4>  mov byte %2, [bp+2]
  5319                              <4>  stkclose 3
  5320 00001170 83C403              <5>  add word sp, %1
  5321 00001173 59                  <3>  pop cx
  5322 00001174 00C1                <3>  add cl,al
  5323                              <3>  .end:
  5324 00001176 88C8                <3>  mov byte %3, cl
  5325 00001178 5B                  <2> 	pop bx
  5326 00001179 5A                  <2> 	pop dx
  5327 0000117A 59                  <2> 	pop cx								
  5328                              <2> 		
  5329 0000117B 3C08                <2> 	cmp al,8					
  5330 0000117D 7204                <2> 	jb .shr
  5331 0000117F 7728                <2> 	ja .shl
  5332 00001181 EB4A                <2> 	jmp .endshrl
  5333                              <2> 	.shr:			
  5334 00001183 B408                <2> 		mov ah,0x08
  5335 00001185 28C4                <2> 		sub ah,al
  5336 00001187 00E7                <2> 		add bh,ah
  5337 00001189 53                  <2> 		push bx
  5338                              <2> 		__shr32 cx, dx, ah
  5339                              <3>  stkopen 5
  5340 0000118A 83EC05              <4>  sub word sp, %1
  5341 0000118D 54                  <4>  push sp
  5342 0000118E 5D                  <4>  pop bp
  5343 0000118F 894E00              <3>  mov word [bp+0], %1
  5344 00001192 895602              <3>  mov word [bp+2], %2
  5345 00001195 886604              <3>  mov byte [bp+4], %3
  5346 00001198 E862F6              <3>  call proc_shr32
  5347 0000119B 54                  <3>  push sp
  5348 0000119C 5D                  <3>  pop bp
  5349 0000119D 8B4E00              <3>  mov word %1, [bp+0]
  5350 000011A0 8B5602              <3>  mov word %2, [bp+2]
  5351                              <3>  stkclose 5
  5352 000011A3 83C405              <4>  add word sp, %1
  5353 000011A6 5B                  <2> 		pop bx
  5354 000011A7 EB24                <2> 		jmp .endshrl
  5355                              <2> 	.shl:		
  5356 000011A9 B408                <2> 		mov ah,0x08
  5357 000011AB 28E0                <2> 		sub al,ah
  5358 000011AD 28C7                <2> 		sub bh,al			
  5359 000011AF 53                  <2> 		push bx
  5360                              <2> 		__shl32 cx, dx, al
  5361                              <3>  stkopen 5
  5362 000011B0 83EC05              <4>  sub word sp, %1
  5363 000011B3 54                  <4>  push sp
  5364 000011B4 5D                  <4>  pop bp
  5365 000011B5 894E00              <3>  mov word [bp+0], %1
  5366 000011B8 895602              <3>  mov word [bp+2], %2
  5367 000011BB 884604              <3>  mov byte [bp+4], %3
  5368 000011BE E8F5F5              <3>  call proc_shl32
  5369 000011C1 54                  <3>  push sp
  5370 000011C2 5D                  <3>  pop bp
  5371 000011C3 8B4E00              <3>  mov word %1, [bp+0]
  5372 000011C6 8B5602              <3>  mov word %2, [bp+2]
  5373                              <3>  stkclose 5
  5374 000011C9 83C405              <4>  add word sp, %1
  5375 000011CC 5B                  <2> 		pop bx			
  5376                              <2> 	.endshrl:											
  5377                              <2> 								
  5378 000011CD 30DB                <2> 	xor bl,bl
  5379 000011CF D1EB                <2> 	shr bx,1	
  5380 000011D1 83E17F              <2> 	and cx,0x007F	
  5381                              <2> 		
  5382 000011D4 89E0                <2> 	mov ax,sp
  5383 000011D6 89C5                <2> 	mov bp,ax
  5384 000011D8 015E02              <2> 	add word [bp+2],bx
  5385 000011DB 014E02              <2> 	add word [bp+2],cx	
  5386 000011DE 895604              <2> 	mov word [bp+4],dx
  5387                              <2> 	
  5388 000011E1 C3                  <2> 	ret
  5389                              <2> 
  5390                              <2> proc__iaddorsub32:
  5391 000011E2 89E0                <2> 	mov ax,sp
  5392 000011E4 89C5                <2> 	mov bp,ax
  5393                              <2> 	
  5394 000011E6 8B4602              <2> 	mov ax,[bp+2]
  5395 000011E9 8B5E04              <2> 	mov bx,[bp+4]
  5396 000011EC 8B4E06              <2> 	mov cx,[bp+6]
  5397 000011EF 8B5608              <2> 	mov dx,[bp+8]	
  5398                              <2> 	
  5399 000011F2 50                  <2> 	push ax	
  5400 000011F3 250080              <2> 	and ax, 0x8000
  5401 000011F6 83F800              <2> 	cmp ax,0
  5402 000011F9 741B                <2> 	jz .endv1neg
  5403 000011FB 58                  <2> 		pop ax
  5404 000011FC 51                  <2> 		push cx
  5405 000011FD 52                  <2> 		push dx
  5406                              <2> 		
  5407 000011FE B9FFFF              <2> 		mov cx,0xFFFF
  5408 00001201 BAFFFF              <2> 		mov dx,0xFFFF
  5409 00001204 25FF7F              <2> 		and ax,0x7FFF
  5410 00001207 29DA                <2> 		sub dx,bx
  5411 00001209 19C1                <2> 		sbb cx,ax
  5412 0000120B 42                  <2> 		inc dx
  5413 0000120C 83D100              <2> 		adc cx,0
  5414 0000120F 89C8                <2> 		mov ax,cx
  5415 00001211 89D3                <2> 		mov bx,dx
  5416                              <2> 		
  5417 00001213 5A                  <2> 		pop dx
  5418 00001214 59                  <2> 		pop cx
  5419 00001215 50                  <2> 		push ax	
  5420                              <2> 	.endv1neg:		
  5421 00001216 58                  <2> 	pop ax	
  5422                              <2> 		
  5423 00001217 51                  <2> 	push cx
  5424 00001218 81E10080            <2> 	and cx,0x8000
  5425 0000121C 83F900              <2> 	cmp cx,0
  5426 0000121F 741C                <2> 	jz .endv2neg
  5427 00001221 59                  <2> 		pop cx
  5428 00001222 50                  <2> 		push ax
  5429 00001223 53                  <2> 		push bx
  5430                              <2> 		
  5431 00001224 B8FFFF              <2> 		mov ax,0xFFFF
  5432 00001227 BBFFFF              <2> 		mov bx,0xFFFF
  5433 0000122A 81E1FF7F            <2> 		and cx,0x7FFF
  5434 0000122E 29D3                <2> 		sub bx,dx
  5435 00001230 19C8                <2> 		sbb ax,cx
  5436 00001232 43                  <2> 		inc bx
  5437 00001233 83D000              <2> 		adc ax,0
  5438 00001236 89C1                <2> 		mov cx,ax
  5439 00001238 89DA                <2> 		mov dx,bx
  5440                              <2> 		
  5441 0000123A 5B                  <2> 		pop bx
  5442 0000123B 58                  <2> 		pop ax
  5443 0000123C 51                  <2> 		push cx
  5444                              <2> 	.endv2neg:	
  5445 0000123D 59                  <2> 	pop cx
  5446                              <2> 					
  5447 0000123E 837E0E00            <2> 	cmp word [bp+0x0E],0
  5448 00001242 7506                <2> 	jnz .sub
  5449 00001244 01D3                <2> 		add bx, dx
  5450 00001246 11C8                <2> 		adc ax, cx				
  5451 00001248 EB04                <2> 		jmp .endop
  5452                              <2> 	.sub:
  5453 0000124A 29D3                <2> 		sub bx, dx
  5454 0000124C 19C8                <2> 		sbb ax, cx
  5455                              <2> 	.endop:
  5456                              <2> 	
  5457 0000124E 89C1                <2> 	mov cx,ax
  5458 00001250 81E10080            <2> 	and cx,0x8000
  5459 00001254 83F900              <2> 	cmp cx,0
  5460 00001257 7415                <2> 	jz .endresneg
  5461 00001259 B9FFFF              <2> 		mov cx,0xFFFF
  5462 0000125C BAFFFF              <2> 		mov dx,0xFFFF
  5463 0000125F 29DA                <2> 		sub dx,bx
  5464 00001261 19C1                <2> 		sbb cx,ax
  5465 00001263 42                  <2> 		inc dx
  5466 00001264 83D100              <2> 		adc cx,0
  5467 00001267 89C8                <2> 		mov ax,cx
  5468 00001269 89D3                <2> 		mov bx,dx
  5469                              <2> 		
  5470 0000126B 050080              <2> 		add ax,0x8000
  5471                              <2> 	.endresneg:
  5472                              <2> 	
  5473 0000126E 89E1                <2> 	mov cx,sp
  5474 00001270 89CD                <2> 	mov bp,cx
  5475 00001272 89460A              <2> 	mov [bp+0x0A], ax
  5476 00001275 895E0C              <2> 	mov [bp+0x0C], bx
  5477                              <2> 	
  5478 00001278 C3                  <2> 	ret	
  5479                              <2> 	
  5480                              <2> proc__mul32_64:
  5481 00001279 89E0                <2> 	mov ax,sp
  5482 0000127B 89C5                <2> 	mov bp,ax
  5483                              <2> 		
  5484 0000127D 31D2                <2> 	xor dx,dx
  5485 0000127F 8B4604              <2> 	mov ax,[bp+4]
  5486 00001282 F76608              <2> 	mul word [bp+8]
  5487                              <2> 	
  5488 00001285 C7460A0000          <2> 	mov word [bp+0x0A], 0
  5489 0000128A C7460C0000          <2> 	mov word [bp+0x0C], 0
  5490 0000128F 89560E              <2> 	mov word [bp+0x0E], dx
  5491 00001292 894610              <2> 	mov word [bp+0x10], ax
  5492                              <2> 		
  5493 00001295 31D2                <2> 	xor dx,dx
  5494 00001297 8B4604              <2> 	mov ax,[bp+4]
  5495 0000129A F76606              <2> 	mul word [bp+6]
  5496                              <2> 	
  5497 0000129D 01460E              <2> 	add [bp+0x0E],ax
  5498 000012A0 11560C              <2> 	adc [bp+0x0C],dx
  5499 000012A3 83560A00            <2> 	adc word [bp+0x0A],0
  5500                              <2> 	
  5501 000012A7 31D2                <2> 	xor dx,dx
  5502 000012A9 8B4602              <2> 	mov ax,[bp+2]
  5503 000012AC F76608              <2> 	mul word [bp+8]
  5504                              <2> 	
  5505 000012AF 01460E              <2> 	add [bp+0x0E],ax
  5506 000012B2 11560C              <2> 	adc [bp+0x0C],dx
  5507                              <2> 	
  5508 000012B5 31D2                <2> 	xor dx,dx
  5509 000012B7 8B4602              <2> 	mov ax,[bp+2]
  5510 000012BA F76606              <2> 	mul word [bp+6]
  5511                              <2> 	
  5512 000012BD 01460C              <2> 	add [bp+0x0C],ax
  5513 000012C0 11560A              <2> 	adc [bp+0x0A],dx
  5514                              <2> 	
  5515 000012C3 C3                  <2> 	ret
  5516                              <2> 	
  5517                              <2> proc__fldiv32:
  5518 000012C4 89E0                <2> 	mov ax,sp
  5519 000012C6 89C5                <2> 	mov bp,ax
  5520                              <2> 	
  5521 000012C8 8B4602              <2> 	mov ax,[bp+2]
  5522 000012CB 8B5E04              <2> 	mov bx,[bp+4]
  5523 000012CE C7460A0000          <2> 	mov word [bp+0x0A],0
  5524 000012D3 C7460C0000          <2> 	mov word [bp+0x0C],0
  5525                              <2> 	
  5526 000012D8 B118                <2> 	mov cl,24
  5527                              <2> 	.l1:
  5528 000012DA 80F900              <2> 		cmp cl,0
  5529 000012DD 0F84AC00            <2> 		jz .l2
  5530 000012E1 51                  <2> 		push cx
  5531                              <2> 		
  5532 000012E2 8B4E0A              <2> 		mov cx,[bp+0x0A]
  5533 000012E5 8B560C              <2> 		mov dx,[bp+0x0C]
  5534 000012E8 55                  <2> 		push bp
  5535 000012E9 50                  <2> 		push ax
  5536 000012EA 53                  <2> 		push bx
  5537                              <2> 		__shl32 cx, dx, 1
  5538                              <3>  stkopen 5
  5539 000012EB 83EC05              <4>  sub word sp, %1
  5540 000012EE 54                  <4>  push sp
  5541 000012EF 5D                  <4>  pop bp
  5542 000012F0 894E00              <3>  mov word [bp+0], %1
  5543 000012F3 895602              <3>  mov word [bp+2], %2
  5544 000012F6 C6460401            <3>  mov byte [bp+4], %3
  5545 000012FA E8B9F4              <3>  call proc_shl32
  5546 000012FD 54                  <3>  push sp
  5547 000012FE 5D                  <3>  pop bp
  5548 000012FF 8B4E00              <3>  mov word %1, [bp+0]
  5549 00001302 8B5602              <3>  mov word %2, [bp+2]
  5550                              <3>  stkclose 5
  5551 00001305 83C405              <4>  add word sp, %1
  5552 00001308 5B                  <2> 		pop bx
  5553 00001309 58                  <2> 		pop ax
  5554 0000130A 5D                  <2> 		pop bp
  5555 0000130B 894E0A              <2> 		mov [bp+0x0A],cx
  5556 0000130E 89560C              <2> 		mov [bp+0x0C],dx
  5557                              <2> 				
  5558 00001311 8B4E06              <2> 		mov cx,[bp+6]
  5559 00001314 8B5608              <2> 		mov dx,[bp+8]
  5560 00001317 50                  <2> 		push ax
  5561 00001318 53                  <2> 		push bx
  5562 00001319 55                  <2> 		push bp
  5563                              <2> 		__cmp32 ax, bx, cx, dx, dl
  5564                              <3>  stkopen 9
  5565 0000131A 83EC09              <4>  sub word sp, %1
  5566 0000131D 54                  <4>  push sp
  5567 0000131E 5D                  <4>  pop bp
  5568 0000131F 894600              <3>  mov word [bp+0], %1
  5569 00001322 895E02              <3>  mov word [bp+2], %2
  5570 00001325 894E04              <3>  mov word [bp+4], %3
  5571 00001328 895606              <3>  mov word [bp+6], %4
  5572 0000132B E85DF4              <3>  call proc_cmp32
  5573 0000132E 54                  <3>  push sp
  5574 0000132F 5D                  <3>  pop bp
  5575 00001330 8A5608              <3>  mov byte %5, [bp+8]
  5576                              <3>  stkclose 9
  5577 00001333 83C409              <4>  add word sp, %1
  5578 00001336 5D                  <2> 		pop bp
  5579 00001337 5B                  <2> 		pop bx
  5580 00001338 58                  <2> 		pop ax				
  5581                              <2> 		
  5582 00001339 80FA00              <2> 		cmp dl,0
  5583 0000133C 7C2A                <2> 		jl .endsub
  5584 0000133E 8B4E06              <2> 			mov cx,[bp+6]
  5585 00001341 8B5608              <2> 			mov dx,[bp+8]
  5586 00001344 55                  <2> 			push bp									
  5587                              <2> 			__sub32 ax, bx, cx, dx, ax, bx						
  5588                              <3>  stkopen 0x0C
  5589 00001345 83EC0C              <4>  sub word sp, %1
  5590 00001348 54                  <4>  push sp
  5591 00001349 5D                  <4>  pop bp
  5592 0000134A 894600              <3>  mov word [bp+0], %1
  5593 0000134D 895E02              <3>  mov word [bp+2], %2
  5594 00001350 894E04              <3>  mov word [bp+4], %3
  5595 00001353 895606              <3>  mov word [bp+6], %4
  5596 00001356 E817F4              <3>  call proc_sub32
  5597 00001359 54                  <3>  push sp
  5598 0000135A 5D                  <3>  pop bp
  5599 0000135B 8B4608              <3>  mov word %5, [bp+8]
  5600 0000135E 8B5E0A              <3>  mov word %6, [bp+0x0A]
  5601                              <3>  stkclose 0x0C
  5602 00001361 83C40C              <4>  add word sp, %1
  5603 00001364 5D                  <2> 			pop bp			
  5604 00001365 FF460C              <2> 			inc word [bp+0x0C]			
  5605                              <2> 		.endsub:
  5606                              <2> 				
  5607 00001368 55                  <2> 		push bp
  5608                              <2> 		__shl32 ax, bx, 1
  5609                              <3>  stkopen 5
  5610 00001369 83EC05              <4>  sub word sp, %1
  5611 0000136C 54                  <4>  push sp
  5612 0000136D 5D                  <4>  pop bp
  5613 0000136E 894600              <3>  mov word [bp+0], %1
  5614 00001371 895E02              <3>  mov word [bp+2], %2
  5615 00001374 C6460401            <3>  mov byte [bp+4], %3
  5616 00001378 E83BF4              <3>  call proc_shl32
  5617 0000137B 54                  <3>  push sp
  5618 0000137C 5D                  <3>  pop bp
  5619 0000137D 8B4600              <3>  mov word %1, [bp+0]
  5620 00001380 8B5E02              <3>  mov word %2, [bp+2]
  5621                              <3>  stkclose 5
  5622 00001383 83C405              <4>  add word sp, %1
  5623 00001386 5D                  <2> 		pop bp
  5624                              <2> 		
  5625 00001387 59                  <2> 		pop cx
  5626 00001388 FEC9                <2> 		dec cl
  5627 0000138A E94DFF              <2> 		jmp .l1
  5628                              <2> 	.l2:
  5629                              <2> 	
  5630 0000138D C3                  <2> 	ret
  5631                              <2> 
  5632                              <2> 
  5633                              <2> proc_flinvsig:
  5634 0000138E 89E0                <2> 	mov ax,sp
  5635 00001390 89C5                <2> 	mov bp,ax
  5636                              <2> 	
  5637 00001392 8B4602              <2> 	mov ax,[bp+2]	
  5638 00001395 89C1                <2> 	mov cx,ax	
  5639 00001397 83C900              <2> 	or cx, 0x0000
  5640 0000139A F7D1                <2> 	not cx
  5641 0000139C 81E10080            <2> 	and cx,0x8000								
  5642 000013A0 25FF7F              <2> 	and ax,0x7FFF			
  5643 000013A3 01C8                <2> 	add ax,cx	
  5644 000013A5 894602              <2> 	mov word [bp+2],ax
  5645                              <2> 	
  5646 000013A8 C3                  <2> 	ret
  5647                              <2> 
  5648                              <2> proc_flsetsig:
  5649 000013A9 89E0                <2> 	mov ax,sp
  5650 000013AB 89C5                <2> 	mov bp,ax
  5651                              <2> 
  5652 000013AD 8B4602              <2> 	mov ax,[bp+2]
  5653 000013B0 25FF7F              <2> 	and ax,0x7FFF
  5654 000013B3 034604              <2> 	add ax,[bp+4]
  5655 000013B6 894602              <2> 	mov [bp+2],ax
  5656                              <2> 				
  5657 000013B9 C3                  <2> 	ret
  5658                              <2> 
  5659                              <2> proc__validate:
  5660 000013BA 89E0                <2> 	mov ax,sp
  5661 000013BC 89C5                <2> 	mov bp,ax
  5662                              <2> 	
  5663 000013BE 8B4602              <2> 	mov ax,[bp+2]
  5664 000013C1 25FF7F              <2> 	and ax,0x7FFF
  5665 000013C4 3DFF7F              <2> 	cmp ax,0x7FFF
  5666 000013C7 750A                <2> 	jne .isnumber1
  5667                              <2> 
  5668 000013C9 8B4604              <2> 	mov ax,[bp+4]
  5669 000013CC 83F8FF              <2> 	cmp ax,0xFFFF
  5670 000013CF 7502                <2> 	jnz .isnumber1
  5671                              <2> 	
  5672 000013D1 EB37                <2> 	jmp .NaN
  5673                              <2> 	
  5674                              <2> 	.isnumber1:
  5675                              <2> 	
  5676 000013D3 8B4606              <2> 	mov ax,[bp+6]
  5677 000013D6 25FF7F              <2> 	and ax,0x7FFF
  5678 000013D9 3DFF7F              <2> 	cmp ax,0x7FFF
  5679 000013DC 750A                <2> 	jne .isnumber2
  5680                              <2> 
  5681 000013DE 8B4608              <2> 	mov ax,[bp+8]
  5682 000013E1 83F8FF              <2> 	cmp ax,0xFFFF
  5683 000013E4 7502                <2> 	jnz .isnumber2
  5684                              <2> 	
  5685 000013E6 EB22                <2> 	jmp .NaN
  5686                              <2> 	
  5687                              <2> 	.isnumber2:
  5688                              <2> 	
  5689 000013E8 8B4602              <2> 	mov ax,[bp+2]
  5690 000013EB D1E0                <2> 	shl ax,1
  5691 000013ED 80FCFF              <2> 	cmp ah,0xFF
  5692 000013F0 740C                <2> 	je .infinity
  5693                              <2> 
  5694 000013F2 8B5E06              <2> 	mov bx,[bp+6]
  5695 000013F5 D1E3                <2> 	shl bx,1
  5696 000013F7 80FFFF              <2> 	cmp bh,0xFF
  5697 000013FA 7402                <2> 	je .infinity			
  5698                              <2> 	
  5699 000013FC EB18                <2> 	jmp .ok	
  5700                              <2> 	
  5701                              <2> 	.infinity:		
  5702 000013FE C7460A807F          <2> 		mov word [bp+0x0A],0x7F80
  5703 00001403 C7460C0000          <2> 		mov word [bp+0x0C],0
  5704 00001408 EB12                <2> 		jmp .done
  5705                              <2> 	.NaN:
  5706 0000140A C7460AFF7F          <2> 		mov word [bp+0x0A],0x7FFF
  5707 0000140F C7460CFFFF          <2> 		mov word [bp+0x0C],0xFFFF
  5708 00001414 EB06                <2> 		jmp .done
  5709                              <2> 			
  5710                              <2> 	.ok:
  5711 00001416 C6460E01            <2> 		mov byte [bp+0x0E],1
  5712 0000141A EB04                <2> 		jmp .end
  5713                              <2> 	.done:
  5714 0000141C C6460E00            <2> 		mov byte [bp+0x0E],0		
  5715                              <2> 	.end:
  5716                              <2> 	
  5717 00001420 C3                  <2> 	ret
  5718                              <2> 
  5719                              <2> proc__div_validate:
  5720 00001421 89E0                <2> 	mov ax,sp
  5721 00001423 89C5                <2> 	mov bp,ax
  5722                              <2> 	
  5723 00001425 8B4602              <2> 	mov ax,[bp+2]
  5724 00001428 8B5E06              <2> 	mov bx,[bp+6]
  5725 0000142B D1E0                <2> 	shl ax,1
  5726 0000142D D1E3                <2> 	shl bx,1
  5727 0000142F 08FC                <2> 	or ah,bh
  5728 00001431 80FC00              <2> 	cmp ah,0
  5729 00001434 7422                <2> 	jz .NaN
  5730                              <2> 	
  5731 00001436 8B4602              <2> 	mov ax,[bp+2]
  5732 00001439 D1E0                <2> 	shl ax,1
  5733 0000143B 80FC00              <2> 	cmp ah,0
  5734 0000143E 7424                <2> 	jz .zero
  5735 00001440 8B5E06              <2> 	mov bx,[bp+6]
  5736 00001443 D1E3                <2> 	shl bx,1
  5737 00001445 80FF00              <2> 	cmp bh,0	
  5738 00001448 7402                <2> 	jz .infinity		
  5739                              <2> 		
  5740 0000144A EB24                <2> 	jmp .ok
  5741                              <2> 	
  5742                              <2> 	.infinity:		
  5743 0000144C C7460A807F          <2> 		mov word [bp+0x0A],0x7F80
  5744 00001451 C7460C0000          <2> 		mov word [bp+0x0C],0
  5745 00001456 EB1E                <2> 		jmp .done
  5746                              <2> 	.NaN:
  5747 00001458 C7460AFF7F          <2> 		mov word [bp+0x0A],0x7FFF
  5748 0000145D C7460CFFFF          <2> 		mov word [bp+0x0C],0xFFFF
  5749 00001462 EB12                <2> 		jmp .done
  5750                              <2> 	.zero:
  5751 00001464 C7460A0000          <2> 		mov word [bp+0x0A],0
  5752 00001469 C7460C0000          <2> 		mov word [bp+0x0C],0
  5753 0000146E EB06                <2> 		jmp .done	
  5754                              <2> 			
  5755                              <2> 	.ok:
  5756 00001470 C6460E01            <2> 		mov byte [bp+0x0E],1
  5757 00001474 EB04                <2> 		jmp .end
  5758                              <2> 	.done:	
  5759 00001476 C6460E00            <2> 		mov byte [bp+0x0E],0
  5760                              <2> 	.end:	
  5761                              <2> 		
  5762 0000147A C3                  <2> 	ret
  5763                              <2> 	
  5764                              <2> proc__mul_validate:
  5765 0000147B 89E0                <2> 	mov ax,sp
  5766 0000147D 89C5                <2> 	mov bp,ax
  5767                              <2> 	
  5768 0000147F 8B4602              <2> 	mov ax,[bp+2]
  5769 00001482 D1E0                <2> 	shl ax,1	
  5770 00001484 80FC00              <2> 	cmp ah,0	
  5771 00001487 740C                <2> 	jz .zero		
  5772                              <2> 
  5773 00001489 8B5E04              <2> 	mov bx,[bp+4]
  5774 0000148C D1E3                <2> 	shl bx,1
  5775 0000148E 80FF00              <2> 	cmp bh,0
  5776 00001491 7402                <2> 	jz .zero
  5777                              <2> 			
  5778 00001493 EB0C                <2> 	jmp .ok
  5779                              <2> 	
  5780                              <2> 	.zero:		
  5781 00001495 C746060000          <2> 		mov word [bp+6],0
  5782 0000149A C746080000          <2> 		mov word [bp+8],0
  5783 0000149F EB06                <2> 		jmp .done
  5784                              <2> 			
  5785                              <2> 	.ok:
  5786 000014A1 C6460A01            <2> 		mov byte [bp+0x0A],1
  5787 000014A5 EB04                <2> 		jmp .end
  5788                              <2> 	.done:	
  5789 000014A7 C6460A00            <2> 		mov byte [bp+0x0A],0
  5790                              <2> 	.end:	
  5791                              <2> 		
  5792 000014AB C3                  <2> 	ret
  5793                              <2> 	
  5794                              <2> proc__addorsub_validate:
  5795 000014AC 89E0                <2> 	mov ax,sp
  5796 000014AE 89C5                <2> 	mov bp,ax
  5797                              <2> 	
  5798 000014B0 8B4602              <2> 	mov ax,[bp+2]
  5799 000014B3 8B5E06              <2> 	mov bx,[bp+6]	
  5800 000014B6 D1E0                <2> 	shl ax,1
  5801 000014B8 D1E3                <2> 	shl bx,1
  5802 000014BA 08FC                <2> 	or ah,bh
  5803 000014BC 80FC00              <2> 	cmp ah,0
  5804 000014BF 7416                <2> 	jz .zero
  5805                              <2> 	
  5806 000014C1 8B4602              <2> 	mov ax,[bp+2]
  5807 000014C4 D1E0                <2> 	shl ax,1
  5808 000014C6 80FC00              <2> 	cmp ah,0		
  5809 000014C9 7426                <2> 	jz .value2
  5810                              <2> 	
  5811 000014CB 8B4606              <2> 	mov ax,[bp+6]
  5812 000014CE D1E0                <2> 	shl ax,1
  5813 000014D0 80FC00              <2> 	cmp ah,0
  5814 000014D3 740E                <2> 	jz .value1	
  5815                              <2> 		
  5816 000014D5 EB28                <2> 	jmp .ok
  5817                              <2> 	
  5818                              <2> 	.zero:		
  5819 000014D7 C7460A0000          <2> 		mov word [bp+0x0A],0
  5820 000014DC C7460C0000          <2> 		mov word [bp+0x0C],0
  5821 000014E1 EB22                <2> 		jmp .done
  5822                              <2> 	.value1:
  5823 000014E3 8B4602              <2> 		mov ax,[bp+2]
  5824 000014E6 8B5E04              <2> 		mov bx,[bp+4]
  5825 000014E9 89460A              <2> 		mov word [bp+0x0A],ax
  5826 000014EC 895E0C              <2> 		mov word [bp+0x0C],bx		
  5827 000014EF EB14                <2> 		jmp .done
  5828                              <2> 	.value2:		
  5829 000014F1 8B4606              <2> 		mov ax,[bp+6]
  5830 000014F4 8B5E08              <2> 		mov bx,[bp+8]
  5831 000014F7 89460A              <2> 		mov word [bp+0x0A],ax
  5832 000014FA 895E0C              <2> 		mov word [bp+0x0C],bx
  5833 000014FD EB06                <2> 		jmp .done
  5834                              <2> 			
  5835                              <2> 	.ok:
  5836 000014FF C6460E01            <2> 		mov byte [bp+0x0E],1
  5837 00001503 EB04                <2> 		jmp .end
  5838                              <2> 	.done:	
  5839 00001505 C6460E00            <2> 		mov byte [bp+0x0E],0
  5840                              <2> 	.end:	
  5841                              <2> 		
  5842 00001509 C3                  <2> 	ret
  5843                              <2> 	
  5844                              <2> 
  5845                              <2> proc__cmp_validate:
  5846 0000150A 89E0                <2> 	mov ax,sp
  5847 0000150C 89C5                <2> 	mov bp,ax
  5848                              <2> 	
  5849 0000150E 8B4602              <2> 	mov ax,[bp+2]
  5850 00001511 8B5E04              <2> 	mov bx,[bp+4]
  5851 00001514 D1E0                <2> 	shl ax,1
  5852 00001516 D1E3                <2> 	shl bx,1
  5853                              <2> 	
  5854 00001518 88E5                <2> 	mov ch,ah
  5855 0000151A 30FD                <2> 	xor ch,bh
  5856 0000151C 80FD00              <2> 	cmp ch,0
  5857 0000151F 743A                <2> 	jz .ok
  5858                              <2> 		
  5859 00001521 80FC00              <2> 	cmp ah,0
  5860 00001524 7407                <2> 	jz .zerov1
  5861                              <2> 	
  5862 00001526 80FF00              <2> 	cmp bh,0
  5863 00001529 7419                <2> 	jz .zerov2	
  5864                              <2> 			
  5865 0000152B EB2E                <2> 	jmp .ok
  5866                              <2> 	
  5867                              <2> 	.zerov1:
  5868 0000152D 8B4604              <2> 		mov ax,[bp+4]
  5869 00001530 250080              <2> 		and ax,0x8000
  5870 00001533 83F800              <2> 		cmp ax,0
  5871 00001536 7506                <2> 		jnz .neg1
  5872 00001538 C64606FF            <2> 			mov byte [bp+6],-1
  5873 0000153C EB04                <2> 			jmp .endcmp1
  5874                              <2> 		.neg1:
  5875 0000153E C6460601            <2> 			mov byte [bp+6], 1
  5876                              <2> 		.endcmp1:
  5877 00001542 EB1D                <2> 		jmp .done
  5878                              <2> 	.zerov2:		
  5879 00001544 8B4602              <2> 		mov ax,[bp+2]
  5880 00001547 250080              <2> 		and ax,0x8000
  5881 0000154A 83F800              <2> 		cmp ax,0
  5882 0000154D 7506                <2> 		jnz .neg2
  5883 0000154F C6460601            <2> 			mov byte [bp+6], 1
  5884 00001553 EB04                <2> 			jmp .endcmp2
  5885                              <2> 		.neg2:
  5886 00001555 C64606FF            <2> 			mov byte [bp+6],-1
  5887                              <2> 		.endcmp2:
  5888 00001559 EB06                <2> 		jmp .done	
  5889                              <2> 			
  5890                              <2> 	.ok:
  5891 0000155B C6460701            <2> 		mov byte [bp+7],1
  5892 0000155F EB04                <2> 		jmp .end
  5893                              <2> 	.done:	
  5894 00001561 C6460700            <2> 		mov byte [bp+7],0
  5895                              <2> 	.end:	
  5896                              <2> 		
  5897 00001565 C3                  <2> 	ret
  5898                              <2> 	
  5899                              <2> %endif
  5900                              <1> 
  5901                              <1> %macro flinvsig 1
  5902                              <1> 	flinvsig cs, %1
  5903                              <1> %endmacro
  5904                              <1> 
  5905                              <1> %macro flsetsig 1
  5906                              <1> 	flsetsig cs, %1
  5907                              <1> %endmacro
  5908                              <1> 
  5909                              <1> %macro flclrsig 1
  5910                              <1> 	flclrsig cs, %1
  5911                              <1> %endmacro
  5912                              <1> 
  5913                              <1> %macro int16tofl 2
  5914                              <1> 	int16tofl cs, %1, cs, %2
  5915                              <1> %endmacro
  5916                              <1> 
  5917                              <1> %macro fltoint16 2
  5918                              <1> 	fltoint16 cs, %1, cs, %2
  5919                              <1> %endmacro
  5920                              <1> 
  5921                              <1> %macro fltoint32 1
  5922                              <1> 	fltoint32 %1, %1
  5923                              <1> %endmacro
  5924                              <1> 
  5925                              <1> %macro fltoint32 2
  5926                              <1> 	fltoint32 cs, %1, cs, %2
  5927                              <1> %endmacro
  5928                              <1> 
  5929                              <1> %macro int32tofl 1
  5930                              <1> 	int32tofl %1, %1
  5931                              <1> %endmacro
  5932                              <1> 
  5933                              <1> %macro int32tofl 2
  5934                              <1> 	int32tofl cs, %1, cs, %2
  5935                              <1> %endmacro
  5936                              <1> 
  5937                              <1> %macro flcmp 3
  5938                              <1> 	flcmp cs, %1, cs, %2, %3
  5939                              <1> %endmacro
  5940                              <1> 
  5941                              <1> %macro flshl 1
  5942                              <1> 	flshl cs, %1
  5943                              <1> %endmacro
  5944                              <1> 
  5945                              <1> %macro flshr 1
  5946                              <1> 	flshr cs, %1
  5947                              <1> %endmacro
  5948                              <1> 
  5949                              <1> %macro fladd 3
  5950                              <1> 	fladd cs, %1, cs, %2, cs, %3
  5951                              <1> %endmacro
  5952                              <1> 
  5953                              <1> %macro flsub 3
  5954                              <1> 	flsub cs, %1, cs, %2, cs, %3
  5955                              <1> %endmacro	
  5956                              <1> 
  5957                              <1> %macro flmul 3
  5958                              <1> 	flmul cs, %1, cs, %2, cs, %3
  5959                              <1> %endmacro
  5960                              <1> 
  5961                              <1> %macro fldiv 3
  5962                              <1> 	fldiv cs, %1, cs, %2, cs, %3
  5963                              <1> %endmacro	
  5964                              <1> 
  5965                              <1> %macro fladd 6
  5966                              <1> 	fladdorsub %1, %2, %3, %4, %5, %6, 0
  5967                              <1> %endmacro
  5968                              <1> 
  5969                              <1> %macro flsub 6
  5970                              <1> 	fladdorsub %1, %2, %3, %4, %5, %6, 0x8000
  5971                              <1> %endmacro
  5972                              <1> 
  5973                              <1> %macro fltoint16 4
  5974                              <1> 	stkopen 0x06
  5975                              <1> 	mov ax,%1
  5976                              <1> 	mov ds,ax
  5977                              <1> 	mov ax,[%2+2]
  5978                              <1> 	mov [bp+0],ax
  5979                              <1> 	mov ax,[%2]
  5980                              <1> 	mov [bp+2],ax	
  5981                              <1> 	call proc_fltoint16
  5982                              <1> 	mov ax,sp
  5983                              <1> 	mov bp,ax
  5984                              <1> 	mov ax,%3
  5985                              <1> 	mov ds,ax
  5986                              <1> 	mov ax,[bp+4]
  5987                              <1> 	mov [%4],ax
  5988                              <1> 	stkclose 0x06
  5989                              <1> %endmacro
  5990                              <1> 
  5991                              <1> %macro int16tofl 4	
  5992                              <1> 	stkopen 0x06
  5993                              <1> 	mov ax,%1
  5994                              <1> 	mov ds,ax
  5995                              <1> 	mov ax,[%2]
  5996                              <1> 	mov [bp+0],ax	
  5997                              <1> 	call proc_int16tofl
  5998                              <1> 	mov ax,sp
  5999                              <1> 	mov bp,ax
  6000                              <1> 	mov ax,%3
  6001                              <1> 	mov ds,ax
  6002                              <1> 	mov ax,[bp+2]
  6003                              <1> 	mov [%4+2],ax
  6004                              <1> 	mov ax,[bp+4]
  6005                              <1> 	mov [%4],ax
  6006                              <1> 	stkclose 0x06
  6007                              <1> %endmacro
  6008                              <1> 
  6009                              <1> %macro fltoint32 4
  6010                              <1> 	stkopen 0x08
  6011                              <1> 	mov ax,%1
  6012                              <1> 	mov ds,ax
  6013                              <1> 	mov ax,[%2+2]
  6014                              <1> 	mov [bp+0],ax
  6015                              <1> 	mov ax,[%2]
  6016                              <1> 	mov [bp+2],ax	
  6017                              <1> 	call proc_fltoint32
  6018                              <1> 	mov ax,sp
  6019                              <1> 	mov bp,ax
  6020                              <1> 	mov ax,%3
  6021                              <1> 	mov ds,ax
  6022                              <1> 	mov ax,[bp+4]
  6023                              <1> 	mov [%4+2],ax
  6024                              <1> 	mov ax,[bp+6]
  6025                              <1> 	mov [%4],ax
  6026                              <1> 	stkclose 0x08
  6027                              <1> %endmacro
  6028                              <1> 
  6029                              <1> %macro int32tofl 4
  6030                              <1> 	stkopen 0x08
  6031                              <1> 	mov ax,%1
  6032                              <1> 	mov ds,ax
  6033                              <1> 	mov ax,[%2+2]
  6034                              <1> 	mov [bp+0],ax
  6035                              <1> 	mov ax,[%2]
  6036                              <1> 	mov [bp+2],ax	
  6037                              <1> 	call proc_int32tofl
  6038                              <1> 	mov ax,sp
  6039                              <1> 	mov bp,ax
  6040                              <1> 	mov ax,%3
  6041                              <1> 	mov ds,ax
  6042                              <1> 	mov ax,[bp+4]
  6043                              <1> 	mov [%4+2],ax
  6044                              <1> 	mov ax,[bp+6]
  6045                              <1> 	mov [%4],ax
  6046                              <1> 	stkclose 0x08
  6047                              <1> %endmacro
  6048                              <1> 
  6049                              <1> %macro flinvsig 2
  6050                              <1> 	stkopen 0x02
  6051                              <1> 	mov ax,%1
  6052                              <1> 	mov ds,ax
  6053                              <1> 	mov ax,[%2+2]
  6054                              <1> 	mov word [bp+0], ax
  6055                              <1> 	call proc_flinvsig
  6056                              <1> 	push sp
  6057                              <1> 	pop bp
  6058                              <1> 	mov ax,[bp+0]
  6059                              <1> 	mov word [%2+2],ax
  6060                              <1> 	stkclose 0x02
  6061                              <1> %endmacro
  6062                              <1> 
  6063                              <1> %macro flsetsig 2
  6064                              <1> 	stkopen 0x04
  6065                              <1> 	mov ax,%1
  6066                              <1> 	mov ds,ax
  6067                              <1> 	mov ax,[%2+2]
  6068                              <1> 	mov word [bp+0], ax
  6069                              <1> 	mov word [bp+2], 0x8000
  6070                              <1> 	call proc_flsetsig
  6071                              <1> 	push sp
  6072                              <1> 	pop bp
  6073                              <1> 	mov ax,[bp+0]
  6074                              <1> 	mov word [%2+2],ax
  6075                              <1> 	stkclose 0x04	
  6076                              <1> %endmacro
  6077                              <1> 
  6078                              <1> %macro flclrsig 2
  6079                              <1> 	stkopen 0x04
  6080                              <1> 	mov ax,%1
  6081                              <1> 	mov ds,ax
  6082                              <1> 	mov ax,[%2+2]
  6083                              <1> 	mov word [bp+0], ax
  6084                              <1> 	mov word [bp+2], 0x0000
  6085                              <1> 	call proc_flsetsig
  6086                              <1> 	push sp
  6087                              <1> 	pop bp
  6088                              <1> 	mov ax,[bp+0]
  6089                              <1> 	mov word [%2+2],ax
  6090                              <1> 	stkclose 0x04	
  6091                              <1> %endmacro
  6092                              <1> 
  6093                              <1> %macro flcmp 5	
  6094                              <1> 	stkopen 0x09
  6095                              <1> 	mov ax,%1
  6096                              <1> 	mov ds,ax
  6097                              <1> 	mov ax,[%2+2]
  6098                              <1> 	mov [bp+0],ax
  6099                              <1> 	mov ax,[%2]
  6100                              <1> 	mov [bp+2],ax
  6101                              <1> 	mov ax,%3
  6102                              <1> 	mov ds,ax
  6103                              <1> 	mov ax,[%4+2]
  6104                              <1> 	mov [bp+4],ax
  6105                              <1> 	mov ax,[%4]
  6106                              <1> 	mov [bp+6],ax
  6107                              <1> 	call proc_flcmp
  6108                              <1> 	mov ax,sp
  6109                              <1> 	mov bp,ax
  6110                              <1> 	mov byte %5,[bp+8]
  6111                              <1> 	stkclose 0x09
  6112                              <1> %endmacro
  6113                              <1> 
  6114                              <1> %macro flshl 2	
  6115                              <1> 	stkopen 0x02
  6116                              <1> 	mov ax,%1
  6117                              <1> 	mov ds,ax
  6118                              <1> 	mov ax,[%2+2]
  6119                              <1> 	mov [bp+0],ax
  6120                              <1> 	call proc_flshl
  6121                              <1> 	mov ax,sp
  6122                              <1> 	mov bp,ax
  6123                              <1> 	mov ax,%1
  6124                              <1> 	mov ds,ax
  6125                              <1> 	mov ax,[bp+0]
  6126                              <1> 	mov [%2+2],ax
  6127                              <1> 	stkclose 0x02
  6128                              <1> %endmacro
  6129                              <1> 
  6130                              <1> %macro flshr 2	
  6131                              <1> 	stkopen 0x02
  6132                              <1> 	mov ax,%1
  6133                              <1> 	mov ds,ax
  6134                              <1> 	mov ax,[%2+2]
  6135                              <1> 	mov [bp+0],ax
  6136                              <1> 	call proc_flshr
  6137                              <1> 	mov ax,sp
  6138                              <1> 	mov bp,ax
  6139                              <1> 	mov ax,%1
  6140                              <1> 	mov ds,ax
  6141                              <1> 	mov ax,[bp+0]
  6142                              <1> 	mov [%2+2],ax
  6143                              <1> 	stkclose 0x02
  6144                              <1> %endmacro
  6145                              <1> 
  6146                              <1> %macro fldiv 6	
  6147                              <1> 	stkopen 0x0C
  6148                              <1> 	mov ax,%1
  6149                              <1> 	mov ds,ax
  6150                              <1> 	mov ax,[%2+2]
  6151                              <1> 	mov [bp+0],ax
  6152                              <1> 	mov ax,[%2]
  6153                              <1> 	mov [bp+2],ax
  6154                              <1> 	mov ax,%3
  6155                              <1> 	mov ds,ax
  6156                              <1> 	mov ax,[%4+2]
  6157                              <1> 	mov [bp+4],ax
  6158                              <1> 	mov ax,[%4]
  6159                              <1> 	mov [bp+6],ax
  6160                              <1> 	call proc_fldiv
  6161                              <1> 	mov ax,sp
  6162                              <1> 	mov bp,ax
  6163                              <1> 	mov ax,%5
  6164                              <1> 	mov ds,ax
  6165                              <1> 	mov ax,[bp+8]
  6166                              <1> 	mov [%6+2],ax
  6167                              <1> 	mov ax,[bp+0x0A]
  6168                              <1> 	mov [%6],ax
  6169                              <1> 	stkclose 0x0C
  6170                              <1> %endmacro
  6171                              <1> 
  6172                              <1> %macro flmul 6	
  6173                              <1> 	stkopen 0x0C
  6174                              <1> 	mov ax,%1
  6175                              <1> 	mov ds,ax
  6176                              <1> 	mov ax,[%2+2]
  6177                              <1> 	mov [bp+0],ax
  6178                              <1> 	mov ax,[%2]
  6179                              <1> 	mov [bp+2],ax
  6180                              <1> 	mov ax,%3
  6181                              <1> 	mov ds,ax
  6182                              <1> 	mov ax,[%4+2]
  6183                              <1> 	mov [bp+4],ax
  6184                              <1> 	mov ax,[%4]
  6185                              <1> 	mov [bp+6],ax
  6186                              <1> 	call proc_flmul
  6187                              <1> 	mov ax,sp
  6188                              <1> 	mov bp,ax
  6189                              <1> 	mov ax,%5
  6190                              <1> 	mov ds,ax
  6191                              <1> 	mov ax,[bp+8]
  6192                              <1> 	mov [%6+2],ax
  6193                              <1> 	mov ax,[bp+0x0A]
  6194                              <1> 	mov [%6],ax
  6195                              <1> 	stkclose 0x0C
  6196                              <1> %endmacro
  6197                              <1> 	
  6198                              <1> %macro fladdorsub 7
  6199                              <1> 	stkopen 0x0E
  6200                              <1> 	mov ax,%1
  6201                              <1> 	mov ds,ax
  6202                              <1> 	mov ax,[%2+2]
  6203                              <1> 	mov [bp+0],ax
  6204                              <1> 	mov ax,[%2]
  6205                              <1> 	mov [bp+2],ax
  6206                              <1> 	mov ax,%3
  6207                              <1> 	mov ds,ax
  6208                              <1> 	mov ax,[%4+2]
  6209                              <1> 	mov [bp+4],ax
  6210                              <1> 	mov ax,[%4]
  6211                              <1> 	mov [bp+6],ax
  6212                              <1> 	mov word [bp+0x0C], %7
  6213                              <1> 	call proc_fladdorsub
  6214                              <1> 	mov ax,sp
  6215                              <1> 	mov bp,ax
  6216                              <1> 	mov ax,%5
  6217                              <1> 	mov ds,ax
  6218                              <1> 	mov ax,[bp+8]
  6219                              <1> 	mov [%6+2],ax
  6220                              <1> 	mov ax,[bp+0x0A]
  6221                              <1> 	mov [%6],ax
  6222                              <1> 	stkclose 0x0E
  6223                              <1> %endmacro
  6224                              <1> 	
  6225                              <1> %endif
  6226                                  %include "lib/trigon.mac"
  6227                              <1> 
  6228                              <1> %ifndef TRIGON_MAC
  6229                              <1> 	%define TRIGON_MAC
  6230                              <1> 
  6231                              <1> 	%include "lib/trigon.asm"
  6232                              <2> 
  6233                              <2> %ifndef TRIGON_ASM
  6234                              <2> 	%define TRIGON_ASM
  6235                              <2> 
  6236                              <2> 	%include "lib/math.mac"
  6237                              <3> 
  6238                              <3> %ifndef MATH_MAC
  6239                              <3> 	%define MATH_MAC
  6240                              <3> 	
  6241                              <3> 	%include "lib/math.asm"
  6242                              <3> 	%include "lib/system.mac"
  6243                              <3> 
  6244                              <3> %macro chgsig 1
  6245                              <3> 	chgsig cs, %1
  6246                              <3> %endmacro
  6247                              <3> 
  6248                              <3> %macro cmp16 3
  6249                              <3> 	cmp16 cs, %1, cs, %2, %3
  6250                              <3> %endmacro
  6251                              <3> 
  6252                              <3> %macro mul16 2
  6253                              <3> 	mul16 cs, %1, cs, %2
  6254                              <3> %endmacro
  6255                              <3> 
  6256                              <3> %macro div16 2
  6257                              <3> 	div16 cs, %1, cs, %2
  6258                              <3> %endmacro
  6259                              <3> 
  6260                              <3> %macro mod16 2
  6261                              <3> 	mod16 cs, %1, cs, %2
  6262                              <3> %endmacro
  6263                              <3> 
  6264                              <3> %macro inc16 1
  6265                              <3> 	inc16 cs, %1
  6266                              <3> %endmacro
  6267                              <3> 
  6268                              <3> %macro dec16 1
  6269                              <3> 	dec16 cs, %1
  6270                              <3> %endmacro
  6271                              <3> 
  6272                              <3> %macro add16 2
  6273                              <3> 	add16 cs, %1, cs, %2
  6274                              <3> %endmacro
  6275                              <3> 
  6276                              <3> %macro sub16 2
  6277                              <3> 	sub16 cs, %1, cs, %2
  6278                              <3> %endmacro
  6279                              <3> 
  6280                              <3> %macro int32to16 2
  6281                              <3> 	int32to16 cs, %1, %2
  6282                              <3> %endmacro
  6283                              <3> 
  6284                              <3> %macro int16to32 2
  6285                              <3> 	int16to32 %1, cs, %2
  6286                              <3> %endmacro
  6287                              <3> 
  6288                              <3> %macro setsig 1
  6289                              <3> 	setsig cs, %1
  6290                              <3> %endmacro
  6291                              <3> 
  6292                              <3> %macro clrsig 1
  6293                              <3> 	clrsig cs, %1
  6294                              <3> %endmacro
  6295                              <3> 
  6296                              <3> %macro idiv32 5
  6297                              <3> 	idiv32 cs, %1, cs, %2, cs, %3, cs, %4, cs, %5
  6298                              <3> %endmacro
  6299                              <3> 
  6300                              <3> %macro imul32 3
  6301                              <3> 	imul32 cs, %1, cs, %2, cs, %3
  6302                              <3> %endmacro
  6303                              <3> 
  6304                              <3> %macro div32 5
  6305                              <3> 	div32 cs, %1, cs, %2, cs, %3, cs, %4, cs, %5
  6306                              <3> %endmacro
  6307                              <3> 
  6308                              <3> %macro mul32 3
  6309                              <3> 	mul32 cs, %1, cs, %2, cs, %3
  6310                              <3> %endmacro
  6311                              <3> 	
  6312                              <3> %macro add32 3
  6313                              <3> 	add32 cs, %1, cs, %2, cs, %3
  6314                              <3> %endmacro
  6315                              <3> 
  6316                              <3> %macro sub32 3
  6317                              <3> 	sub32 cs, %1, cs, %2, cs, %3
  6318                              <3> %endmacro
  6319                              <3> 
  6320                              <3> %macro int32to16 3
  6321                              <3> 	stkopen 0x06
  6322                              <3> 	mov ax,%1
  6323                              <3> 	mov ds,ax
  6324                              <3> 	mov ax,[%2+2]
  6325                              <3> 	mov word [bp+0], ax
  6326                              <3> 	mov ax,[%2]	
  6327                              <3> 	mov word [bp+2], ax
  6328                              <3> 	call proc_int32to16
  6329                              <3> 	mov ax,sp
  6330                              <3> 	mov bp,ax
  6331                              <3> 	mov ax,[bp+4]
  6332                              <3> 	mov word %3, ax	
  6333                              <3> 	stkclose 0x06
  6334                              <3> %endmacro
  6335                              <3> 
  6336                              <3> %macro int16to32 3
  6337                              <3> 	stkopen 0x06
  6338                              <3> 	mov word [bp+0], %1	
  6339                              <3> 	call proc_int16to32
  6340                              <3> 	mov ax,sp
  6341                              <3> 	mov bp,ax
  6342                              <3> 	mov ax,%2
  6343                              <3> 	mov ds,ax
  6344                              <3> 	mov ax,[bp+2]
  6345                              <3> 	mov [%3+2],ax
  6346                              <3> 	mov ax,[bp+4]
  6347                              <3> 	mov [%3],ax	
  6348                              <3> 	stkclose 0x06
  6349                              <3> %endmacro
  6350                              <3> 
  6351                              <3> %macro setsig 2
  6352                              <3> 	stkopen 0x02
  6353                              <3> 	mov ax,%1
  6354                              <3> 	mov ds,ax
  6355                              <3> 	mov ax,[%2+2]
  6356                              <3> 	mov word [bp+0], ax
  6357                              <3> 	call proc_setsig
  6358                              <3> 	mov ax,sp
  6359                              <3> 	mov bp,ax
  6360                              <3> 	mov ax,%1
  6361                              <3> 	mov ds,ax
  6362                              <3> 	mov ax,[bp+0]
  6363                              <3> 	mov word [%2+2], ax
  6364                              <3> 	stkclose 0x02
  6365                              <3> %endmacro
  6366                              <3> 
  6367                              <3> %macro clrsig 2
  6368                              <3> 	stkopen 0x02
  6369                              <3> 	mov ax,%1
  6370                              <3> 	mov ds,ax
  6371                              <3> 	mov ax,[%2+2]
  6372                              <3> 	mov word [bp+0], ax
  6373                              <3> 	call proc_clrsig
  6374                              <3> 	mov ax,sp
  6375                              <3> 	mov bp,ax
  6376                              <3> 	mov ax,%1
  6377                              <3> 	mov ds,ax
  6378                              <3> 	mov ax,[bp+0]
  6379                              <3> 	mov word [%2+2], ax
  6380                              <3> 	stkclose 0x02
  6381                              <3> %endmacro
  6382                              <3> 
  6383                              <3> %macro div32 10
  6384                              <3> 	stkopen 0x11
  6385                              <3> 	mov ax,%1
  6386                              <3> 	mov ds,ax
  6387                              <3> 	mov ax,[%2+2]
  6388                              <3> 	mov word [bp+0], ax
  6389                              <3> 	mov ax,[%2]
  6390                              <3> 	mov word [bp+2], ax
  6391                              <3> 	mov ax,%3
  6392                              <3> 	mov ds,ax
  6393                              <3> 	mov ax,[%4+2]
  6394                              <3> 	mov word [bp+4], ax
  6395                              <3> 	mov ax,[%4]
  6396                              <3> 	mov word [bp+6], ax
  6397                              <3> 	call proc_div32
  6398                              <3> 	mov ax,sp
  6399                              <3> 	mov bp,ax
  6400                              <3> 	mov ax,%5
  6401                              <3> 	mov ds,ax
  6402                              <3> 	mov word ax, [bp+8]
  6403                              <3> 	mov word [%6+2], ax
  6404                              <3> 	mov word ax, [bp+0x0A]
  6405                              <3> 	mov word [%6], ax
  6406                              <3> 	mov ax,%7
  6407                              <3> 	mov ds,ax
  6408                              <3> 	mov word ax,[bp+0x0C]
  6409                              <3> 	mov word [%8+2],ax
  6410                              <3> 	mov word ax,[bp+0x0E]
  6411                              <3> 	mov word [%8],ax
  6412                              <3> 	mov ax,%9
  6413                              <3> 	mov ds,ax
  6414                              <3> 	mov byte al,[bp+0x10]
  6415                              <3> 	mov byte [%10],al
  6416                              <3> 	stkclose 0x11
  6417                              <3> %endmacro
  6418                              <3> 	
  6419                              <3> %macro mul32 6
  6420                              <3> 	stkopen 0x0C
  6421                              <3> 	mov ax,%1
  6422                              <3> 	mov ds,ax
  6423                              <3> 	mov ax,[%2+2]
  6424                              <3> 	mov word [bp+0], ax
  6425                              <3> 	mov ax,[%2]
  6426                              <3> 	mov word [bp+2], ax
  6427                              <3> 	mov ax,%3
  6428                              <3> 	mov ds,ax
  6429                              <3> 	mov ax,[%4+2]
  6430                              <3> 	mov word [bp+4], ax
  6431                              <3> 	mov ax,[%4]
  6432                              <3> 	mov word [bp+6], ax
  6433                              <3> 	call proc_mul32
  6434                              <3> 	mov ax,sp
  6435                              <3> 	mov bp,ax
  6436                              <3> 	mov ax,%5
  6437                              <3> 	mov ds,ax
  6438                              <3> 	mov word ax, [bp+8]
  6439                              <3> 	mov word [%6+2], ax
  6440                              <3> 	mov word ax, [bp+0x0A]
  6441                              <3> 	mov word [%6], ax
  6442                              <3> 	stkclose 0x0C
  6443                              <3> %endmacro	
  6444                              <3> 	
  6445                              <3> %macro add32 6
  6446                              <3> 	stkopen 0x0C
  6447                              <3> 	mov ax,%1
  6448                              <3> 	mov ds,ax
  6449                              <3> 	mov ax,[%2+2]
  6450                              <3> 	mov word [bp+0], ax
  6451                              <3> 	mov ax,[%2]
  6452                              <3> 	mov word [bp+2], ax
  6453                              <3> 	mov ax,%3
  6454                              <3> 	mov ds,ax
  6455                              <3> 	mov ax,[%4+2]
  6456                              <3> 	mov word [bp+4], ax
  6457                              <3> 	mov ax,[%4]
  6458                              <3> 	mov word [bp+6], ax
  6459                              <3> 	call proc_add32
  6460                              <3> 	mov ax,sp
  6461                              <3> 	mov bp,ax
  6462                              <3> 	mov ax,%5
  6463                              <3> 	mov ds,ax
  6464                              <3> 	mov word ax, [bp+8]
  6465                              <3> 	mov word [%6+2], ax
  6466                              <3> 	mov word ax, [bp+0x0A]
  6467                              <3> 	mov word [%6], ax
  6468                              <3> 	stkclose 0x0C
  6469                              <3> %endmacro
  6470                              <3> 
  6471                              <3> %macro sub32 6
  6472                              <3> 	stkopen 0x0C
  6473                              <3> 	mov ax,%1
  6474                              <3> 	mov ds,ax
  6475                              <3> 	mov ax,[%2+2]
  6476                              <3> 	mov word [bp+0], ax
  6477                              <3> 	mov ax,[%2]
  6478                              <3> 	mov word [bp+2], ax
  6479                              <3> 	mov ax,%3
  6480                              <3> 	mov ds,ax
  6481                              <3> 	mov ax,[%4+2]
  6482                              <3> 	mov word [bp+4], ax
  6483                              <3> 	mov ax,[%4]
  6484                              <3> 	mov word [bp+6], ax
  6485                              <3> 	call proc_sub32
  6486                              <3> 	mov ax,sp
  6487                              <3> 	mov bp,ax
  6488                              <3> 	mov ax,%5
  6489                              <3> 	mov ds,ax
  6490                              <3> 	mov word ax, [bp+8]
  6491                              <3> 	mov word [%6+2], ax
  6492                              <3> 	mov word ax, [bp+0x0A]
  6493                              <3> 	mov word [%6], ax
  6494                              <3> 	stkclose 0x0C
  6495                              <3> %endmacro
  6496                              <3> 
  6497                              <3> %macro idiv32 10
  6498                              <3> 	stkopen 0x11
  6499                              <3> 	mov ax,%1
  6500                              <3> 	mov ds,ax
  6501                              <3> 	mov ax,[%2+2]
  6502                              <3> 	mov word [bp+0], ax
  6503                              <3> 	mov ax,[%2]
  6504                              <3> 	mov word [bp+2], ax
  6505                              <3> 	mov ax,%3
  6506                              <3> 	mov ds,ax
  6507                              <3> 	mov ax,[%4+2]
  6508                              <3> 	mov word [bp+4], ax
  6509                              <3> 	mov ax,[%4]
  6510                              <3> 	mov word [bp+6], ax
  6511                              <3> 	call proc_idiv32
  6512                              <3> 	mov ax,sp
  6513                              <3> 	mov bp,ax
  6514                              <3> 	mov ax,%5
  6515                              <3> 	mov ds,ax
  6516                              <3> 	mov word ax, [bp+8]
  6517                              <3> 	mov word [%6+2], ax
  6518                              <3> 	mov word ax, [bp+0x0A]
  6519                              <3> 	mov word [%6], ax
  6520                              <3> 	mov ax,%7
  6521                              <3> 	mov ds,ax
  6522                              <3> 	mov word ax,[bp+0x0C]
  6523                              <3> 	mov word [%8+2],ax
  6524                              <3> 	mov word ax,[bp+0x0E]
  6525                              <3> 	mov word [%8],ax
  6526                              <3> 	mov ax,%9
  6527                              <3> 	mov ds,ax
  6528                              <3> 	mov byte al,[bp+0x10]
  6529                              <3> 	mov byte [%10],al
  6530                              <3> 	stkclose 0x11
  6531                              <3> %endmacro
  6532                              <3> 
  6533                              <3> %macro imul32 6
  6534                              <3> 	stkopen 0x0C
  6535                              <3> 	mov ax,%1
  6536                              <3> 	mov ds,ax
  6537                              <3> 	mov ax,[%2+2]
  6538                              <3> 	mov word [bp+0], ax
  6539                              <3> 	mov ax,[%2]
  6540                              <3> 	mov word [bp+2], ax
  6541                              <3> 	mov ax,%3
  6542                              <3> 	mov ds,ax
  6543                              <3> 	mov ax,[%4+2]
  6544                              <3> 	mov word [bp+4], ax
  6545                              <3> 	mov ax,[%4]
  6546                              <3> 	mov word [bp+6], ax
  6547                              <3> 	call proc_imul32
  6548                              <3> 	mov ax,sp
  6549                              <3> 	mov bp,ax
  6550                              <3> 	mov ax,%5
  6551                              <3> 	mov ds,ax
  6552                              <3> 	mov word ax, [bp+8]
  6553                              <3> 	mov word [%6+2], ax
  6554                              <3> 	mov word ax, [bp+0x0A]
  6555                              <3> 	mov word [%6], ax
  6556                              <3> 	stkclose 0x0C
  6557                              <3> %endmacro
  6558                              <3> 	
  6559                              <3> %macro cmp32 3
  6560                              <3> 	cmp32 cs, %1, cs, %2, %3
  6561                              <3> %endmacro	
  6562                              <3> 	
  6563                              <3> %macro cmp32 5
  6564                              <3> 	stkopen 9
  6565                              <3> 	mov ax,%1
  6566                              <3> 	mov ds,ax
  6567                              <3> 	mov word ax,[%2+2]
  6568                              <3> 	mov word [bp+0], ax
  6569                              <3> 	mov word ax,[%2]
  6570                              <3> 	mov word [bp+2], ax	
  6571                              <3> 	mov ax,%3
  6572                              <3> 	mov ds,ax
  6573                              <3> 	mov word ax,[%4+2]
  6574                              <3> 	mov word [bp+4], ax
  6575                              <3> 	mov word ax,[%4]
  6576                              <3> 	mov word [bp+6], ax	
  6577                              <3> 	call proc_cmp32
  6578                              <3> 	mov ax,sp
  6579                              <3> 	mov bp,ax
  6580                              <3> 	mov al,[bp+8]
  6581                              <3> 	mov byte %5,al
  6582                              <3> 	stkclose 9
  6583                              <3> %endmacro
  6584                              <3> 	
  6585                              <3> %macro shl32 2
  6586                              <3> 	shl32 cs, %1, %2
  6587                              <3> %endmacro	
  6588                              <3> 	
  6589                              <3> %macro shl32 3
  6590                              <3> 	stkopen 5
  6591                              <3> 	mov ax,%1
  6592                              <3> 	mov ds,ax
  6593                              <3> 	mov word ax,[%2+2]
  6594                              <3> 	mov word [bp+0], ax
  6595                              <3> 	mov word ax,[%2]
  6596                              <3> 	mov word [bp+2], ax
  6597                              <3> 	mov byte al, %3
  6598                              <3> 	mov byte [bp+4], al 
  6599                              <3> 	call proc_shl32
  6600                              <3> 	mov ax,sp
  6601                              <3> 	mov bp,ax
  6602                              <3> 	mov ax,%1
  6603                              <3> 	mov ds,ax
  6604                              <3> 	mov ax,[bp+0]
  6605                              <3> 	mov word [%2+2],ax
  6606                              <3> 	mov ax,[bp+2]
  6607                              <3> 	mov word [%2],ax
  6608                              <3> 	stkclose 5
  6609                              <3> %endmacro
  6610                              <3> 
  6611                              <3> 
  6612                              <3> %macro shr32 2
  6613                              <3> 	shr32 cs, %1, %2
  6614                              <3> %endmacro	
  6615                              <3> 	
  6616                              <3> %macro shr32 3
  6617                              <3> 	stkopen 5
  6618                              <3> 	mov ax,%1
  6619                              <3> 	mov ds,ax
  6620                              <3> 	mov word ax,[%2+2]
  6621                              <3> 	mov word [bp+0], ax
  6622                              <3> 	mov word ax,[%2]
  6623                              <3> 	mov word [bp+2], ax
  6624                              <3> 	mov byte al, %3
  6625                              <3> 	mov byte [bp+4], al 
  6626                              <3> 	call proc_shr32
  6627                              <3> 	mov ax,sp
  6628                              <3> 	mov bp,ax
  6629                              <3> 	mov ax,%1
  6630                              <3> 	mov ds,ax
  6631                              <3> 	mov ax,[bp+0]
  6632                              <3> 	mov word [%2+2],ax
  6633                              <3> 	mov ax,[bp+2]
  6634                              <3> 	mov word [%2],ax
  6635                              <3> 	stkclose 5
  6636                              <3> %endmacro
  6637                              <3> 
  6638                              <3> %macro inc16 2
  6639                              <3> 	mov ax,%1
  6640                              <3> 	mov ds,ax
  6641                              <3> 	inc word [%2]
  6642                              <3> %endmacro
  6643                              <3> 
  6644                              <3> %macro dec16 2
  6645                              <3> 	mov ax,%1
  6646                              <3> 	mov ds,ax
  6647                              <3> 	dec word [%2]
  6648                              <3> %endmacro
  6649                              <3> 
  6650                              <3> %macro add16 4	
  6651                              <3> 	mov ax,%3
  6652                              <3> 	mov ds,ax
  6653                              <3> 	mov bx,[%4]	
  6654                              <3> 	mov ax,%1
  6655                              <3> 	mov ds,ax	
  6656                              <3> 	add [%2],bx
  6657                              <3> %endmacro
  6658                              <3> 
  6659                              <3> %macro sub16 4
  6660                              <3> 	mov ax,%3
  6661                              <3> 	mov ds,ax
  6662                              <3> 	mov bx,[%4]
  6663                              <3> 	mov ax,%1
  6664                              <3> 	mov ds,ax
  6665                              <3> 	sub [%2],bx
  6666                              <3> %endmacro
  6667                              <3> 
  6668                              <3> %macro mul16 4
  6669                              <3> 	mov ax,%1
  6670                              <3> 	mov ds,ax
  6671                              <3> 	mov bx,[%2]
  6672                              <3> 	mov ax,%3
  6673                              <3> 	mov ds,ax
  6674                              <3> 	mov cx,[%4]
  6675                              <3> 	
  6676                              <3> 	mov ax,bx
  6677                              <3> 	imul cx
  6678                              <3> 	
  6679                              <3> 	mov dx,%1
  6680                              <3> 	mov ds,dx
  6681                              <3> 	mov [%2],ax
  6682                              <3> %endmacro
  6683                              <3> 
  6684                              <3> %macro div16 4
  6685                              <3> 	mov ax,%1
  6686                              <3> 	mov ds,ax
  6687                              <3> 	mov bx,[%2]
  6688                              <3> 	mov ax,%3
  6689                              <3> 	mov ds,ax
  6690                              <3> 	mov cx,[%4]
  6691                              <3> 	
  6692                              <3> 	xor dx,dx
  6693                              <3> 	mov ax,bx
  6694                              <3> 	idiv cx
  6695                              <3> 	
  6696                              <3> 	mov dx,%1
  6697                              <3> 	mov ds,dx
  6698                              <3> 	mov [%2],ax
  6699                              <3> %endmacro
  6700                              <3> 
  6701                              <3> 
  6702                              <3> %macro mod16 4
  6703                              <3> 	mov ax,%1
  6704                              <3> 	mov ds,ax
  6705                              <3> 	mov bx,[%2]
  6706                              <3> 	mov ax,%3
  6707                              <3> 	mov ds,ax
  6708                              <3> 	mov cx,[%4]
  6709                              <3> 	
  6710                              <3> 	xor dx,dx
  6711                              <3> 	mov ax,bx
  6712                              <3> 	idiv cx
  6713                              <3> 	
  6714                              <3> 	mov bx,%1
  6715                              <3> 	mov ds,bx
  6716                              <3> 	mov [%2],dx
  6717                              <3> %endmacro
  6718                              <3> 
  6719                              <3> %macro cmp16 5
  6720                              <3> 	mov ax,%1
  6721                              <3> 	mov ds,ax
  6722                              <3> 	mov bx,[%2]
  6723                              <3> 	mov ax,%3
  6724                              <3> 	mov ds,ax
  6725                              <3> 	mov	cx,[%4]
  6726                              <3> 	
  6727                              <3> 	cmp bx,cx
  6728                              <3> 	jg %%above
  6729                              <3> 	jl %%below
  6730                              <3> 		mov byte %5, 0
  6731                              <3> 		jmp %%endcmp
  6732                              <3> 	%%above:
  6733                              <3> 		mov byte %5, 1
  6734                              <3> 		jmp %%endcmp
  6735                              <3> 	%%below:
  6736                              <3> 		mov byte %5, -1
  6737                              <3> 	%%endcmp:
  6738                              <3> %endmacro
  6739                              <3> 
  6740                              <3> %macro chgsig 2
  6741                              <3> 	mov ax,%1
  6742                              <3> 	mov ds,ax
  6743                              <3> 	mov ax,[%2]
  6744                              <3> 	mov bx,0xFFFF
  6745                              <3> 	sub bx,ax
  6746                              <3> 	inc bx
  6747                              <3> 	mov [%2],bx
  6748                              <3> %endmacro
  6749                              <3> 	
  6750                              <3> %endif
  6751                              <2> 	%include "lib/float.mac"
  6752                              <3> 
  6753                              <3> %ifndef FLOAT_MAC
  6754                              <3> 	%define FLOAT_MAC
  6755                              <3> 	
  6756                              <3> 	%include "lib/float.asm"
  6757                              <3> 
  6758                              <3> %macro flinvsig 1
  6759                              <3> 	flinvsig cs, %1
  6760                              <3> %endmacro
  6761                              <3> 
  6762                              <3> %macro flsetsig 1
  6763                              <3> 	flsetsig cs, %1
  6764                              <3> %endmacro
  6765                              <3> 
  6766                              <3> %macro flclrsig 1
  6767                              <3> 	flclrsig cs, %1
  6768                              <3> %endmacro
  6769                              <3> 
  6770                              <3> %macro int16tofl 2
  6771                              <3> 	int16tofl cs, %1, cs, %2
  6772                              <3> %endmacro
  6773                              <3> 
  6774                              <3> %macro fltoint16 2
  6775                              <3> 	fltoint16 cs, %1, cs, %2
  6776                              <3> %endmacro
  6777                              <3> 
  6778                              <3> %macro fltoint32 1
  6779                              <3> 	fltoint32 %1, %1
  6780                              <3> %endmacro
  6781                              <3> 
  6782                              <3> %macro fltoint32 2
  6783                              <3> 	fltoint32 cs, %1, cs, %2
  6784                              <3> %endmacro
  6785                              <3> 
  6786                              <3> %macro int32tofl 1
  6787                              <3> 	int32tofl %1, %1
  6788                              <3> %endmacro
  6789                              <3> 
  6790                              <3> %macro int32tofl 2
  6791                              <3> 	int32tofl cs, %1, cs, %2
  6792                              <3> %endmacro
  6793                              <3> 
  6794                              <3> %macro flcmp 3
  6795                              <3> 	flcmp cs, %1, cs, %2, %3
  6796                              <3> %endmacro
  6797                              <3> 
  6798                              <3> %macro flshl 1
  6799                              <3> 	flshl cs, %1
  6800                              <3> %endmacro
  6801                              <3> 
  6802                              <3> %macro flshr 1
  6803                              <3> 	flshr cs, %1
  6804                              <3> %endmacro
  6805                              <3> 
  6806                              <3> %macro fladd 3
  6807                              <3> 	fladd cs, %1, cs, %2, cs, %3
  6808                              <3> %endmacro
  6809                              <3> 
  6810                              <3> %macro flsub 3
  6811                              <3> 	flsub cs, %1, cs, %2, cs, %3
  6812                              <3> %endmacro	
  6813                              <3> 
  6814                              <3> %macro flmul 3
  6815                              <3> 	flmul cs, %1, cs, %2, cs, %3
  6816                              <3> %endmacro
  6817                              <3> 
  6818                              <3> %macro fldiv 3
  6819                              <3> 	fldiv cs, %1, cs, %2, cs, %3
  6820                              <3> %endmacro	
  6821                              <3> 
  6822                              <3> %macro fladd 6
  6823                              <3> 	fladdorsub %1, %2, %3, %4, %5, %6, 0
  6824                              <3> %endmacro
  6825                              <3> 
  6826                              <3> %macro flsub 6
  6827                              <3> 	fladdorsub %1, %2, %3, %4, %5, %6, 0x8000
  6828                              <3> %endmacro
  6829                              <3> 
  6830                              <3> %macro fltoint16 4
  6831                              <3> 	stkopen 0x06
  6832                              <3> 	mov ax,%1
  6833                              <3> 	mov ds,ax
  6834                              <3> 	mov ax,[%2+2]
  6835                              <3> 	mov [bp+0],ax
  6836                              <3> 	mov ax,[%2]
  6837                              <3> 	mov [bp+2],ax	
  6838                              <3> 	call proc_fltoint16
  6839                              <3> 	mov ax,sp
  6840                              <3> 	mov bp,ax
  6841                              <3> 	mov ax,%3
  6842                              <3> 	mov ds,ax
  6843                              <3> 	mov ax,[bp+4]
  6844                              <3> 	mov [%4],ax
  6845                              <3> 	stkclose 0x06
  6846                              <3> %endmacro
  6847                              <3> 
  6848                              <3> %macro int16tofl 4	
  6849                              <3> 	stkopen 0x06
  6850                              <3> 	mov ax,%1
  6851                              <3> 	mov ds,ax
  6852                              <3> 	mov ax,[%2]
  6853                              <3> 	mov [bp+0],ax	
  6854                              <3> 	call proc_int16tofl
  6855                              <3> 	mov ax,sp
  6856                              <3> 	mov bp,ax
  6857                              <3> 	mov ax,%3
  6858                              <3> 	mov ds,ax
  6859                              <3> 	mov ax,[bp+2]
  6860                              <3> 	mov [%4+2],ax
  6861                              <3> 	mov ax,[bp+4]
  6862                              <3> 	mov [%4],ax
  6863                              <3> 	stkclose 0x06
  6864                              <3> %endmacro
  6865                              <3> 
  6866                              <3> %macro fltoint32 4
  6867                              <3> 	stkopen 0x08
  6868                              <3> 	mov ax,%1
  6869                              <3> 	mov ds,ax
  6870                              <3> 	mov ax,[%2+2]
  6871                              <3> 	mov [bp+0],ax
  6872                              <3> 	mov ax,[%2]
  6873                              <3> 	mov [bp+2],ax	
  6874                              <3> 	call proc_fltoint32
  6875                              <3> 	mov ax,sp
  6876                              <3> 	mov bp,ax
  6877                              <3> 	mov ax,%3
  6878                              <3> 	mov ds,ax
  6879                              <3> 	mov ax,[bp+4]
  6880                              <3> 	mov [%4+2],ax
  6881                              <3> 	mov ax,[bp+6]
  6882                              <3> 	mov [%4],ax
  6883                              <3> 	stkclose 0x08
  6884                              <3> %endmacro
  6885                              <3> 
  6886                              <3> %macro int32tofl 4
  6887                              <3> 	stkopen 0x08
  6888                              <3> 	mov ax,%1
  6889                              <3> 	mov ds,ax
  6890                              <3> 	mov ax,[%2+2]
  6891                              <3> 	mov [bp+0],ax
  6892                              <3> 	mov ax,[%2]
  6893                              <3> 	mov [bp+2],ax	
  6894                              <3> 	call proc_int32tofl
  6895                              <3> 	mov ax,sp
  6896                              <3> 	mov bp,ax
  6897                              <3> 	mov ax,%3
  6898                              <3> 	mov ds,ax
  6899                              <3> 	mov ax,[bp+4]
  6900                              <3> 	mov [%4+2],ax
  6901                              <3> 	mov ax,[bp+6]
  6902                              <3> 	mov [%4],ax
  6903                              <3> 	stkclose 0x08
  6904                              <3> %endmacro
  6905                              <3> 
  6906                              <3> %macro flinvsig 2
  6907                              <3> 	stkopen 0x02
  6908                              <3> 	mov ax,%1
  6909                              <3> 	mov ds,ax
  6910                              <3> 	mov ax,[%2+2]
  6911                              <3> 	mov word [bp+0], ax
  6912                              <3> 	call proc_flinvsig
  6913                              <3> 	push sp
  6914                              <3> 	pop bp
  6915                              <3> 	mov ax,[bp+0]
  6916                              <3> 	mov word [%2+2],ax
  6917                              <3> 	stkclose 0x02
  6918                              <3> %endmacro
  6919                              <3> 
  6920                              <3> %macro flsetsig 2
  6921                              <3> 	stkopen 0x04
  6922                              <3> 	mov ax,%1
  6923                              <3> 	mov ds,ax
  6924                              <3> 	mov ax,[%2+2]
  6925                              <3> 	mov word [bp+0], ax
  6926                              <3> 	mov word [bp+2], 0x8000
  6927                              <3> 	call proc_flsetsig
  6928                              <3> 	push sp
  6929                              <3> 	pop bp
  6930                              <3> 	mov ax,[bp+0]
  6931                              <3> 	mov word [%2+2],ax
  6932                              <3> 	stkclose 0x04	
  6933                              <3> %endmacro
  6934                              <3> 
  6935                              <3> %macro flclrsig 2
  6936                              <3> 	stkopen 0x04
  6937                              <3> 	mov ax,%1
  6938                              <3> 	mov ds,ax
  6939                              <3> 	mov ax,[%2+2]
  6940                              <3> 	mov word [bp+0], ax
  6941                              <3> 	mov word [bp+2], 0x0000
  6942                              <3> 	call proc_flsetsig
  6943                              <3> 	push sp
  6944                              <3> 	pop bp
  6945                              <3> 	mov ax,[bp+0]
  6946                              <3> 	mov word [%2+2],ax
  6947                              <3> 	stkclose 0x04	
  6948                              <3> %endmacro
  6949                              <3> 
  6950                              <3> %macro flcmp 5	
  6951                              <3> 	stkopen 0x09
  6952                              <3> 	mov ax,%1
  6953                              <3> 	mov ds,ax
  6954                              <3> 	mov ax,[%2+2]
  6955                              <3> 	mov [bp+0],ax
  6956                              <3> 	mov ax,[%2]
  6957                              <3> 	mov [bp+2],ax
  6958                              <3> 	mov ax,%3
  6959                              <3> 	mov ds,ax
  6960                              <3> 	mov ax,[%4+2]
  6961                              <3> 	mov [bp+4],ax
  6962                              <3> 	mov ax,[%4]
  6963                              <3> 	mov [bp+6],ax
  6964                              <3> 	call proc_flcmp
  6965                              <3> 	mov ax,sp
  6966                              <3> 	mov bp,ax
  6967                              <3> 	mov byte %5,[bp+8]
  6968                              <3> 	stkclose 0x09
  6969                              <3> %endmacro
  6970                              <3> 
  6971                              <3> %macro flshl 2	
  6972                              <3> 	stkopen 0x02
  6973                              <3> 	mov ax,%1
  6974                              <3> 	mov ds,ax
  6975                              <3> 	mov ax,[%2+2]
  6976                              <3> 	mov [bp+0],ax
  6977                              <3> 	call proc_flshl
  6978                              <3> 	mov ax,sp
  6979                              <3> 	mov bp,ax
  6980                              <3> 	mov ax,%1
  6981                              <3> 	mov ds,ax
  6982                              <3> 	mov ax,[bp+0]
  6983                              <3> 	mov [%2+2],ax
  6984                              <3> 	stkclose 0x02
  6985                              <3> %endmacro
  6986                              <3> 
  6987                              <3> %macro flshr 2	
  6988                              <3> 	stkopen 0x02
  6989                              <3> 	mov ax,%1
  6990                              <3> 	mov ds,ax
  6991                              <3> 	mov ax,[%2+2]
  6992                              <3> 	mov [bp+0],ax
  6993                              <3> 	call proc_flshr
  6994                              <3> 	mov ax,sp
  6995                              <3> 	mov bp,ax
  6996                              <3> 	mov ax,%1
  6997                              <3> 	mov ds,ax
  6998                              <3> 	mov ax,[bp+0]
  6999                              <3> 	mov [%2+2],ax
  7000                              <3> 	stkclose 0x02
  7001                              <3> %endmacro
  7002                              <3> 
  7003                              <3> %macro fldiv 6	
  7004                              <3> 	stkopen 0x0C
  7005                              <3> 	mov ax,%1
  7006                              <3> 	mov ds,ax
  7007                              <3> 	mov ax,[%2+2]
  7008                              <3> 	mov [bp+0],ax
  7009                              <3> 	mov ax,[%2]
  7010                              <3> 	mov [bp+2],ax
  7011                              <3> 	mov ax,%3
  7012                              <3> 	mov ds,ax
  7013                              <3> 	mov ax,[%4+2]
  7014                              <3> 	mov [bp+4],ax
  7015                              <3> 	mov ax,[%4]
  7016                              <3> 	mov [bp+6],ax
  7017                              <3> 	call proc_fldiv
  7018                              <3> 	mov ax,sp
  7019                              <3> 	mov bp,ax
  7020                              <3> 	mov ax,%5
  7021                              <3> 	mov ds,ax
  7022                              <3> 	mov ax,[bp+8]
  7023                              <3> 	mov [%6+2],ax
  7024                              <3> 	mov ax,[bp+0x0A]
  7025                              <3> 	mov [%6],ax
  7026                              <3> 	stkclose 0x0C
  7027                              <3> %endmacro
  7028                              <3> 
  7029                              <3> %macro flmul 6	
  7030                              <3> 	stkopen 0x0C
  7031                              <3> 	mov ax,%1
  7032                              <3> 	mov ds,ax
  7033                              <3> 	mov ax,[%2+2]
  7034                              <3> 	mov [bp+0],ax
  7035                              <3> 	mov ax,[%2]
  7036                              <3> 	mov [bp+2],ax
  7037                              <3> 	mov ax,%3
  7038                              <3> 	mov ds,ax
  7039                              <3> 	mov ax,[%4+2]
  7040                              <3> 	mov [bp+4],ax
  7041                              <3> 	mov ax,[%4]
  7042                              <3> 	mov [bp+6],ax
  7043                              <3> 	call proc_flmul
  7044                              <3> 	mov ax,sp
  7045                              <3> 	mov bp,ax
  7046                              <3> 	mov ax,%5
  7047                              <3> 	mov ds,ax
  7048                              <3> 	mov ax,[bp+8]
  7049                              <3> 	mov [%6+2],ax
  7050                              <3> 	mov ax,[bp+0x0A]
  7051                              <3> 	mov [%6],ax
  7052                              <3> 	stkclose 0x0C
  7053                              <3> %endmacro
  7054                              <3> 	
  7055                              <3> %macro fladdorsub 7
  7056                              <3> 	stkopen 0x0E
  7057                              <3> 	mov ax,%1
  7058                              <3> 	mov ds,ax
  7059                              <3> 	mov ax,[%2+2]
  7060                              <3> 	mov [bp+0],ax
  7061                              <3> 	mov ax,[%2]
  7062                              <3> 	mov [bp+2],ax
  7063                              <3> 	mov ax,%3
  7064                              <3> 	mov ds,ax
  7065                              <3> 	mov ax,[%4+2]
  7066                              <3> 	mov [bp+4],ax
  7067                              <3> 	mov ax,[%4]
  7068                              <3> 	mov [bp+6],ax
  7069                              <3> 	mov word [bp+0x0C], %7
  7070                              <3> 	call proc_fladdorsub
  7071                              <3> 	mov ax,sp
  7072                              <3> 	mov bp,ax
  7073                              <3> 	mov ax,%5
  7074                              <3> 	mov ds,ax
  7075                              <3> 	mov ax,[bp+8]
  7076                              <3> 	mov [%6+2],ax
  7077                              <3> 	mov ax,[bp+0x0A]
  7078                              <3> 	mov [%6],ax
  7079                              <3> 	stkclose 0x0E
  7080                              <3> %endmacro
  7081                              <3> 	
  7082                              <3> %endif
  7083                              <2> 
  7084                              <2> %macro __sin 4
  7085                              <2> 	__sinorcos %1, %2, %3, %4, 1
  7086                              <2> %endmacro
  7087                              <2> 
  7088                              <2> %macro __cos 4
  7089                              <2> 	__sinorcos %1, %2, %3, %4, 0
  7090                              <2> %endmacro
  7091                              <2> 
  7092                              <2> %macro __sin0x90 4
  7093                              <2> 	__sinorcos0x90 %1, %2, %3, %4, 1
  7094                              <2> %endmacro
  7095                              <2> 
  7096                              <2> %macro __cos0x90 4
  7097                              <2> 	__sinorcos0x90 %1, %2, %3, %4, 0
  7098                              <2> %endmacro
  7099                              <2> 
  7100                              <2> %macro __toradians 4
  7101                              <2> 	stkopen 0x08
  7102                              <2> 	mov word [bp+0],%1
  7103                              <2> 	mov word [bp+2],%2
  7104                              <2> 	call proc_toradians
  7105                              <2> 	push sp
  7106                              <2> 	pop bp
  7107                              <2> 	mov word %3, [bp+4]
  7108                              <2> 	mov word %4, [bp+6]
  7109                              <2> 	stkclose 0x08
  7110                              <2> %endmacro
  7111                              <2> 
  7112                              <2> %macro __todegrees 4
  7113                              <2> 	stkopen 0x08
  7114                              <2> 	mov word [bp+0],%1
  7115                              <2> 	mov word [bp+2],%2
  7116                              <2> 	call proc_todegrees
  7117                              <2> 	push sp
  7118                              <2> 	pop bp
  7119                              <2> 	mov word %3, [bp+4]
  7120                              <2> 	mov word %4, [bp+6]
  7121                              <2> 	stkclose 0x08
  7122                              <2> %endmacro
  7123                              <2> 
  7124                              <2> %macro __atan 4
  7125                              <2> 	stkopen 0x08
  7126                              <2> 	mov word [bp+0],%1
  7127                              <2> 	mov word [bp+2],%2	
  7128                              <2> 	call proc_atan
  7129                              <2> 	push sp
  7130                              <2> 	pop bp
  7131                              <2> 	mov word %3,[bp+4]
  7132                              <2> 	mov word %4,[bp+6]
  7133                              <2> 	stkclose 0x08
  7134                              <2> %endmacro
  7135                              <2> 
  7136                              <2> %macro __sinorcos 5
  7137                              <2> 	stkopen 0x09
  7138                              <2> 	mov word [bp+0],%1
  7139                              <2> 	mov word [bp+2],%2	
  7140                              <2> 	mov byte [bp+8],%5
  7141                              <2> 	call proc_sinorcos
  7142                              <2> 	push sp
  7143                              <2> 	pop bp
  7144                              <2> 	mov word %3,[bp+4]
  7145                              <2> 	mov word %4,[bp+6]
  7146                              <2> 	stkclose 0x09
  7147                              <2> %endmacro
  7148                              <2> 
  7149                              <2> %macro __sinorcos0x90 5
  7150                              <2> 	stkopen 0x09
  7151                              <2> 	mov word [bp+0],%1
  7152                              <2> 	mov word [bp+2],%2
  7153                              <2> 	mov byte [bp+8],%5
  7154                              <2> 	call proc_sinorcos0x90
  7155                              <2> 	push sp
  7156                              <2> 	pop bp
  7157                              <2> 	mov word %3,[bp+4]
  7158                              <2> 	mov word %4,[bp+6]
  7159                              <2> 	stkclose 0x09
  7160                              <2> %endmacro
  7161                              <2> 
  7162                              <2> %macro __sinnorm 3
  7163                              <2> 	stkopen 0x06
  7164                              <2> 	mov word [bp+0],%1
  7165                              <2> 	mov word [bp+2],%2
  7166                              <2> 	call proc__sinnorm
  7167                              <2> 	push sp
  7168                              <2> 	pop bp
  7169                              <2> 	mov word %1,[bp+0]
  7170                              <2> 	mov word %2,[bp+2]
  7171                              <2> 	mov word %3,[bp+4]
  7172                              <2> 	stkclose 0x06
  7173                              <2> %endmacro
  7174                              <2> 
  7175                              <2> %macro __cosnorm 3
  7176                              <2> 	stkopen 0x06
  7177                              <2> 	mov word [bp+0],%1
  7178                              <2> 	mov word [bp+2],%2
  7179                              <2> 	call proc__cosnorm
  7180                              <2> 	push sp
  7181                              <2> 	pop bp
  7182                              <2> 	mov word %1,[bp+0]
  7183                              <2> 	mov word %2,[bp+2]
  7184                              <2> 	mov word %3,[bp+4]
  7185                              <2> 	stkclose 0x06
  7186                              <2> %endmacro
  7187                              <2> 
  7188                              <2> %macro __norm_factors 5
  7189                              <2> 	stkopen 0x0A
  7190                              <2> 	mov word [bp+0],%1
  7191                              <2> 	mov word [bp+2],%2
  7192                              <2> 	call proc__norm_factors
  7193                              <2> 	push sp
  7194                              <2> 	pop bp
  7195                              <2> 	mov word %3,[bp+4]
  7196                              <2> 	mov word %4,[bp+6]
  7197                              <2> 	mov word %5,[bp+8]
  7198                              <2> 	stkclose 0x0A
  7199                              <2> %endmacro
  7200                              <2> 
  7201                              <2> %macro __fat16 2
  7202                              <2> 	stkopen 0x04
  7203                              <2> 	mov word [bp+0],%1
  7204                              <2> 	call proc__fat16
  7205                              <2> 	push sp
  7206                              <2> 	pop bp
  7207                              <2> 	mov word %2, [bp+2]
  7208                              <2> 	stkclose 0x04
  7209                              <2> %endmacro
  7210                              <2> 
  7211                              <2> %macro __pow16 3
  7212                              <2> 	stkopen 0x06
  7213                              <2> 	mov word [bp+0],%1
  7214                              <2> 	mov word [bp+2],%2
  7215                              <2> 	call proc__pow16
  7216                              <2> 	push sp
  7217                              <2> 	pop bp
  7218                              <2> 	mov word %3, [bp+4]
  7219                              <2> 	stkclose 0x06
  7220                              <2> %endmacro
  7221                              <2> 	
  7222                              <2> section .data
  7223 00001566 DB0F4940            <2> 	PI: dd 0x40490FDB
  7224 0000156A 00003443            <2> 	__180dg: dd 0x43340000
  7225                              <2> 	
  7226                              <2> proc_toradians:
  7227 0000156E 89E0                <2> 	mov ax,sp
  7228 00001570 89C5                <2> 	mov bp,ax
  7229                              <2> 	
  7230 00001572 8B4602              <2> 	mov ax,[bp+2]
  7231 00001575 8B5E04              <2> 	mov bx,[bp+4]		
  7232 00001578 B94940              <2> 	mov cx,0x4049
  7233 0000157B BADB0F              <2> 	mov dx,0x0FDB
  7234                              <2> 	__flmul ax, bx, cx, dx, ax, bx
  7235                              <3>  stkopen 0x0E
  7236 0000157E 83EC0E              <4>  sub word sp, %1
  7237 00001581 54                  <4>  push sp
  7238 00001582 5D                  <4>  pop bp
  7239 00001583 894600              <3>  mov word [bp+0],%1
  7240 00001586 895E02              <3>  mov word [bp+2],%2
  7241 00001589 894E04              <3>  mov word [bp+4],%3
  7242 0000158C 895606              <3>  mov word [bp+6],%4
  7243 0000158F E8FAF7              <3>  call proc_flmul
  7244 00001592 54                  <3>  push sp
  7245 00001593 5D                  <3>  pop bp
  7246 00001594 8B4608              <3>  mov word %5,[bp+8]
  7247 00001597 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7248                              <3>  stkclose 0x0E
  7249 0000159A 83C40E              <4>  add word sp, %1
  7250 0000159D B93443              <2> 	mov cx,0x4334
  7251 000015A0 BA0000              <2> 	mov dx,0x0000	
  7252                              <2> 	__fldiv ax, bx, cx, cx, ax, bx
  7253                              <3>  stkopen 0x0E
  7254 000015A3 83EC0E              <4>  sub word sp, %1
  7255 000015A6 54                  <4>  push sp
  7256 000015A7 5D                  <4>  pop bp
  7257 000015A8 894600              <3>  mov word [bp+0],%1
  7258 000015AB 895E02              <3>  mov word [bp+2],%2
  7259 000015AE 894E04              <3>  mov word [bp+4],%3
  7260 000015B1 894E06              <3>  mov word [bp+6],%4
  7261 000015B4 E8B6F6              <3>  call proc_fldiv
  7262 000015B7 54                  <3>  push sp
  7263 000015B8 5D                  <3>  pop bp
  7264 000015B9 8B4608              <3>  mov word %5,[bp+8]
  7265 000015BC 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7266                              <3>  stkclose 0x0E
  7267 000015BF 83C40E              <4>  add word sp, %1
  7268                              <2> 	
  7269 000015C2 89E1                <2> 	mov cx,sp
  7270 000015C4 89CD                <2> 	mov bp,cx
  7271 000015C6 894606              <2> 	mov [bp+6],ax
  7272 000015C9 895E08              <2> 	mov [bp+8],bx
  7273                              <2> 	
  7274 000015CC C3                  <2> 	ret
  7275                              <2> 	
  7276                              <2> proc_todegrees:
  7277 000015CD 89E0                <2> 	mov ax,sp
  7278 000015CF 89C5                <2> 	mov bp,ax
  7279                              <2> 	
  7280 000015D1 8B4602              <2> 	mov ax,[bp+2]
  7281 000015D4 8B5E04              <2> 	mov bx,[bp+4]		
  7282 000015D7 B93443              <2> 	mov cx,0x4334
  7283 000015DA BA0000              <2> 	mov dx,0x0000
  7284                              <2> 	__flmul ax, bx, cx, dx, ax, bx		
  7285                              <3>  stkopen 0x0E
  7286 000015DD 83EC0E              <4>  sub word sp, %1
  7287 000015E0 54                  <4>  push sp
  7288 000015E1 5D                  <4>  pop bp
  7289 000015E2 894600              <3>  mov word [bp+0],%1
  7290 000015E5 895E02              <3>  mov word [bp+2],%2
  7291 000015E8 894E04              <3>  mov word [bp+4],%3
  7292 000015EB 895606              <3>  mov word [bp+6],%4
  7293 000015EE E89BF7              <3>  call proc_flmul
  7294 000015F1 54                  <3>  push sp
  7295 000015F2 5D                  <3>  pop bp
  7296 000015F3 8B4608              <3>  mov word %5,[bp+8]
  7297 000015F6 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7298                              <3>  stkclose 0x0E
  7299 000015F9 83C40E              <4>  add word sp, %1
  7300 000015FC B94940              <2> 	mov cx,0x4049
  7301 000015FF BADB0F              <2> 	mov dx,0x0FDB	
  7302                              <2> 	__fldiv ax, bx, cx, cx, ax, bx
  7303                              <3>  stkopen 0x0E
  7304 00001602 83EC0E              <4>  sub word sp, %1
  7305 00001605 54                  <4>  push sp
  7306 00001606 5D                  <4>  pop bp
  7307 00001607 894600              <3>  mov word [bp+0],%1
  7308 0000160A 895E02              <3>  mov word [bp+2],%2
  7309 0000160D 894E04              <3>  mov word [bp+4],%3
  7310 00001610 894E06              <3>  mov word [bp+6],%4
  7311 00001613 E857F6              <3>  call proc_fldiv
  7312 00001616 54                  <3>  push sp
  7313 00001617 5D                  <3>  pop bp
  7314 00001618 8B4608              <3>  mov word %5,[bp+8]
  7315 0000161B 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7316                              <3>  stkclose 0x0E
  7317 0000161E 83C40E              <4>  add word sp, %1
  7318                              <2> 	
  7319 00001621 89E1                <2> 	mov cx,sp
  7320 00001623 89CD                <2> 	mov bp,cx
  7321 00001625 894606              <2> 	mov [bp+6],ax
  7322 00001628 895E08              <2> 	mov [bp+8],bx
  7323                              <2> 	
  7324 0000162B C3                  <2> 	ret
  7325                              <2> 
  7326                              <2> proc_sinorcos:
  7327 0000162C 89E0                <2> 	mov ax,sp
  7328 0000162E 89C5                <2> 	mov bp,ax
  7329                              <2> 	
  7330 00001630 8B4602              <2> 	mov ax,[bp+2]
  7331 00001633 8B5E04              <2> 	mov bx,[bp+4]
  7332 00001636 807E0A00            <2> 	cmp byte [bp+0x0A],0
  7333 0000163A 741E                <2> 	jz .normcos
  7334                              <2> 		__sinnorm ax, bx, cx
  7335                              <3>  stkopen 0x06
  7336 0000163C 83EC06              <4>  sub word sp, %1
  7337 0000163F 54                  <4>  push sp
  7338 00001640 5D                  <4>  pop bp
  7339 00001641 894600              <3>  mov word [bp+0],%1
  7340 00001644 895E02              <3>  mov word [bp+2],%2
  7341 00001647 E82303              <3>  call proc__sinnorm
  7342 0000164A 54                  <3>  push sp
  7343 0000164B 5D                  <3>  pop bp
  7344 0000164C 8B4600              <3>  mov word %1,[bp+0]
  7345 0000164F 8B5E02              <3>  mov word %2,[bp+2]
  7346 00001652 8B4E04              <3>  mov word %3,[bp+4]
  7347                              <3>  stkclose 0x06
  7348 00001655 83C406              <4>  add word sp, %1
  7349 00001658 EB1C                <2> 		jmp .endnorm
  7350                              <2> 	.normcos:
  7351                              <2> 		__cosnorm ax, bx, cx	
  7352                              <3>  stkopen 0x06
  7353 0000165A 83EC06              <4>  sub word sp, %1
  7354 0000165D 54                  <4>  push sp
  7355 0000165E 5D                  <4>  pop bp
  7356 0000165F 894600              <3>  mov word [bp+0],%1
  7357 00001662 895E02              <3>  mov word [bp+2],%2
  7358 00001665 E8AB03              <3>  call proc__cosnorm
  7359 00001668 54                  <3>  push sp
  7360 00001669 5D                  <3>  pop bp
  7361 0000166A 8B4600              <3>  mov word %1,[bp+0]
  7362 0000166D 8B5E02              <3>  mov word %2,[bp+2]
  7363 00001670 8B4E04              <3>  mov word %3,[bp+4]
  7364                              <3>  stkclose 0x06
  7365 00001673 83C406              <4>  add word sp, %1
  7366                              <2> 	.endnorm:
  7367                              <2> 	
  7368 00001676 51                  <2> 	push cx
  7369                              <2> 	
  7370 00001677 89E1                <2> 	mov cx,sp
  7371 00001679 89CD                <2> 	mov bp,cx
  7372 0000167B 83C502              <2> 	add bp,2
  7373 0000167E 8A4E0A              <2> 	mov cl,[bp+0x0A]	
  7374                              <2> 	__sinorcos0x90 ax, bx, ax, bx, cl
  7375                              <3>  stkopen 0x09
  7376 00001681 83EC09              <4>  sub word sp, %1
  7377 00001684 54                  <4>  push sp
  7378 00001685 5D                  <4>  pop bp
  7379 00001686 894600              <3>  mov word [bp+0],%1
  7380 00001689 895E02              <3>  mov word [bp+2],%2
  7381 0000168C 884E08              <3>  mov byte [bp+8],%5
  7382 0000168F E82C00              <3>  call proc_sinorcos0x90
  7383 00001692 54                  <3>  push sp
  7384 00001693 5D                  <3>  pop bp
  7385 00001694 8B4604              <3>  mov word %3,[bp+4]
  7386 00001697 8B5E06              <3>  mov word %4,[bp+6]
  7387                              <3>  stkclose 0x09
  7388 0000169A 83C409              <4>  add word sp, %1
  7389 0000169D 89E1                <2> 	mov cx,sp
  7390 0000169F 89CD                <2> 	mov bp,cx
  7391 000016A1 83C502              <2> 	add bp,2	
  7392 000016A4 894606              <2> 	mov [bp+6],ax
  7393 000016A7 895E08              <2> 	mov [bp+8],bx
  7394                              <2> 			
  7395 000016AA 59                  <2> 	pop cx
  7396                              <2> 		
  7397 000016AB 89E2                <2> 	mov dx,sp
  7398 000016AD 89D5                <2> 	mov bp,dx
  7399                              <2> 		
  7400 000016AF 81F90080            <2> 	cmp cx,0x8000
  7401 000016B3 7405                <2> 	je .one
  7402 000016B5 214E06              <2> 		and word [bp+6],cx
  7403 000016B8 EB03                <2> 		jmp .endcmp
  7404                              <2> 	.one:
  7405 000016BA 094E06              <2> 		or word [bp+6],cx	
  7406                              <2> 	.endcmp:
  7407                              <2> 	
  7408 000016BD C3                  <2> 	ret
  7409                              <2> 	
  7410                              <2> proc_sinorcos0x90:
  7411 000016BE 89E1                <2> 	mov cx,sp
  7412 000016C0 89CD                <2> 	mov bp,cx
  7413                              <2> 
  7414 000016C2 C746060000          <2> 	mov word [bp+6],0
  7415 000016C7 C746080000          <2> 	mov word [bp+8],0		
  7416                              <2> 	
  7417 000016CC B90000              <2> 	mov cx,0
  7418                              <2> 	.l1:
  7419 000016CF 83F903              <2> 		cmp cx,0x03
  7420 000016D2 0F877301            <2> 		ja .l2		
  7421 000016D6 51                  <2> 		push cx
  7422                              <2> 		
  7423 000016D7 83E101              <2> 		and cx,0x0001
  7424 000016DA 83F900              <2> 		cmp cx,0
  7425 000016DD 7505                <2> 		jnz .neg
  7426 000016DF B80100              <2> 			mov ax,0x0001
  7427 000016E2 EB03                <2> 			jmp .endneg
  7428                              <2> 		.neg:
  7429 000016E4 B8FFFF              <2> 			mov ax,0xFFFF
  7430                              <2> 		.endneg:
  7431                              <2> 				
  7432 000016E7 59                  <2> 		pop cx
  7433 000016E8 51                  <2> 		push cx
  7434 000016E9 50                  <2> 		push ax
  7435                              <2> 		
  7436 000016EA BA0000              <2> 		mov dx,0
  7437 000016ED B80200              <2> 		mov ax,2
  7438 000016F0 F7E1                <2> 		mul cx
  7439                              <2> 		
  7440 000016F2 89E2                <2> 		mov dx,sp
  7441 000016F4 89D5                <2> 		mov bp,dx
  7442 000016F6 83C504              <2> 		add bp,4		
  7443 000016F9 807E0A00            <2> 		cmp byte [bp+0x0A],0
  7444 000016FD 7401                <2> 		jz .incremented
  7445 000016FF 40                  <2> 			inc ax
  7446                              <2> 		.incremented:
  7447                              <2> 						
  7448                              <2> 		__fat16 ax, dx
  7449                              <3>  stkopen 0x04
  7450 00001700 83EC04              <4>  sub word sp, %1
  7451 00001703 54                  <4>  push sp
  7452 00001704 5D                  <4>  pop bp
  7453 00001705 894600              <3>  mov word [bp+0],%1
  7454 00001708 E82302              <3>  call proc__fat16
  7455 0000170B 54                  <3>  push sp
  7456 0000170C 5D                  <3>  pop bp
  7457 0000170D 8B5602              <3>  mov word %2, [bp+2]
  7458                              <3>  stkclose 0x04
  7459 00001710 83C404              <4>  add word sp, %1
  7460                              <2> 						
  7461 00001713 58                  <2> 		pop ax
  7462 00001714 52                  <2> 		push dx	
  7463                              <2> 		__int16to32 ax, cx, dx						
  7464                              <3>  stkopen 0x06
  7465 00001715 83EC06              <4>  sub word sp, %1
  7466 00001718 54                  <4>  push sp
  7467 00001719 5D                  <4>  pop bp
  7468 0000171A 894600              <3>  mov word [bp+0],%1
  7469 0000171D E84BED              <3>  call proc_int16to32
  7470 00001720 54                  <3>  push sp
  7471 00001721 5D                  <3>  pop bp
  7472 00001722 8B4E02              <3>  mov word %2, [bp+2]
  7473 00001725 8B5604              <3>  mov word %3, [bp+4]
  7474                              <3>  stkclose 0x06
  7475 00001728 83C406              <4>  add word sp, %1
  7476                              <2> 		__int32tofl cx, dx, ax, bx
  7477                              <3>  stkopen 0x08
  7478 0000172B 83EC08              <4>  sub word sp, %1
  7479 0000172E 54                  <4>  push sp
  7480 0000172F 5D                  <4>  pop bp
  7481 00001730 894E00              <3>  mov word [bp+0],%1
  7482 00001733 895602              <3>  mov word [bp+2],%2
  7483 00001736 E8B2F3              <3>  call proc_int32tofl
  7484 00001739 54                  <3>  push sp
  7485 0000173A 5D                  <3>  pop bp
  7486 0000173B 8B4604              <3>  mov word %3,[bp+4]
  7487 0000173E 8B5E06              <3>  mov word %4,[bp+6]
  7488                              <3>  stkclose 0x08
  7489 00001741 83C408              <4>  add word sp, %1
  7490                              <2> 		
  7491 00001744 59                  <2> 		pop cx
  7492 00001745 50                  <2> 		push ax
  7493 00001746 53                  <2> 		push bx		
  7494                              <2> 		__int16to32 cx, ax, bx
  7495                              <3>  stkopen 0x06
  7496 00001747 83EC06              <4>  sub word sp, %1
  7497 0000174A 54                  <4>  push sp
  7498 0000174B 5D                  <4>  pop bp
  7499 0000174C 894E00              <3>  mov word [bp+0],%1
  7500 0000174F E819ED              <3>  call proc_int16to32
  7501 00001752 54                  <3>  push sp
  7502 00001753 5D                  <3>  pop bp
  7503 00001754 8B4602              <3>  mov word %2, [bp+2]
  7504 00001757 8B5E04              <3>  mov word %3, [bp+4]
  7505                              <3>  stkclose 0x06
  7506 0000175A 83C406              <4>  add word sp, %1
  7507                              <2> 		__int32tofl ax, bx, cx, dx
  7508                              <3>  stkopen 0x08
  7509 0000175D 83EC08              <4>  sub word sp, %1
  7510 00001760 54                  <4>  push sp
  7511 00001761 5D                  <4>  pop bp
  7512 00001762 894600              <3>  mov word [bp+0],%1
  7513 00001765 895E02              <3>  mov word [bp+2],%2
  7514 00001768 E880F3              <3>  call proc_int32tofl
  7515 0000176B 54                  <3>  push sp
  7516 0000176C 5D                  <3>  pop bp
  7517 0000176D 8B4E04              <3>  mov word %3,[bp+4]
  7518 00001770 8B5606              <3>  mov word %4,[bp+6]
  7519                              <3>  stkclose 0x08
  7520 00001773 83C408              <4>  add word sp, %1
  7521                              <2> 		
  7522 00001776 5B                  <2> 		pop bx
  7523 00001777 58                  <2> 		pop ax
  7524                              <2> 		
  7525                              <2> 		__fldiv ax, bx, cx, dx, ax, bx
  7526                              <3>  stkopen 0x0E
  7527 00001778 83EC0E              <4>  sub word sp, %1
  7528 0000177B 54                  <4>  push sp
  7529 0000177C 5D                  <4>  pop bp
  7530 0000177D 894600              <3>  mov word [bp+0],%1
  7531 00001780 895E02              <3>  mov word [bp+2],%2
  7532 00001783 894E04              <3>  mov word [bp+4],%3
  7533 00001786 895606              <3>  mov word [bp+6],%4
  7534 00001789 E8E1F4              <3>  call proc_fldiv
  7535 0000178C 54                  <3>  push sp
  7536 0000178D 5D                  <3>  pop bp
  7537 0000178E 8B4608              <3>  mov word %5,[bp+8]
  7538 00001791 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7539                              <3>  stkclose 0x0E
  7540 00001794 83C40E              <4>  add word sp, %1
  7541                              <2> 						
  7542 00001797 59                  <2> 		pop cx
  7543 00001798 51                  <2> 		push cx
  7544 00001799 50                  <2> 		push ax
  7545 0000179A 53                  <2> 		push bx
  7546                              <2> 		
  7547 0000179B 89E0                <2> 		mov ax,sp
  7548 0000179D 89C5                <2> 		mov bp,ax
  7549 0000179F 83C506              <2> 		add bp,6
  7550                              <2> 		
  7551 000017A2 BA0000              <2> 		mov dx,0
  7552 000017A5 B80200              <2> 		mov ax,2
  7553 000017A8 F7E1                <2> 		mul cx
  7554                              <2> 				
  7555 000017AA 807E0A00            <2> 		cmp byte [bp+0x0A],0
  7556 000017AE 7401                <2> 		jz .incremented2
  7557 000017B0 40                  <2> 			inc ax
  7558                              <2> 		.incremented2:
  7559                              <2> 				
  7560 000017B1 89C1                <2> 		mov cx,ax														
  7561                              <2> 		
  7562 000017B3 B8803F              <2> 		mov ax,0x3F80
  7563 000017B6 BB0000              <2> 		mov bx,0
  7564                              <2> 		
  7565                              <2> 		.l1.1:
  7566 000017B9 83F900              <2> 			cmp cx,0
  7567 000017BC 742C                <2> 			jz .l1.2
  7568 000017BE 51                  <2> 			push cx
  7569                              <2> 			
  7570 000017BF 8B4E02              <2> 			mov cx,[bp+2]
  7571 000017C2 8B5604              <2> 			mov dx,[bp+4]
  7572 000017C5 55                  <2> 			push bp	
  7573                              <2> 			__flmul ax, bx, cx, dx, ax, bx
  7574                              <3>  stkopen 0x0E
  7575 000017C6 83EC0E              <4>  sub word sp, %1
  7576 000017C9 54                  <4>  push sp
  7577 000017CA 5D                  <4>  pop bp
  7578 000017CB 894600              <3>  mov word [bp+0],%1
  7579 000017CE 895E02              <3>  mov word [bp+2],%2
  7580 000017D1 894E04              <3>  mov word [bp+4],%3
  7581 000017D4 895606              <3>  mov word [bp+6],%4
  7582 000017D7 E8B2F5              <3>  call proc_flmul
  7583 000017DA 54                  <3>  push sp
  7584 000017DB 5D                  <3>  pop bp
  7585 000017DC 8B4608              <3>  mov word %5,[bp+8]
  7586 000017DF 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7587                              <3>  stkclose 0x0E
  7588 000017E2 83C40E              <4>  add word sp, %1
  7589 000017E5 5D                  <2> 			pop bp	
  7590                              <2> 							
  7591 000017E6 59                  <2> 			pop cx
  7592 000017E7 49                  <2> 			dec cx
  7593 000017E8 EBCF                <2> 			jmp .l1.1
  7594                              <2> 		.l1.2: 
  7595                              <2> 					
  7596 000017EA 5A                  <2> 		pop dx
  7597 000017EB 59                  <2> 		pop cx
  7598                              <2> 		
  7599                              <2> 		__flmul ax, bx, cx, dx, ax, bx
  7600                              <3>  stkopen 0x0E
  7601 000017EC 83EC0E              <4>  sub word sp, %1
  7602 000017EF 54                  <4>  push sp
  7603 000017F0 5D                  <4>  pop bp
  7604 000017F1 894600              <3>  mov word [bp+0],%1
  7605 000017F4 895E02              <3>  mov word [bp+2],%2
  7606 000017F7 894E04              <3>  mov word [bp+4],%3
  7607 000017FA 895606              <3>  mov word [bp+6],%4
  7608 000017FD E88CF5              <3>  call proc_flmul
  7609 00001800 54                  <3>  push sp
  7610 00001801 5D                  <3>  pop bp
  7611 00001802 8B4608              <3>  mov word %5,[bp+8]
  7612 00001805 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7613                              <3>  stkclose 0x0E
  7614 00001808 83C40E              <4>  add word sp, %1
  7615                              <2> 						
  7616 0000180B 89E1                <2> 		mov cx,sp
  7617 0000180D 89CD                <2> 		mov bp,cx
  7618 0000180F 83C502              <2> 		add bp,2
  7619                              <2> 		
  7620 00001812 8B4E06              <2> 		mov cx,[bp+6]
  7621 00001815 8B5608              <2> 		mov dx,[bp+8]
  7622 00001818 55                  <2> 		push bp
  7623                              <2> 		__fladd ax, bx, cx, dx, ax, bx		
  7624                              <3>  stkopen 0x0E
  7625 00001819 83EC0E              <4>  sub word sp, %1
  7626 0000181C 54                  <4>  push sp
  7627 0000181D 5D                  <4>  pop bp
  7628 0000181E 894600              <3>  mov word [bp+0],%1
  7629 00001821 895E02              <3>  mov word [bp+2],%2
  7630 00001824 894E04              <3>  mov word [bp+4],%3
  7631 00001827 895606              <3>  mov word [bp+6],%4
  7632 0000182A C7460C0000          <3>  mov word [bp+0x0C],0
  7633 0000182F E806F7              <3>  call proc_fladdorsub
  7634 00001832 54                  <3>  push sp
  7635 00001833 5D                  <3>  pop bp
  7636 00001834 8B4608              <3>  mov word %5,[bp+8]
  7637 00001837 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7638                              <3>  stkclose 0x0E
  7639 0000183A 83C40E              <4>  add word sp, %1
  7640 0000183D 5D                  <2> 		pop bp			
  7641 0000183E 894606              <2> 		mov [bp+6],ax
  7642 00001841 895E08              <2> 		mov [bp+8],bx
  7643                              <2> 				
  7644 00001844 59                  <2> 		pop cx
  7645 00001845 41                  <2> 		inc cx
  7646 00001846 E986FE              <2> 		jmp .l1
  7647                              <2> 	.l2:			
  7648                              <2> 	
  7649 00001849 C3                  <2> 	ret
  7650                              <2> 	
  7651                              <2> 
  7652                              <2> proc_atan:
  7653 0000184A 89E0                <2> 	mov ax,sp
  7654 0000184C 89C5                <2> 	mov bp,ax 
  7655                              <2> 
  7656 0000184E C746060000          <2> 	mov word [bp+6],0
  7657 00001853 C746080000          <2> 	mov word [bp+8],0		
  7658                              <2> 	
  7659 00001858 B90000              <2> 	mov cx,0
  7660                              <2> 	.l1:
  7661 0000185B 83F903              <2> 		cmp cx,0x03
  7662 0000185E 0F87CB00            <2> 		ja .l2		
  7663 00001862 51                  <2> 		push cx
  7664                              <2> 		
  7665 00001863 D1E1                <2> 		shl cx,1
  7666 00001865 41                  <2> 		inc cx
  7667 00001866 51                  <2> 		push cx
  7668                              <2> 								
  7669 00001867 B8803F              <2> 		mov ax,0x3F80	; 1.0 (alta)
  7670 0000186A BB0000              <2> 		mov bx,0x0000	; 1.0 (baixa)				
  7671                              <2> 		.l1.1:
  7672 0000186D 83F900              <2> 			cmp cx,0
  7673 00001870 742C                <2> 			jz .l1.2
  7674 00001872 51                  <2> 			push cx
  7675                              <2> 			
  7676 00001873 8B4E02              <2> 			mov cx,[bp+2]
  7677 00001876 8B5604              <2> 			mov dx,[bp+4]
  7678 00001879 55                  <2> 			push bp	
  7679                              <2> 			__flmul ax, bx, cx, dx, ax, bx
  7680                              <3>  stkopen 0x0E
  7681 0000187A 83EC0E              <4>  sub word sp, %1
  7682 0000187D 54                  <4>  push sp
  7683 0000187E 5D                  <4>  pop bp
  7684 0000187F 894600              <3>  mov word [bp+0],%1
  7685 00001882 895E02              <3>  mov word [bp+2],%2
  7686 00001885 894E04              <3>  mov word [bp+4],%3
  7687 00001888 895606              <3>  mov word [bp+6],%4
  7688 0000188B E8FEF4              <3>  call proc_flmul
  7689 0000188E 54                  <3>  push sp
  7690 0000188F 5D                  <3>  pop bp
  7691 00001890 8B4608              <3>  mov word %5,[bp+8]
  7692 00001893 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7693                              <3>  stkclose 0x0E
  7694 00001896 83C40E              <4>  add word sp, %1
  7695 00001899 5D                  <2> 			pop bp	
  7696                              <2> 							
  7697 0000189A 59                  <2> 			pop cx
  7698 0000189B 49                  <2> 			dec cx
  7699 0000189C EBCF                <2> 			jmp .l1.1
  7700                              <2> 		.l1.2:			
  7701                              <2> 		
  7702 0000189E 59                  <2> 		pop cx	
  7703 0000189F 50                  <2> 		push ax
  7704 000018A0 53                  <2> 		push bx
  7705                              <2> 				
  7706 000018A1 55                  <2> 		push bp
  7707                              <2> 		__int16tofl cx, cx, dx
  7708                              <3>  stkopen 0x06
  7709 000018A2 83EC06              <4>  sub word sp, %1
  7710 000018A5 54                  <4>  push sp
  7711 000018A6 5D                  <4>  pop bp
  7712 000018A7 894E00              <3>  mov word [bp+0],%1
  7713 000018AA E885F1              <3>  call proc_int16tofl
  7714 000018AD 54                  <3>  push sp
  7715 000018AE 5D                  <3>  pop bp
  7716 000018AF 8B4E02              <3>  mov word %2,[bp+2]
  7717 000018B2 8B5604              <3>  mov word %3,[bp+4]
  7718                              <3>  stkclose 0x06
  7719 000018B5 83C406              <4>  add word sp, %1
  7720 000018B8 5D                  <2> 		pop bp
  7721                              <2> 		
  7722 000018B9 5B                  <2> 		pop bx
  7723 000018BA 58                  <2> 		pop ax
  7724                              <2> 		
  7725 000018BB 55                  <2> 		push bp	
  7726                              <2> 		__fldiv ax, bx, cx, dx, ax, bx
  7727                              <3>  stkopen 0x0E
  7728 000018BC 83EC0E              <4>  sub word sp, %1
  7729 000018BF 54                  <4>  push sp
  7730 000018C0 5D                  <4>  pop bp
  7731 000018C1 894600              <3>  mov word [bp+0],%1
  7732 000018C4 895E02              <3>  mov word [bp+2],%2
  7733 000018C7 894E04              <3>  mov word [bp+4],%3
  7734 000018CA 895606              <3>  mov word [bp+6],%4
  7735 000018CD E89DF3              <3>  call proc_fldiv
  7736 000018D0 54                  <3>  push sp
  7737 000018D1 5D                  <3>  pop bp
  7738 000018D2 8B4608              <3>  mov word %5,[bp+8]
  7739 000018D5 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7740                              <3>  stkclose 0x0E
  7741 000018D8 83C40E              <4>  add word sp, %1
  7742 000018DB 5D                  <2> 		pop bp
  7743                              <2> 				
  7744 000018DC 59                  <2> 		pop cx
  7745 000018DD 51                  <2> 		push cx		
  7746 000018DE 83E101              <2> 		and cx,0x0001
  7747 000018E1 83F900              <2> 		cmp cx,0
  7748 000018E4 7410                <2> 		jz .endneg
  7749 000018E6 89C1                <2> 			mov cx,ax	
  7750 000018E8 83C900              <2> 			or cx, 0x0000
  7751 000018EB F7D1                <2> 			not cx
  7752 000018ED 81E10080            <2> 			and cx,0x8000								
  7753 000018F1 25FF7F              <2> 			and ax,0x7FFF			
  7754 000018F4 01C8                <2> 			add ax,cx
  7755                              <2> 		.endneg:
  7756                              <2> 				
  7757 000018F6 8B4E06              <2> 		mov cx,[bp+6]
  7758 000018F9 8B5608              <2> 		mov dx,[bp+8]
  7759 000018FC 55                  <2> 		push bp		
  7760                              <2> 		__fladd ax, bx, cx, dx, ax, bx
  7761                              <3>  stkopen 0x0E
  7762 000018FD 83EC0E              <4>  sub word sp, %1
  7763 00001900 54                  <4>  push sp
  7764 00001901 5D                  <4>  pop bp
  7765 00001902 894600              <3>  mov word [bp+0],%1
  7766 00001905 895E02              <3>  mov word [bp+2],%2
  7767 00001908 894E04              <3>  mov word [bp+4],%3
  7768 0000190B 895606              <3>  mov word [bp+6],%4
  7769 0000190E C7460C0000          <3>  mov word [bp+0x0C],0
  7770 00001913 E822F6              <3>  call proc_fladdorsub
  7771 00001916 54                  <3>  push sp
  7772 00001917 5D                  <3>  pop bp
  7773 00001918 8B4608              <3>  mov word %5,[bp+8]
  7774 0000191B 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7775                              <3>  stkclose 0x0E
  7776 0000191E 83C40E              <4>  add word sp, %1
  7777 00001921 5D                  <2> 		pop bp
  7778 00001922 894606              <2> 		mov [bp+6], ax
  7779 00001925 895E08              <2> 		mov [bp+8], bx
  7780                              <2> 				
  7781 00001928 59                  <2> 		pop cx
  7782 00001929 41                  <2> 		inc cx
  7783 0000192A E92EFF              <2> 		jmp .l1
  7784                              <2> 	.l2:
  7785                              <2> 		
  7786 0000192D C3                  <2> 	ret
  7787                              <2> 	
  7788                              <2> proc__fat16:
  7789 0000192E 89E0                <2> 	mov ax,sp
  7790 00001930 89C5                <2> 	mov bp,ax
  7791                              <2> 	
  7792 00001932 B90100              <2> 	mov cx,1
  7793 00001935 C746040100          <2> 	mov word [bp+4], 1
  7794                              <2> 	.l1:
  7795 0000193A 3B4E02              <2> 		cmp word cx,[bp+2]
  7796 0000193D 770D                <2> 		ja .l2
  7797                              <2> 		
  7798 0000193F 31D2                <2> 		xor dx,dx
  7799 00001941 8B4604              <2> 		mov ax,[bp+4]
  7800 00001944 F7E9                <2> 		imul cx
  7801                              <2> 		
  7802 00001946 894604              <2> 		mov [bp+4],ax
  7803                              <2> 		
  7804 00001949 41                  <2> 		inc cx
  7805 0000194A EBEE                <2> 		jmp .l1
  7806                              <2> 	.l2:
  7807                              <2> 	
  7808 0000194C C3                  <2> 	ret
  7809                              <2> 		
  7810                              <2> proc__pow16:
  7811 0000194D 89E0                <2> 	mov ax,sp
  7812 0000194F 89C5                <2> 	mov bp,ax
  7813                              <2> 	
  7814 00001951 8B4E04              <2> 	mov cx,[bp+4]
  7815 00001954 C746060100          <2> 	mov word [bp+6], 1	
  7816                              <2> 	.l1:
  7817 00001959 83F900              <2> 		cmp cx,0
  7818 0000195C 740E                <2> 		jz .l2
  7819                              <2> 		
  7820 0000195E 31D2                <2> 		xor dx,dx
  7821 00001960 8B4602              <2> 		mov ax,[bp+2]
  7822 00001963 F76E06              <2> 		imul word [bp+6]
  7823                              <2> 		
  7824 00001966 894606              <2> 		mov [bp+6],ax
  7825                              <2> 		
  7826 00001969 49                  <2> 		dec cx
  7827 0000196A EBED                <2> 		jmp .l1
  7828                              <2> 	.l2:
  7829                              <2> 		
  7830 0000196C C3                  <2> 	ret
  7831                              <2> 	
  7832                              <2> proc__sinnorm:
  7833 0000196D 89E0                <2> 	mov ax,sp
  7834 0000196F 89C5                <2> 	mov bp,ax
  7835                              <2> 	
  7836 00001971 8B4602              <2> 	mov ax,[bp+2]
  7837 00001974 8B5E04              <2> 	mov bx,[bp+4]
  7838                              <2> 	
  7839                              <2> 	__norm_factors ax, bx, ax, bx, cx
  7840                              <3>  stkopen 0x0A
  7841 00001977 83EC0A              <4>  sub word sp, %1
  7842 0000197A 54                  <4>  push sp
  7843 0000197B 5D                  <4>  pop bp
  7844 0000197C 894600              <3>  mov word [bp+0],%1
  7845 0000197F 895E02              <3>  mov word [bp+2],%2
  7846 00001982 E83601              <3>  call proc__norm_factors
  7847 00001985 54                  <3>  push sp
  7848 00001986 5D                  <3>  pop bp
  7849 00001987 8B4604              <3>  mov word %3,[bp+4]
  7850 0000198A 8B5E06              <3>  mov word %4,[bp+6]
  7851 0000198D 8B4E08              <3>  mov word %5,[bp+8]
  7852                              <3>  stkclose 0x0A
  7853 00001990 83C40A              <4>  add word sp, %1
  7854                              <2> 
  7855 00001993 51                  <2> 	push cx	; factor (phi/PI)
  7856                              <2> 		
  7857 00001994 B9C93F              <2> 	mov cx,0x3FC9 ; PI/2 (high)
  7858 00001997 BADB0F              <2> 	mov dx,0x0FDB ; PI/2 (low)
  7859                              <2> 	
  7860 0000199A 50                  <2> 	push ax
  7861 0000199B 53                  <2> 	push bx
  7862                              <2> 	__cmp32 ax, bx, cx, dx, cl
  7863                              <3>  stkopen 9
  7864 0000199C 83EC09              <4>  sub word sp, %1
  7865 0000199F 54                  <4>  push sp
  7866 000019A0 5D                  <4>  pop bp
  7867 000019A1 894600              <3>  mov word [bp+0], %1
  7868 000019A4 895E02              <3>  mov word [bp+2], %2
  7869 000019A7 894E04              <3>  mov word [bp+4], %3
  7870 000019AA 895606              <3>  mov word [bp+6], %4
  7871 000019AD E8DBED              <3>  call proc_cmp32
  7872 000019B0 54                  <3>  push sp
  7873 000019B1 5D                  <3>  pop bp
  7874 000019B2 8A4E08              <3>  mov byte %5, [bp+8]
  7875                              <3>  stkclose 9
  7876 000019B5 83C409              <4>  add word sp, %1
  7877 000019B8 5B                  <2> 	pop bx
  7878 000019B9 58                  <2> 	pop ax
  7879 000019BA 80F900              <2> 	cmp cl,0
  7880 000019BD 7E2A                <2> 	jle .l1
  7881 000019BF B94940              <2> 		mov cx,0x4049 ; PI (high)
  7882 000019C2 BADB0F              <2> 		mov dx,0x0FDB ; PI (low)
  7883                              <2> 		__flsub cx, dx, ax, bx, ax, bx				
  7884                              <3>  stkopen 0x0E
  7885 000019C5 83EC0E              <4>  sub word sp, %1
  7886 000019C8 54                  <4>  push sp
  7887 000019C9 5D                  <4>  pop bp
  7888 000019CA 894E00              <3>  mov word [bp+0],%1
  7889 000019CD 895602              <3>  mov word [bp+2],%2
  7890 000019D0 894604              <3>  mov word [bp+4],%3
  7891 000019D3 895E06              <3>  mov word [bp+6],%4
  7892 000019D6 C7460C0080          <3>  mov word [bp+0x0C],0x8000
  7893 000019DB E85AF5              <3>  call proc_fladdorsub
  7894 000019DE 54                  <3>  push sp
  7895 000019DF 5D                  <3>  pop bp
  7896 000019E0 8B4608              <3>  mov word %5,[bp+8]
  7897 000019E3 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7898                              <3>  stkclose 0x0E
  7899 000019E6 83C40E              <4>  add word sp, %1
  7900                              <2> 	.l1:
  7901                              <2> 				
  7902 000019E9 59                  <2> 	pop cx
  7903                              <2> 
  7904 000019EA 89E2                <2> 	mov dx,sp
  7905 000019EC 89D5                <2> 	mov bp,dx
  7906 000019EE 8B5602              <2> 	mov dx,[bp+2]
  7907 000019F1 81E20080            <2> 	and dx,0x8000
  7908                              <2> 		
  7909 000019F5 83FA00              <2> 	cmp dx,0
  7910 000019F8 7D01                <2> 	jge .l2
  7911 000019FA 41                  <2> 		inc cx		
  7912                              <2> 	.l2:	
  7913                              <2> 			
  7914 000019FB BAFF7F              <2> 	mov dx,0x7FFF
  7915 000019FE 83E101              <2> 	and cx,0x0001
  7916 00001A01 83F900              <2> 	cmp cx,0
  7917 00001A04 7403                <2> 	jz .l3
  7918 00001A06 BA0080              <2> 		mov dx,0x8000
  7919                              <2> 	.l3:
  7920                              <2> 					
  7921 00001A09 894602              <2> 	mov [bp+2],ax
  7922 00001A0C 895E04              <2> 	mov [bp+4],bx
  7923 00001A0F 895606              <2> 	mov [bp+6],dx
  7924                              <2> 	
  7925 00001A12 C3                  <2> 	ret	
  7926                              <2> 	
  7927                              <2> proc__cosnorm:
  7928 00001A13 89E0                <2> 	mov ax,sp
  7929 00001A15 89C5                <2> 	mov bp,ax
  7930                              <2> 	
  7931 00001A17 8B4602              <2> 	mov ax,[bp+2]
  7932 00001A1A 8B5E04              <2> 	mov bx,[bp+4]
  7933                              <2> 	
  7934                              <2> 	__norm_factors ax, bx, ax, bx, cx
  7935                              <3>  stkopen 0x0A
  7936 00001A1D 83EC0A              <4>  sub word sp, %1
  7937 00001A20 54                  <4>  push sp
  7938 00001A21 5D                  <4>  pop bp
  7939 00001A22 894600              <3>  mov word [bp+0],%1
  7940 00001A25 895E02              <3>  mov word [bp+2],%2
  7941 00001A28 E89000              <3>  call proc__norm_factors
  7942 00001A2B 54                  <3>  push sp
  7943 00001A2C 5D                  <3>  pop bp
  7944 00001A2D 8B4604              <3>  mov word %3,[bp+4]
  7945 00001A30 8B5E06              <3>  mov word %4,[bp+6]
  7946 00001A33 8B4E08              <3>  mov word %5,[bp+8]
  7947                              <3>  stkclose 0x0A
  7948 00001A36 83C40A              <4>  add word sp, %1
  7949                              <2> 
  7950 00001A39 51                  <2> 	push cx		; fator2 (phi/PI)
  7951                              <2> 	
  7952 00001A3A B9C93F              <2> 	mov cx,0x3FC9 ; PI/2 (high)
  7953 00001A3D BADB0F              <2> 	mov dx,0x0FDB ; PI/2 (low)
  7954                              <2> 		
  7955 00001A40 50                  <2> 	push ax
  7956 00001A41 53                  <2> 	push bx
  7957                              <2> 	__cmp32 ax, bx, cx, dx, cl
  7958                              <3>  stkopen 9
  7959 00001A42 83EC09              <4>  sub word sp, %1
  7960 00001A45 54                  <4>  push sp
  7961 00001A46 5D                  <4>  pop bp
  7962 00001A47 894600              <3>  mov word [bp+0], %1
  7963 00001A4A 895E02              <3>  mov word [bp+2], %2
  7964 00001A4D 894E04              <3>  mov word [bp+4], %3
  7965 00001A50 895606              <3>  mov word [bp+6], %4
  7966 00001A53 E835ED              <3>  call proc_cmp32
  7967 00001A56 54                  <3>  push sp
  7968 00001A57 5D                  <3>  pop bp
  7969 00001A58 8A4E08              <3>  mov byte %5, [bp+8]
  7970                              <3>  stkclose 9
  7971 00001A5B 83C409              <4>  add word sp, %1
  7972 00001A5E 5B                  <2> 	pop bx
  7973 00001A5F 58                  <2> 	pop ax
  7974                              <2> 		
  7975 00001A60 51                  <2> 	push cx
  7976 00001A61 80F900              <2> 	cmp cl,0
  7977 00001A64 7E2A                <2> 	jle .l1
  7978 00001A66 B94940              <2> 		mov cx,0x4049 ; PI (high)
  7979 00001A69 BADB0F              <2> 		mov dx,0x0FDB ; PI (low)
  7980                              <2> 		__flsub cx, dx, ax, bx, ax, bx	
  7981                              <3>  stkopen 0x0E
  7982 00001A6C 83EC0E              <4>  sub word sp, %1
  7983 00001A6F 54                  <4>  push sp
  7984 00001A70 5D                  <4>  pop bp
  7985 00001A71 894E00              <3>  mov word [bp+0],%1
  7986 00001A74 895602              <3>  mov word [bp+2],%2
  7987 00001A77 894604              <3>  mov word [bp+4],%3
  7988 00001A7A 895E06              <3>  mov word [bp+6],%4
  7989 00001A7D C7460C0080          <3>  mov word [bp+0x0C],0x8000
  7990 00001A82 E8B3F4              <3>  call proc_fladdorsub
  7991 00001A85 54                  <3>  push sp
  7992 00001A86 5D                  <3>  pop bp
  7993 00001A87 8B4608              <3>  mov word %5,[bp+8]
  7994 00001A8A 8B5E0A              <3>  mov word %6,[bp+0x0A]
  7995                              <3>  stkclose 0x0E
  7996 00001A8D 83C40E              <4>  add word sp, %1
  7997                              <2> 	.l1:
  7998                              <2> 						
  7999 00001A90 59                  <2> 	pop cx	; quadrante2 (true, false)
  8000 00001A91 5A                  <2> 	pop dx	; fator2 (phi/PI)
  8001                              <2> 
  8002 00001A92 54                  <2> 	push sp
  8003 00001A93 5D                  <2> 	pop bp		
  8004 00001A94 894602              <2> 	mov [bp+2],ax	
  8005 00001A97 895E04              <2> 	mov [bp+4],bx
  8006                              <2> 	
  8007 00001A9A B8FF7F              <2> 	mov ax,0x7FFF
  8008                              <2> 	
  8009 00001A9D 83E201              <2> 	and dx,0x0001
  8010 00001AA0 83FA00              <2> 	cmp dx,0
  8011 00001AA3 750A                <2> 	jnz .fimpar
  8012 00001AA5 80F900              <2> 		cmp cl,0
  8013 00001AA8 7C0D                <2> 		jl .endf		
  8014 00001AAA B80080              <2> 			mov ax,0x8000			
  8015 00001AAD EB08                <2> 		jmp .endf
  8016                              <2> 	.fimpar:		
  8017 00001AAF 80F900              <2> 		cmp cl,0
  8018 00001AB2 7D03                <2> 		jge .endf
  8019 00001AB4 B80080              <2> 			mov ax,0x8000
  8020                              <2> 	.endf:		
  8021                              <2> 						
  8022 00001AB7 894606              <2> 	mov word [bp+6],ax
  8023                              <2> 	
  8024 00001ABA C3                  <2> 	ret
  8025                              <2> 	
  8026                              <2> proc__norm_factors: ; f1=(phi%PI) --> float 32bits, f2=(phi/PI) --> int 16bits
  8027 00001ABB 89E0                <2> 	mov ax,sp
  8028 00001ABD 89C5                <2> 	mov bp,ax
  8029                              <2> 	
  8030 00001ABF 8B4602              <2> 	mov ax,[bp+2]
  8031 00001AC2 8B5E04              <2> 	mov bx,[bp+4]	
  8032 00001AC5 25FF7F              <2> 	and ax,0x7FFF
  8033                              <2> 		
  8034 00001AC8 B94940              <2> 	mov cx,0x4049 ; PI (high)
  8035 00001ACB BADB0F              <2> 	mov dx,0x0FDB ; PI (low)
  8036                              <2> 
  8037 00001ACE 55                  <2> 	push bp
  8038                              <2> 	__fldiv ax, bx, cx, dx, ax, bx		
  8039                              <3>  stkopen 0x0E
  8040 00001ACF 83EC0E              <4>  sub word sp, %1
  8041 00001AD2 54                  <4>  push sp
  8042 00001AD3 5D                  <4>  pop bp
  8043 00001AD4 894600              <3>  mov word [bp+0],%1
  8044 00001AD7 895E02              <3>  mov word [bp+2],%2
  8045 00001ADA 894E04              <3>  mov word [bp+4],%3
  8046 00001ADD 895606              <3>  mov word [bp+6],%4
  8047 00001AE0 E88AF1              <3>  call proc_fldiv
  8048 00001AE3 54                  <3>  push sp
  8049 00001AE4 5D                  <3>  pop bp
  8050 00001AE5 8B4608              <3>  mov word %5,[bp+8]
  8051 00001AE8 8B5E0A              <3>  mov word %6,[bp+0x0A]
  8052                              <3>  stkclose 0x0E
  8053 00001AEB 83C40E              <4>  add word sp, %1
  8054                              <2> 	__fltoint32 ax, bx, ax, bx	
  8055                              <3>  stkopen 0x08
  8056 00001AEE 83EC08              <4>  sub word sp, %1
  8057 00001AF1 54                  <4>  push sp
  8058 00001AF2 5D                  <4>  pop bp
  8059 00001AF3 894600              <3>  mov word [bp+0],%1
  8060 00001AF6 895E02              <3>  mov word [bp+2],%2
  8061 00001AF9 E877EF              <3>  call proc_fltoint32
  8062 00001AFC 54                  <3>  push sp
  8063 00001AFD 5D                  <3>  pop bp
  8064 00001AFE 8B4604              <3>  mov word %3,[bp+4]
  8065 00001B01 8B5E06              <3>  mov word %4,[bp+6]
  8066                              <3>  stkclose 0x08
  8067 00001B04 83C408              <4>  add word sp, %1
  8068                              <2> 	__int32to16 ax, bx, ax
  8069                              <3>  stkopen 0x06
  8070 00001B07 83EC06              <4>  sub word sp, %1
  8071 00001B0A 54                  <4>  push sp
  8072 00001B0B 5D                  <4>  pop bp
  8073 00001B0C 894600              <3>  mov word [bp+0], %1
  8074 00001B0F 895E02              <3>  mov word [bp+2], %2
  8075 00001B12 E87EE9              <3>  call proc_int32to16
  8076 00001B15 54                  <3>  push sp
  8077 00001B16 5D                  <3>  pop bp
  8078 00001B17 8B4604              <3>  mov word %3, [bp+4]
  8079                              <3>  stkclose 0x06
  8080 00001B1A 83C406              <4>  add word sp, %1
  8081 00001B1D 5D                  <2> 	pop bp
  8082                              <2> 		
  8083 00001B1E 50                  <2> 	push ax		; fator
  8084                              <2> 		
  8085 00001B1F 55                  <2> 	push bp
  8086                              <2> 	__int16to32	ax, ax, bx
  8087                              <3>  stkopen 0x06
  8088 00001B20 83EC06              <4>  sub word sp, %1
  8089 00001B23 54                  <4>  push sp
  8090 00001B24 5D                  <4>  pop bp
  8091 00001B25 894600              <3>  mov word [bp+0],%1
  8092 00001B28 E840E9              <3>  call proc_int16to32
  8093 00001B2B 54                  <3>  push sp
  8094 00001B2C 5D                  <3>  pop bp
  8095 00001B2D 8B4602              <3>  mov word %2, [bp+2]
  8096 00001B30 8B5E04              <3>  mov word %3, [bp+4]
  8097                              <3>  stkclose 0x06
  8098 00001B33 83C406              <4>  add word sp, %1
  8099                              <2> 	__int32tofl ax, bx, ax, bx	
  8100                              <3>  stkopen 0x08
  8101 00001B36 83EC08              <4>  sub word sp, %1
  8102 00001B39 54                  <4>  push sp
  8103 00001B3A 5D                  <4>  pop bp
  8104 00001B3B 894600              <3>  mov word [bp+0],%1
  8105 00001B3E 895E02              <3>  mov word [bp+2],%2
  8106 00001B41 E8A7EF              <3>  call proc_int32tofl
  8107 00001B44 54                  <3>  push sp
  8108 00001B45 5D                  <3>  pop bp
  8109 00001B46 8B4604              <3>  mov word %3,[bp+4]
  8110 00001B49 8B5E06              <3>  mov word %4,[bp+6]
  8111                              <3>  stkclose 0x08
  8112 00001B4C 83C408              <4>  add word sp, %1
  8113                              <2> 	
  8114 00001B4F B94940              <2> 	mov cx,0x4049 ; PI (high)
  8115 00001B52 BADB0F              <2> 	mov dx,0x0FDB ; PI (low)
  8116                              <2> 	__flmul ax, bx, cx, dx, ax, bx		
  8117                              <3>  stkopen 0x0E
  8118 00001B55 83EC0E              <4>  sub word sp, %1
  8119 00001B58 54                  <4>  push sp
  8120 00001B59 5D                  <4>  pop bp
  8121 00001B5A 894600              <3>  mov word [bp+0],%1
  8122 00001B5D 895E02              <3>  mov word [bp+2],%2
  8123 00001B60 894E04              <3>  mov word [bp+4],%3
  8124 00001B63 895606              <3>  mov word [bp+6],%4
  8125 00001B66 E823F2              <3>  call proc_flmul
  8126 00001B69 54                  <3>  push sp
  8127 00001B6A 5D                  <3>  pop bp
  8128 00001B6B 8B4608              <3>  mov word %5,[bp+8]
  8129 00001B6E 8B5E0A              <3>  mov word %6,[bp+0x0A]
  8130                              <3>  stkclose 0x0E
  8131 00001B71 83C40E              <4>  add word sp, %1
  8132 00001B74 5D                  <2> 	pop bp
  8133                              <2> 	
  8134 00001B75 8B4E02              <2> 	mov cx,[bp+2]
  8135 00001B78 8B5604              <2> 	mov dx,[bp+4]
  8136 00001B7B 81E1FF7F            <2> 	and cx,0x7FFF
  8137                              <2> 		
  8138                              <2> 	__flsub cx, dx, ax, bx, ax, bx 			; theta -> ax bx
  8139                              <3>  stkopen 0x0E
  8140 00001B7F 83EC0E              <4>  sub word sp, %1
  8141 00001B82 54                  <4>  push sp
  8142 00001B83 5D                  <4>  pop bp
  8143 00001B84 894E00              <3>  mov word [bp+0],%1
  8144 00001B87 895602              <3>  mov word [bp+2],%2
  8145 00001B8A 894604              <3>  mov word [bp+4],%3
  8146 00001B8D 895E06              <3>  mov word [bp+6],%4
  8147 00001B90 C7460C0080          <3>  mov word [bp+0x0C],0x8000
  8148 00001B95 E8A0F3              <3>  call proc_fladdorsub
  8149 00001B98 54                  <3>  push sp
  8150 00001B99 5D                  <3>  pop bp
  8151 00001B9A 8B4608              <3>  mov word %5,[bp+8]
  8152 00001B9D 8B5E0A              <3>  mov word %6,[bp+0x0A]
  8153                              <3>  stkclose 0x0E
  8154 00001BA0 83C40E              <4>  add word sp, %1
  8155                              <2> 	
  8156 00001BA3 59                  <2> 	pop cx				
  8157                              <2> 		
  8158 00001BA4 89E2                <2> 	mov dx,sp
  8159 00001BA6 89D5                <2> 	mov bp,dx	
  8160 00001BA8 894606              <2> 	mov [bp+6],ax
  8161 00001BAB 895E08              <2> 	mov [bp+8],bx
  8162 00001BAE 894E0A              <2> 	mov [bp+0x0A],cx
  8163                              <2> 		
  8164 00001BB1 C3                  <2> 	ret
  8165                              <2> 	
  8166                              <2> %endif
  8167                              <1> 
  8168                              <1> %macro toradians 1
  8169                              <1> 	toradians %1, %1
  8170                              <1> %endmacro
  8171                              <1> 
  8172                              <1> %macro todegrees 1
  8173                              <1> 	todegrees %1, %1
  8174                              <1> %endmacro
  8175                              <1> 
  8176                              <1> %macro toradians 2
  8177                              <1> 	toradians cs, %1, cs, %2
  8178                              <1> %endmacro
  8179                              <1> 	
  8180                              <1> %macro todegrees 2
  8181                              <1> 	todegrees cs, %1, cs, %2
  8182                              <1> %endmacro	
  8183                              <1> 	
  8184                              <1> %macro atan 1
  8185                              <1> 	atan %1, %1
  8186                              <1> %endmacro	
  8187                              <1> 	
  8188                              <1> %macro atan 2
  8189                              <1> 	atan cs, %1, cs, %2
  8190                              <1> %endmacro	
  8191                              <1> 	
  8192                              <1> %macro sin 1
  8193                              <1> 	sin %1, %1
  8194                              <1> %endmacro	
  8195                              <1> 	
  8196                              <1> %macro sin 2
  8197                              <1> 	sin cs, %1, cs, %2
  8198                              <1> %endmacro
  8199                              <1> 
  8200                              <1> %macro cos 1
  8201                              <1> 	cos %1, %1
  8202                              <1> %endmacro	
  8203                              <1> 	
  8204                              <1> %macro cos 2
  8205                              <1> 	cos cs, %1, cs, %2
  8206                              <1> %endmacro		
  8207                              <1> 	
  8208                              <1> %macro sin 4
  8209                              <1> 	sinorcos %1, %2, %3, %4, 1
  8210                              <1> %endmacro
  8211                              <1> 
  8212                              <1> %macro cos 4
  8213                              <1> 	sinorcos %1, %2, %3, %4, 0
  8214                              <1> %endmacro
  8215                              <1> 
  8216                              <1> %macro toradians 4
  8217                              <1> 	stkopen 0x08
  8218                              <1> 	mov ax,%1
  8219                              <1> 	mov ds,ax
  8220                              <1> 	mov ax,[%2+2]
  8221                              <1> 	mov [bp+0],ax
  8222                              <1> 	mov ax,[%2]
  8223                              <1> 	mov [bp+2],ax
  8224                              <1> 	call proc_toradians
  8225                              <1> 	mov ax,sp
  8226                              <1> 	mov bp,ax
  8227                              <1> 	mov ax,%3
  8228                              <1> 	mov ds,ax
  8229                              <1> 	mov ax,[bp+4]
  8230                              <1> 	mov [%4+2],ax
  8231                              <1> 	mov ax,[bp+6]
  8232                              <1> 	mov [%4],ax
  8233                              <1> 	stkclose 0x08
  8234                              <1> %endmacro	
  8235                              <1> 
  8236                              <1> %macro todegrees 4
  8237                              <1> 	stkopen 0x08
  8238                              <1> 	mov ax,%1
  8239                              <1> 	mov ds,ax
  8240                              <1> 	mov ax,[%2+2]
  8241                              <1> 	mov [bp+0],ax
  8242                              <1> 	mov ax,[%2]
  8243                              <1> 	mov [bp+2],ax
  8244                              <1> 	call proc_todegrees
  8245                              <1> 	mov ax,sp
  8246                              <1> 	mov bp,ax
  8247                              <1> 	mov ax,%3
  8248                              <1> 	mov ds,ax
  8249                              <1> 	mov ax,[bp+4]
  8250                              <1> 	mov [%4+2],ax
  8251                              <1> 	mov ax,[bp+6]
  8252                              <1> 	mov [%4],ax
  8253                              <1> 	stkclose 0x08
  8254                              <1> %endmacro	
  8255                              <1> 
  8256                              <1> %macro atan 4
  8257                              <1> 	stkopen 0x08
  8258                              <1> 	mov ax,%1
  8259                              <1> 	mov ds,ax
  8260                              <1> 	mov ax,[%2+2]
  8261                              <1> 	mov [bp+0],ax
  8262                              <1> 	mov ax,[%2]
  8263                              <1> 	mov [bp+2],ax
  8264                              <1> 	call proc_atan
  8265                              <1> 	mov ax,sp
  8266                              <1> 	mov bp,ax
  8267                              <1> 	mov ax,%3
  8268                              <1> 	mov ds,ax
  8269                              <1> 	mov ax,[bp+4]
  8270                              <1> 	mov [%4+2],ax
  8271                              <1> 	mov ax,[bp+6]
  8272                              <1> 	mov [%4],ax
  8273                              <1> 	stkclose 0x08
  8274                              <1> %endmacro
  8275                              <1> 	
  8276                              <1> %macro sinorcos 5
  8277                              <1> 	stkopen 0x09
  8278                              <1> 	mov ax,%1
  8279                              <1> 	mov ds,ax
  8280                              <1> 	mov ax,[%2+2]
  8281                              <1> 	mov [bp+0],ax
  8282                              <1> 	mov ax,[%2]
  8283                              <1> 	mov [bp+2],ax
  8284                              <1> 	mov byte [bp+8],%5	
  8285                              <1> 	call proc_sinorcos
  8286                              <1> 	mov ax,sp
  8287                              <1> 	mov bp,ax
  8288                              <1> 	mov ax,%3
  8289                              <1> 	mov ds,ax
  8290                              <1> 	mov ax,[bp+4]
  8291                              <1> 	mov [%4+2],ax
  8292                              <1> 	mov ax,[bp+6]
  8293                              <1> 	mov [%4],ax
  8294                              <1> 	stkclose 0x09
  8295                              <1> %endmacro
  8296                              <1> 	
  8297                              <1> %endif
  8298                                  		
  8299                                  section .data
  8300 00001BB2 CDCC4CBF                	n: dd -0.8
  8301                                  	
  8302                                  section .text
  8303                                  	global _start
  8304                                  	
  8305                                  _start:		
  8306                                  	prtstk
  8307                              <1>  printf "stack ---> "
  8308                              <2>  %rep %0
  8309                              <2>  __printf %1
  8310                              <2>  %rotate 1
  8311                              <2>  %endrep
  8312                              <3>  __printf %1
  8313                              <4>  section .data
  8314 00001BB6 737461636B202D2D2D- <4>  %%str: db %1,0
  8315 00001BBF 3E2000              <4>
  8316                              <4>  section .text
  8317                              <4>  prtstr cs, %%str
  8318                              <5>  stkopen 4
  8319 00000000 83EC04              <6>  sub word sp, %1
  8320 00000003 54                  <6>  push sp
  8321 00000004 5D                  <6>  pop bp
  8322 00000005 8C4E00              <5>  mov word [bp], %1
  8323 00000008 C74602[B61B]        <5>  mov word [bp+2], %2
  8324 0000000D E8(2804)            <5>  call proc_prtstr
  8325                              <5>  stkclose 4
  8326 00000010 83C404              <6>  add word sp, %1
  8327                              <3>  %rotate 1
  8328 00000013 89E0                <1>  mov ax,sp
  8329                              <1>  prthex16 ax
  8330                              <2>  stkopen 3
  8331 00000015 83EC03              <3>  sub word sp, %1
  8332 00000018 54                  <3>  push sp
  8333 00000019 5D                  <3>  pop bp
  8334 0000001A 894600              <2>  mov word [bp], %1
  8335 0000001D C6460201            <2>  mov byte [bp+2], TRUE
  8336 00000021 E8(2C03)            <2>  call proc_prthex16
  8337                              <2>  stkclose 3
  8338 00000024 83C403              <3>  add word sp, %1
  8339                                  	prtln
  8340                              <1>  __prtln
  8341 00000027 E8(5C04)            <2>  call proc_prtln
  8342                                  	prtln
  8343                              <1>  __prtln
  8344 0000002A E8(5C04)            <2>  call proc_prtln
  8345                                  		
  8346                                  	fltoint32 n, n	
  8347                              <1>  fltoint32 cs, %1, cs, %2
  8348                              <2>  stkopen 0x08
  8349 0000002D 83EC08              <3>  sub word sp, %1
  8350 00000030 54                  <3>  push sp
  8351 00000031 5D                  <3>  pop bp
  8352 00000032 8CC8                <2>  mov ax,%1
  8353 00000034 8ED8                <2>  mov ds,ax
  8354 00000036 A1[B41B]            <2>  mov ax,[%2+2]
  8355 00000039 894600              <2>  mov [bp+0],ax
  8356 0000003C A1[B21B]            <2>  mov ax,[%2]
  8357 0000003F 894602              <2>  mov [bp+2],ax
  8358 00000042 E8(730A)            <2>  call proc_fltoint32
  8359 00000045 89E0                <2>  mov ax,sp
  8360 00000047 89C5                <2>  mov bp,ax
  8361 00000049 8CC8                <2>  mov ax,%3
  8362 0000004B 8ED8                <2>  mov ds,ax
  8363 0000004D 8B4604              <2>  mov ax,[bp+4]
  8364 00000050 A3[B41B]            <2>  mov [%4+2],ax
  8365 00000053 8B4606              <2>  mov ax,[bp+6]
  8366 00000056 A3[B21B]            <2>  mov [%4],ax
  8367                              <2>  stkclose 0x08
  8368 00000059 83C408              <3>  add word sp, %1
  8369                                  	prthex32 n
  8370                              <1>  prthex32 cs, %1
  8371 0000005C 8CC8                <2>  mov ax,%1
  8372 0000005E 8ED8                <2>  mov ds,ax
  8373 00000060 A1[B41B]            <2>  mov word ax,[%2+2]
  8374                              <2>  prthex16 ax
  8375                              <3>  stkopen 3
  8376 00000063 83EC03              <4>  sub word sp, %1
  8377 00000066 54                  <4>  push sp
  8378 00000067 5D                  <4>  pop bp
  8379 00000068 894600              <3>  mov word [bp], %1
  8380 0000006B C6460201            <3>  mov byte [bp+2], TRUE
  8381 0000006F E8(2C03)            <3>  call proc_prthex16
  8382                              <3>  stkclose 3
  8383 00000072 83C403              <4>  add word sp, %1
  8384 00000075 8CC8                <2>  mov ax,%1
  8385 00000077 8ED8                <2>  mov ds,ax
  8386 00000079 A1[B21B]            <2>  mov word ax,[%2]
  8387                              <2>  prthex16 ax
  8388                              <3>  stkopen 3
  8389 0000007C 83EC03              <4>  sub word sp, %1
  8390 0000007F 54                  <4>  push sp
  8391 00000080 5D                  <4>  pop bp
  8392 00000081 894600              <3>  mov word [bp], %1
  8393 00000084 C6460201            <3>  mov byte [bp+2], TRUE
  8394 00000088 E8(2C03)            <3>  call proc_prthex16
  8395                              <3>  stkclose 3
  8396 0000008B 83C403              <4>  add word sp, %1
  8397                                  							 		
  8398                                  	prtln
  8399                              <1>  __prtln
  8400 0000008E E8(5C04)            <2>  call proc_prtln
  8401                                  	prtln
  8402                              <1>  __prtln
  8403 00000091 E8(5C04)            <2>  call proc_prtln
  8404                                  	prtstk			
  8405                              <1>  printf "stack ---> "
  8406                              <2>  %rep %0
  8407                              <2>  __printf %1
  8408                              <2>  %rotate 1
  8409                              <2>  %endrep
  8410                              <3>  __printf %1
  8411                              <4>  section .data
  8412 00001BC2 737461636B202D2D2D- <4>  %%str: db %1,0
  8413 00001BCB 3E2000              <4>
  8414                              <4>  section .text
  8415                              <4>  prtstr cs, %%str
  8416                              <5>  stkopen 4
  8417 00000094 83EC04              <6>  sub word sp, %1
  8418 00000097 54                  <6>  push sp
  8419 00000098 5D                  <6>  pop bp
  8420 00000099 8C4E00              <5>  mov word [bp], %1
  8421 0000009C C74602[C21B]        <5>  mov word [bp+2], %2
  8422 000000A1 E8(2804)            <5>  call proc_prtstr
  8423                              <5>  stkclose 4
  8424 000000A4 83C404              <6>  add word sp, %1
  8425                              <3>  %rotate 1
  8426 000000A7 89E0                <1>  mov ax,sp
  8427                              <1>  prthex16 ax
  8428                              <2>  stkopen 3
  8429 000000A9 83EC03              <3>  sub word sp, %1
  8430 000000AC 54                  <3>  push sp
  8431 000000AD 5D                  <3>  pop bp
  8432 000000AE 894600              <2>  mov word [bp], %1
  8433 000000B1 C6460201            <2>  mov byte [bp+2], TRUE
  8434 000000B5 E8(2C03)            <2>  call proc_prthex16
  8435                              <2>  stkclose 3
  8436 000000B8 83C403              <3>  add word sp, %1
  8437                                  	
  8438 000000BB EBFE                    	jmp $		
